!function(t,e,i){"use strict";var n="ht";if(!t[n]){!function(){for(var e=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[i[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(i){var n=(new Date).getTime(),o=Math.max(0,16-(n-e)),r=t.setTimeout(function(){i(n+o)},o);return e=n+o,r}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){W(t)})}();var o,r,a,s,l=t.document,c=null,h=t[n]={},u=t.htconfig,d=h.Default=u&&u.Default||{},f=h.Style=u&&u.Style||{},g=h.Color=u&&u.Color||{},v=h.IsGetter=u&&u.IsGetter||{},_=Math,p=_.round,b=_.floor,m=_.ceil,y=_.sqrt,w=_.max,x=_.min,C=_.abs,I=_.cos,O=_.acos,S=_.sin,T=_.pow,V=_.asin,D=_.PI,E=2*D,k=D/2,P=_.tan,M=_.atan2,B=_.random,L=!1,j=t.parseInt||global.parseInt,R="2488-05-16",z=function(){try{return t.navigator.platform.indexOf("Win")>-1}catch(t){}}(),F=function(t){return t*t},A=t.setTimeout,W=t.clearTimeout,H=t.location,U=t.navigator?t.navigator.userAgent.toLowerCase():"",N=function(t){return t.test(U)},Q=N(/msie/)||N(/trident/),G=N(/msie 10/),X=N(/firefox/),Y=N(/mac/),q=d.isTouchable===i?!z&&(!!l&&"ontouchend"in l):d.isTouchable,Z="default",J="single",$="multiple",K="front",tt="back",et="left",it="right",nt="top",ot="bottom",rt="center",at="eye",st="east",lt="west",ct="north",ht="none",ut="px",dt="absolute",ft="border",gt="triangle",vt="rect",_t="circle",pt="cylinder",bt="shape",mt="items",yt="normal",wt="remove",xt="clear",Ct="width",It="height",Ot="ingroup",St="check",Tt="uncheck",Vt="radioOn",Dt="radioOff",Et="points",kt="values",Pt="series",Mt="label",Bt="label2",Lt="note",jt="note2",Rt="icons",zt="labelFont",Ft="labelColor",At="labelSelectColor",Wt="note.expanded",Ht="note2.expanded",Ut="edge.expanded",Nt="edge.points",Qt="edge.type",Gt="rotation",Xt="getRotation",Yt="setRotation",qt="hidden",Zt="visible",Jt="tuv",$t="no",Kt="select",te="currentSubGraph",ee="selectBackground",ie="autoMakeVisible",ne="autoHideScrollBar",oe="scrollBarColor",re="scrollBarSize",ae="indent",se="rowHeight",le="columnLineColor",ce="rowLineColor",he="columnLineVisible",ue="rowLineVisible",de="visibleFunc",fe="expandIcon",ge="collapseIcon",ve="checkMode",_e="sortFunc",pe="editable",be="batchEditable",me="tristate",ye="asc",we="desc",xe="position",Ce="elevation",Ie="children",Oe="translateX",Se="translateY",Te="dataModel",Ve="shape3d",De="shape3d.resolution",Ee="shape3d.visible",ke="shape3d.from.visible",Pe="shape3d.to.visible",Me="shape3d.top.visible",Be="shape3d.bottom.visible",Le="repeat.uv.length",je="serializeValue",Re="deserializeValue",ze="centerUniform",Fe="rgba(255,255,255,0)",Ae="string",We="boolean",He="color",Ue="int",Ne="number",Qe="ew-resize",Ge="ns-resize",Xe="pointer",Ye="auto",qe="mousedown",Ze="mousemove",Je="mouseup",$e="mouseout",Ke="touchstart",ti="touchmove",ei="touchend",ii="keydown",ni=X?"DOMMouseScroll":"mousewheel",oi=q?[Ke,ti,ei]:[ii,"keyup",qe,Ze,Je,$e,ni,"contextmenu"],ri=c,ai=c,si=c,li=Je.length,ci=function(){si&&(W(si.timeout),si=c)},hi=function(){si&&Yr(si.e,si.info)};t.addEventListener&&(q||(t.addEventListener($e,function(){ci()},!1),t.addEventListener(ni,function(){qr()},!1)),t.addEventListener("keyup",function(t){91===t.keyCode?xi={}:delete xi[t.keyCode]},!0),t.addEventListener(ii,function(t){xi[t.keyCode]=!0},!0));var ui,di,fi,gi=!1,vi=c,_i=c,pi={},bi={},mi={},yi={},wi={},xi={},Ci={},Ii={},Oi={},Si=[],Ti={},Vi=c,Di=c,Ei=function(){},ki=function(){throw"Oops!"},Pi=[0,0,0],Mi=[0,0,0,0],Bi={x:0,y:0,width:0,height:0},Li=c,ji=c,Ri=c,zi=function(t){ji&&!t._72O&&(Ri||(Ri={}),Ri[t._72O=xa()]=t),ui!=c?Cn()<.05&&s&&!di&&(Jn=ci):Jn=en},Fi=function(t,e,i,n){ji||(ji={});var o=ji[t];if(o){if(o.url===e)return;o.image.onload=Ei,o.image.onerror=Ei}var r=new Image;ji[t]={image:r,url:e},r.onload=function(){i&&(r.width=i),n&&(r.height=n),d.handleImageLoaded(t,r),Ai(t,r)},r.onerror=function(){Ai(t,d.handleUnfoundImage(t,e)||c)},r.src=e},Ai=function(t,e){if(bi[t]=e,delete ji[t],mn(ji)&&(ji=c,Ri)){for(var i in Ri){var n=Ri[i];n.invalidateAll&&n.invalidateAll(),n.redraw&&n.redraw(),n.iv(),delete n._72O}Ri=c}if(e&&Ri)for(var i in Ri){var n=Ri[i];n.invalidateAll&&n.invalidateAll(),n.redraw&&n.redraw(),n.iv()}},Wi=function(){return t.performance&&t.performance.now?t.performance.now():Date.now()},Hi=function(e,i){i?W(e):t.cancelAnimationFrame(e)},Ui=function(t,e,i){return{width:t,height:e,comps:rn(i)?i:[i]}},Ni=function(t,e){return{type:_t,rect:[t,e,1.6,1.6],borderWidth:1,borderColor:Tr,gradient:Xr,gradientColor:Vr,background:Tr}},Qi=function(t,e){return Ui(16,16,{type:gt,rect:[4,4,10,8],background:t,rotation:e?1.57:3.14})},Gi=function(t,e){return Ui(16,16,{type:gt,rect:[4,4,8,7],background:t,rotation:e?3.14:0})},Xi=function(t){var e=t._orientation;return"horizontal"===e||"h"===e},Yi=function(t){h.z=r=t},qi=function(t){var e=0;for(var i in t)2===i.length&&j(i,32)===_o&&(Vi=Di=t[i]),e++;return e},Zi=function(t,e,i){return i?{x:t-i,y:e-i,width:2*i+1,height:2*i+1}:q?{x:t-5,y:e-5,width:11,height:11}:{x:t-1,y:e-1,width:3,height:3}},Ji=function(t){return(/ble$/.test(t)||/ed$/.test(t)||v[t]?"is":"get")+t.charAt(0).toUpperCase()+t.slice(1)},$i=function(t){return"set"+t.charAt(0).toUpperCase()+t.slice(1)},Ki=function(t){return typeof t===Ae||t instanceof String},tn=function(t){return typeof t===Ne},en=function(t){return typeof t===We},nn=function(t){return t&&"object"==typeof t},on=function(t){return"function"==typeof t},rn=function(t){return t instanceof Array},an=function(t){return t instanceof Fs},sn=function(t){return rn(t)?new Fs(t):t},ln=function(t){return t instanceof lc},cn=function(t){return t instanceof fc},hn=function(t){return t instanceof gc},un=function(t){return t&&"IFRAME"===t.tagName},dn=function(t){return t==c?t:parseFloat(t.toFixed(2))},fn=function(t,e,i){var n,o=e.length;if(i)for(var r=0;i>r;r++)if(3===o)t.push(e[0]),t.push(e[1]),t.push(e[2]);else for(n=0;o>n;n++)t.push(e[n]);else if(3===o)t.push(e[0]),t.push(e[1]),t.push(e[2]);else for(n=0;o>n;n++)t.push(e[n])},gn=function(t){return!!t&&(nn(t)?t:{})},vn=function(t,e,n){var o,r=nn(t)?t:t.prototype;for(o in e)n&&r[o]!==i||(r[o]=e[o]);return t},_n=function(t){return String.fromCharCode(t)},pn=function(t){for(var e,i=0,n="";i<t.length;i++)e=t[t.length-1-i],"%"===e?e="'":"a"===e?e='"':"]"===e&&(e="\\"),n+=_n(e.charCodeAt(0)-1);return n},bn=function(t,e,i){t.superClass.constructor.apply(e,i)},mn=function(t){for(var e in t)return!1;return!0},yn=function(t){return!t||0===t.length},wn=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},xn=function(t,e,i){return e>t?e:t>i?i:t},Cn=function(){var t=1e4*S(li++);return t-b(t)},In=function(t,e,i){return On(t.x,t.y,e.x,e.y,i.x,i.y,i.x+i.width,i.y,!0)||On(t.x,t.y,e.x,e.y,i.x+i.width,i.y,i.x+i.width,i.y+i.height,!0)||On(t.x,t.y,e.x,e.y,i.x+i.width,i.y+i.height,i.x,i.y+i.height,!0)||On(t.x,t.y,e.x,e.y,i.x,i.y+i.height,i.x,i.y,!0)},On=function(t,e,i,n,o,r,a,s,l){var h=(a-o)*(e-r)-(s-r)*(t-o),u=(s-r)*(i-t)-(a-o)*(n-e);if(0!==u){var d=h/u,f=t+d*(i-t),g=e+d*(n-e);return l&&(f+rs<x(t,i)||f-rs>w(t,i)||f+rs<x(o,a)||f-rs>w(o,a)||g+rs<x(e,n)||g-rs>w(e,n)||g+rs<x(r,s)||g-rs>w(r,s))?c:[f,g]}return c},Sn=function(t,e,n){if(t&&n)if(e){if("style"===e)return t.getStyle(n);if("attr"===e)return t.getAttr(n);if("field"===e)return t[n]}else if(n=Ji(n),t[n])return t[n]();return i},Tn=function(t,e,i,n){if(t&&i)if(e){if("style"===e)t.s(i,n);else if("attr"===e)t.a(i,n);else if("field"===e){var o=t[i];t[i]=n,t.fp("f:"+i,o,n)}}else i=$i(i),t[i]&&t[i](n)},Vn=function(t,e,i,n,o){e&&Qo(t,i,n,1,o,e)},Dn=function(t,e,i,n){var o=1-t;return o*o*e+2*t*o*i+t*t*n},En=function(t,e,i,n,o){var r=1-t;return r*r*r*e+3*r*r*t*i+3*r*t*t*n+t*t*t*o},kn=function(t){var e,i,n,o,r=0;return t.forEach(function(t){if((e=t.length)>0)for(i=t[0],o=1;e>o;o++)n=t[o],r+=Aa(i,n),i=n}),r},Pn=function(t,e,i){var n="__"+t,o=function(e){i["handle_"+t](e)};i[n]||(i[n]=o,e.addEventListener(t,o,!1))},Mn=function(t,e,i){var n="__"+t,o=i[n];o&&(e.removeEventListener(t,o,!1),delete i[n])},Bn=function(t,e){var i="_"+e;t[Ji(e)]=function(){return this[i]},t[$i(e)]=function(t){var n=this[i];this[i]=t,this.fp(e,n,t)}},Ln=function(t){return e.create(t)},jn=function(t){if(!t.element){var e,i;(e=t.textField)?i=_a(Rd.TextField,e):(e=t.textArea)?i=_a(Rd.TextArea,e):(e=t.button)?i=_a(Rd.Button,e):(e=t.comboBox)?i=_a(Rd.ComboBox,e):(e=t.checkBox)?i=_a(Rd.CheckBox,e):(e=t.radioButton)?i=_a(Rd.RadioButton,e):(e=t.slider)?i=_a(Rd.Slider,e):(e=t.colorPicker)?i=_a(Rd.ColorPicker,e):(e=t.image)&&(i=_a(Rd.Image,e)),i&&(t.element=i)}},Rn=function(t,e){var i=zn(t);return i._ht=e,i},zn=function(t){var e=l.createElement("div"),i=e.style;return e.tabIndex=-1,e.onkeydown=pa,i.msTouchAction=ht,i.cursor=Z,An(e,c,0),q&&i.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",c),t&&(i.overflow=qt),e},Fn=function(t){var e=l.createElement("canvas"),i=e.style;return i.msTouchAction=ht,i.pointerEvents=ht,An(e,c,0),t&&Un(t,e),e},An=function(t,e,i){var n=t.style;n.border=e?e+" solid 1px":0,n.outline=0,n.padding=i?"0 "+i+ut:0,Wn(t)},Wn=function(t){var e=t.style;e.position=dt,e.margin=0,e.setProperty("box-sizing","border-box",c),e.setProperty("-moz-box-sizing","border-box",c)},Hn=function(t,e,i,n){n||(n=Nr),e!=c&&(t.width=e*n,t.style.width=e+ut),i!=c&&(t.height=i*n,t.style.height=i+ut)},Un=function(t,e,i){t.appendChild(e),i&&(e.style.position=dt)},Nn=function(t,e){e.split||(e+="");for(var i,n=e.split("\n"),o=0,r=n.length,a=0;r>a;a++){var s=Pa(t.font,n[a]);s.width>o&&(o=s.width),i||(i=s.height)}return t.ss=n,{width:o,height:i*r}},Qn=function(t,e,i,n,o,r){var a=e.length;if(1===a)Gn(t,e[0],i,n,o);else for(var s=i.height/a,l={x:i.x,y:i.y,width:i.width,height:s},c=0;c<e.length;c++)r?ka(t,e[c],n,o,l.x,l.y,l.width,l.height,r):Gn(t,e[c],l,n,o),l.y+=s},Gn=function(t,e,n,o,r){t.font=o||ea,t.fillStyle=r||Kr,t.textAlign=rt,t.textBaseline="middle";var a,s;n?n.width===i?(a=n.x,s=n.y):(a=n.x+n.width/2,s=n.y+n.height/2):(a=0,s=0),t.fillText(e,p(a),p(s))},Xn=function(t){t.getView&&(t=t.getView());var e=t.offsetWidth||t.scrollWidth;return!e&&t.style.width&&(e=j(t.style.width)),e},Yn=function(t){t.getView&&(t=t.getView());var e=t.offsetHeight||t.scrollHeight;return!e&&t.style.height&&(e=j(t.style.height)),e},qn=function(){var t=function(t){pa(t),t.stopPropagation()},e=q?[Ke]:[ii,qe,ni];return function(i){var n=zn(),o=n.style;return o.backgroundColor=d.disabledBackground,i&&(o.backgroundImage="url("+i+")",o.backgroundPosition="50% 50%",o.backgroundRepeat="no-repeat no-repeat"),e.forEach(function(e){n.addEventListener(e,t)}),n}}(),Zn=function(t){var e=t.getContext("2d");return e.save(),e.lineCap=Jr,e.lineJoin=$r,e},Jn=function(t,e,i,n){$n(t,e*Nr,i*Nr),1!==(n*=Nr)&&t.scale(n,n)},$n=function(t,e,i){t.translate(e,i)},Kn=function(t,e){t.rotate(e)},to=function(t){if(l.activeElement!==t)if(q)t.focus();else{var e=Xa(),i=e.target;t.focus(),i.scrollLeft=e.left,i.scrollTop=e.top}},eo=function(t){return t&&t.getView?t.getView():t},io=function(t,e,n,o,r){2===arguments.length&&(n=e.y,o=e.width,r=e.height,e=e.x);var a=eo(t),s=a.style;(l.fullscreenElement||l.mozFullScreenElement||l.webkitFullscreenElement||l.msFullscreenElement)!==a&&(e!==i&&(s.left=e+ut),n!==i&&(s.top=n+ut),o!==i&&(s.width=o+ut),r!==i&&(s.height=r+ut)),t.endEditing&&!q&&t.endEditing(),t.redraw&&t.redraw(),t.invalidate&&t.invalidate(),t.onLayouted&&t.onLayouted(e,n,o,r),t._41O&&t._41O("layout")},no=function(t){var e=t.touches[0];return e||t.changedTouches[0]},oo=function(t){d.popup&&d.popup.close(),d.popup=t},ro=c,ao=function(t){ro.handleWindowTouchMove(t)},so=function(e){ro.handleWindowTouchEnd(e),t.removeEventListener(ti,ao,!1),t.removeEventListener(ei,so,!1),ro=c},lo=function(t){ro.handleWindowMouseMove(t)},co=function(e){ro.handleWindowMouseUp(e),t.removeEventListener(Ze,lo,!1),t.removeEventListener(Je,co,!1),ro=c},ho=function(t){return 1===Ba(t)},uo=function(t,e){return e?e.keyCode===t:xi[t]},fo=function(t){return Ra(t)&&uo(65,t)},go=function(t){return uo(46,t)||uo(8,t)},vo=function(t){return function(e){return e?e.keyCode===t:xi[t]}},_o=573,po=[65,83,68,87,37,38,39,40,32,13,27],bo=vo(po[0]),mo=vo(po[1]),yo=vo(po[2]),wo=vo(po[3]),xo=vo(po[4]),Co=vo(po[5]),Io=vo(po[6]),Oo=vo(po[7]),So=vo(po[8]),To=vo(po[9]),Vo=vo(po[10]),Do={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},Eo=[2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,11,13,331],ko=c,Po=c,Mo=function(t,e){ko||(ko=Fn()),Hn(ko,t,e,1);var i=Zn(ko);return i.clearRect(0,0,t,e),i},Bo=function(){var t,e={};return function(i){var n,o=e[i];return o||(t||(t=Fn(),Hn(t,1,1,1)),n=t.getContext("2d"),n.clearRect(0,0,1,1),Qo(n,0,0,1,1,i),o=n.getImageData(0,0,1,1).data,o=e[i]=[o[0],o[1],o[2],o[3]]),o}}(),Lo=function(t){if(!Ki(t))return t;var e=Bo(t);return e.CA||(e.CA=[e[0]/255,e[1]/255,e[2]/255,e[3]/255]),e.CA},jo=function(t,e,i,n){var o=Fn();o.width=i,o.height=n;var r=o.getContext("2d");r.drawImage(t,0,0,i,n);try{for(var a=r.getImageData(0,0,i,n),s=a.data,l=0,c=s.length;c>l;l+=4){var h=s[l+0],u=s[l+1],d=s[l+2];s[l+0]=e[0]*h,s[l+1]=e[1]*u,s[l+2]=e[2]*d}r.putImageData(a,0,0)}catch(e){return t}return o},Ro=function(t,e,i){return e&&(e="miter"===i?8*e+20:e+1,t&&Ya(t,e)),e},zo=function(t,e){if(e){var i=new or(e),n=t.width/2,o=t.height/2,r=Wa([i.tf(-n,-o),i.tf(n,-o),i.tf(n,o),i.tf(-n,o)]);return r.x+=t.x+n,r.y+=t.y+o,r}return t},Fo=function(t,e,i,n,o,r,a,s){n*=Math.PI/180;var l={x:Math.cos(n)*(t.x-a.x)/2+Math.sin(n)*(t.y-a.y)/2,y:-Math.sin(n)*(t.x-a.x)/2+Math.cos(n)*(t.y-a.y)/2},c=Math.pow(l.x,2)/Math.pow(e,2)+Math.pow(l.y,2)/Math.pow(i,2);c>1&&(e*=Math.sqrt(c),i*=Math.sqrt(c));var h=(o==r?-1:1)*Math.sqrt((Math.pow(e,2)*Math.pow(i,2)-Math.pow(e,2)*Math.pow(l.y,2)-Math.pow(i,2)*Math.pow(l.x,2))/(Math.pow(e,2)*Math.pow(l.y,2)+Math.pow(i,2)*Math.pow(l.x,2)));isNaN(h)&&(h=0);var u={x:h*e*l.y/i,y:h*-i*l.x/e},d={x:(t.x+a.x)/2+Math.cos(n)*u.x-Math.sin(n)*u.y,y:(t.y+a.y)/2+Math.sin(n)*u.x+Math.cos(n)*u.y},f=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},g=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(f(t)*f(e))},v=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(g(t,e))},_=v([1,0],[(l.x-u.x)/e,(l.y-u.y)/i]),p=[(l.x-u.x)/e,(l.y-u.y)/i],b=[(-l.x-u.x)/e,(-l.y-u.y)/i],m=v(p,b);g(p,b)<=-1&&(m=Math.PI),g(p,b)>=1&&(m=0);var g=e>i?e:i,y=e>i?1:e/i,w=e>i?i/e:1;if(null==s){var x={x:0,y:0,width:0,height:0};Ya(x,g),x.x*=y,x.width*=y,x.y*=w,x.height*=w;var C=new or(n);return x=Wa([C.tf(x.x,x.y),C.tf(x.x+x.width,x.y),C.tf(x.x+x.width,x.y+x.height),C.tf(x.x,x.y+x.height)]),x.x+=d.x,x.y+=d.y,[{x:x.x,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x+x.width,y:x.y+x.height},{x:x.x,y:x.y+x.height}]}s.translate(d.x,d.y),s.rotate(n),s.scale(y,w),s.arc(0,0,g,_,_+m,1-r),s.scale(1/y,1/w),s.rotate(-n),s.translate(-d.x,-d.y)},Ao=function(t,e){t&&t.beginPath();for(var i,n,o,r=[],a=function(t){for(var e,i=/(\-{0,1}[\d\.]+)/gi,n=[];e=i.exec(t);)n.push(parseFloat(e[0]));return n},s=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,l={x:0,y:0};i=s.exec(e);){var c=i[0],h=c.substr(0,1);if("M"===h||"m"===h){for(var u=a(c),d=0;d<u.length;d+=2){var f=u[d],g=u[d+1];"m"===h&&(f+=l.x,g+=l.y),t&&t.moveTo(f,g),r.push({x:f,y:g}),l.x=f,l.y=g}n=o=null}else if("H"===h||"h"===h){for(var u=a(c),d=0;d<u.length;d+=1){var f=u[d];"h"===h&&(f+=l.x),t&&t.lineTo(f,l.y),r.push({x:f,y:l.y}),l.x=f}n=o=null}else if("C"===h||"c"===h){for(var u=a(c),d=0;d<u.length;d+=6){var v=u[d],_=u[d+1],p=u[d+2],b=u[d+3],f=u[d+4],g=u[d+5];"c"===h&&(v+=l.x,_+=l.y,p+=l.x,b+=l.y,f+=l.x,g+=l.y),t&&t.bezierCurveTo(v,_,p,b,f,g),r.push({x:v,y:_}),r.push({x:p,y:b}),r.push({x:f,y:g}),l.x=f,l.y=g}n=[v,_,p,b,f,g],o=null}else if("S"===h||"s"===h){for(var u=a(c),d=0;d<u.length;d+=4){var v,_;n?(v=2*n[4]-n[2],_=2*n[5]-n[3]):(v=l.x,_=l.y);var p=u[d],b=u[d+1],f=u[d+2],g=u[d+3];"s"===h&&(p+=l.x,b+=l.y,f+=l.x,g+=l.y),t&&t.bezierCurveTo(v,_,p,b,f,g),r.push({x:v,y:_}),r.push({x:p,y:b}),r.push({x:f,y:g}),l.x=f,l.y=g}n=[v,_,p,b,f,g],o=null}else if("Q"===h||"q"===h){for(var u=a(c),d=0;d<u.length;d+=4){var v=u[d],_=u[d+1],f=u[d+2],g=u[d+3];"q"===h&&(v+=l.x,_+=l.y,f+=l.x,g+=l.y),t&&t.quadraticCurveTo(v,_,f,g),r.push({x:v,y:_}),r.push({x:f,y:g}),l.x=f,l.y=g}n=null,o=[v,_,f,g]}else if("T"===h||"t"===h){for(var u=a(c),d=0;d<u.length;d+=2){var v,_;o?(v=2*o[2]-o[0],_=2*o[3]-o[1]):(v=l.x,_=l.y);var f=u[d],g=u[d+1];"t"===h&&(f+=l.x,g+=l.y),t&&t.quadraticCurveTo(v,_,f,g),r.push({x:v,y:_}),r.push({x:f,y:g}),l.x=f,l.y=g}n=null,o=[v,_,f,g]}else if("V"===h||"v"===h){for(var u=a(c),d=0;d<u.length;d+=1){var g=u[d];"v"===h&&(g+=l.y),t&&t.lineTo(l.x,g),r.push({x:l.x,y:g}),l.y=g}n=o=null}else if("L"===h||"l"===h){for(var u=a(c),d=0;d<u.length;d+=2){var f=u[d],g=u[d+1];"l"===h&&(f+=l.x,g+=l.y),t&&t.lineTo(f,g),r.push({x:f,y:g}),l.x=f,l.y=g}n=o=null}else if("A"===h||"a"===h){for(var u=a(c),d=0;d<u.length;d+=7){var m=u[d],y=u[d+1],w=u[d+2],x=u[d+3],C=u[d+4],f=u[d+5],g=u[d+6];"a"===h&&(f+=l.x,g+=l.y);var I=Fo(l,m,y,w,x,C,{x:f,y:g},t);I&&(r=r.concat(I)),l.x=f,l.y=g}n=o=null}var O=c.substr(c.length-1);("z"===O||"Z"===O)&&t&&t.closePath()}return r},Wo=function(t,e,i,n){var o=!1;if(t.beginPath?t.beginPath():o=!0,an(e)&&(e=e._as),an(i)&&(i=i._as),i&&i.length){for(var r,a,s,l,c=0,h=0,u=i.length;u>h;h++)r=i[h],1===r?(a=e[c++],t.moveTo(a.x,o?-a.y:a.y)):2===r?(a=e[c++],t.lineTo(a.x,o?-a.y:a.y)):3===r?(a=e[c++],s=e[c++],t.quadraticCurveTo(a.x,o?-a.y:a.y,s.x,o?-s.y:s.y)):4===r?(a=e[c++],s=e[c++],l=e[c++],t.bezierCurveTo(a.x,o?-a.y:a.y,s.x,o?-s.y:s.y,l.x,o?-l.y:l.y)):5===r&&t.closePath();n&&5!==r&&t.closePath()}else{var d,f,g,v=e.length;if(v>0){for(d=e[0],t.moveTo(d.x,o?-d.y:d.y),f=1;v>f;f++)g=e[f],t.lineTo(g.x,o?-g.y:g.y);n&&t.closePath()}}},Ho=function(t,e,i,n){if(an(t)&&(t=t._as),an(e)&&(e=e._as),e&&e.length){i=i||Ka;for(var o,r,a,s,l,h,u=[],d=c,f=0,g=0,v=e.length;v>g;g++)if(1===(o=e[g]))u.push(d=[]),d.push(t[f++]);else if(2===o)d.push(t[f++]);else if(3===o)for(r=d[d.length-1],a=t[f++],s=t[f++],h=1;i>=h;h++)d.push({x:Dn(h/i,r.x,a.x,s.x),y:Dn(h/i,r.y,a.y,s.y)});else if(4===o)for(r=d[d.length-1],a=t[f++],s=t[f++],l=t[f++],h=1;i>=h;h++)d.push({x:En(h/i,r.x,a.x,s.x,l.x),y:En(h/i,r.y,a.y,s.y,l.y)});else 5===o&&d.push(d[0]);return n&&5!==o&&d&&d.length>2&&d.push(d[0]),u}return n&&t.length>2&&(t=t.slice(),t.push(t[0])),t?[t]:[]},Uo=function(t,e,i,n,o,r){var a,s,l,c=Bo(e),h=n,u=c[0],d=c[1],f=c[2];if(i){var g=Bo(i);a=g[0]-u,s=g[1]-d,l=g[2]-f}else a=255-u,s=255-d,l=255-f;for(r||(r=n>10?1:.5,r=1>o?x(r/o,2):r);(n-=r)>0;){var v=1-n/h,_=u+a*v,p=d+s*v,b=f+l*v;_=x(m(_),255),p=x(m(p),255),b=x(m(b),255),t.strokeStyle="rgb("+_+","+p+","+b+")",t.lineWidth=n,t.stroke()}},No=function(){var t={};return function(e,i){var n=e+"-"+i,o=t[n];if(o)return o;var r,a,s,l=Bo(e);return 0>i?(i=(100+i)/100,r=m(l[0]*i),a=m(l[1]*i),s=m(l[2]*i)):(i/=100,r=l[0],a=l[1],s=l[2],r+=(255-r)*i,a+=(255-a)*i,s+=(255-s)*i,r=x(m(r),255),a=x(m(a),255),s=x(m(s),255)),t[n]="rgb("+r+","+a+","+s+")"}}(),Qo=function(t,e,i,n,o,r){r&&(t.fillStyle=r),t.beginPath(),t.rect(e,i,n,o),t.fill()},Go=function(t,e,i,n,o,r,a){t.beginPath(),nr[e](t,i.x,i.y,i.width,i.height,n,o,r,a)},Xo=function(t,e,i,n,o){var r=nr[i];t.fillStyle=r?r(t,e,n||Vr,o.x,o.y,o.width,o.height):e},Yo=function(t,e){t.fillStyle=t.createPattern(e,"repeat")},qo=function(t,e,i,n,o,r,a,s){var l,c,h,u,d,f,g,v,_,p,b;if(C(o)>2*D&&(o=2*D),d=m(C(o)/(D/4)),l=o/d,c=-l,h=-n,d>0){f=e+I(n)*r,g=i+S(-n)*a,s?t.lineTo(f,g):t.moveTo(f,g);for(var y=0;d>y;y++)h+=c,u=h-c/2,v=e+I(h)*r,_=i+S(h)*a,p=e+I(u)*(r/I(c/2)),b=i+S(u)*(a/I(c/2)),t.quadraticCurveTo(p,b,v,_)}},Zo=function(t,e,i,n,o,r,a,s,l){6===arguments.length&&(a=r,s=r,l=r);var c=e+n,h=i+o,u=o>n?2*n:2*o;r=u>r?r:u,a=u>a?a:u,s=u>s?s:u,l=u>l?l:u;var d=.29*l,f=.58*l;t.moveTo(c,h-l),t.quadraticCurveTo(c,h-f,c-d,h-d),t.quadraticCurveTo(c-f,h,c-l,h),d=.29*s,f=.58*s,t.lineTo(e+s,h),t.quadraticCurveTo(e+f,h,e+d,h-d),t.quadraticCurveTo(e,h-f,e,h-s),d=.29*r,f=.58*r,t.lineTo(e,i+r),t.quadraticCurveTo(e,i+f,e+d,i+d),t.quadraticCurveTo(e+f,i,e+r,i),d=.29*a,f=.58*a,t.lineTo(c-a,i),t.quadraticCurveTo(c-f,i,c-d,i+d),t.quadraticCurveTo(c,i+f,c,i+a),t.lineTo(c,h-l)},Jo=function(t,e,i,n,o,r,a){e&&(i=p(i),n=p(n),a||(a=1),t.fillStyle=e,t.beginPath(),t.rect(i,n,a,r),t.rect(i,n,o,a),t.rect(i,n+r-a,o,a),t.rect(i+o-a,n,a,r),t.fill())},$o=function(t,e,i,n){var o=n.x,r=n.y,a=n.width,s=n.height;if(!(!e||!i||0>=a||0>=s)){var l,c=Da(e),h=Ea(e),u=i>0;1===i||-1===i?(t.fillStyle=u?c:h,t.beginPath(),t.rect(o,r,1,s),t.rect(o,r,a,1),t.fill(),t.fillStyle=u?h:c,t.beginPath(),t.rect(o,r+s-1,a,1),t.rect(o+a-1,r,1,s),t.fill()):(i=x(C(i),x(a/2,s/2)),l=t.createLinearGradient(o,r,o+i,r),l.addColorStop(0,u?c:h),l.addColorStop(1,e),t.fillStyle=l,t.beginPath(),t.moveTo(o,r),t.lineTo(o+i,r+i),t.lineTo(o+i,r+s-i),t.lineTo(o,r+s),t.lineTo(o,r),t.fill(),l=t.createLinearGradient(o,r,o,r+i),l.addColorStop(0,u?c:h),l.addColorStop(1,e),t.fillStyle=l,t.beginPath(),t.moveTo(o,r),t.lineTo(o+i,r+i),t.lineTo(o+a-i,r+i),t.lineTo(o+a,r),t.lineTo(o,r),t.fill(),l=t.createLinearGradient(o,r+s,o,r+s-i),l.addColorStop(0,u?h:c),l.addColorStop(1,e),t.fillStyle=l,t.beginPath(),t.moveTo(o,r+s),t.lineTo(o+i,r+s-i),t.lineTo(o+a-i,r+s-i),t.lineTo(o+a,r+s),t.lineTo(o,r+s),t.fill(),l=t.createLinearGradient(o+a,r,o+a-i,r),l.addColorStop(0,u?h:c),l.addColorStop(1,e),t.fillStyle=l,t.beginPath(),t.moveTo(o+a,r),t.lineTo(o+a-i,r+i),t.lineTo(o+a-i,r+s-i),t.lineTo(o+a,r+s),t.lineTo(o+a,r),t.fill())}},Ko=function(t,e,i,n,o,r,a){var s=t.createLinearGradient(n,o,r,a);return s.addColorStop(0,i),s.addColorStop(1,e),s},tr=function(t,e,i,n,o,r,a){var s=t.createLinearGradient(n,o,r,a);return s.addColorStop(0,e),s.addColorStop(.5,i),s.addColorStop(1,e),s},er=function(t,e,i,n,o,r,a){var s=t.createLinearGradient(n,o,r,a);return s.addColorStop(0,e),s.addColorStop(1/3,i),s.addColorStop(2/3,e),s.addColorStop(1,i),s},ir=function(t,e,i,n,o,r,a,s,l){var c=t.createRadialGradient(n+r*s,o+a*l,x(r,a)/24,n+r/2,o+a/2,w(r,a)/2);return c.addColorStop(0,i),c.addColorStop(1,e),c},nr={polygon:function(t,e,i,n,o,r){(r==c||3>r)&&(r=6);for(var a,s,l=x(n,o)/2,h=e+n/2,u=i+o/2,d=0,f=2*D/r,g=0;r>g;g++)a=h+I(d)*l,s=u+S(d)*l,0===g?t.moveTo(a,s):t.lineTo(a,s),d+=f;t.closePath()},arc:function(t,e,i,n,o,r,a,s,l){r==c&&(r=D),a==c&&(a=E),s==c&&(s=!0);var h=e+n/2,u=i+o/2;s&&t.moveTo(h,u),l?(r=-r,a=-a,qo(t,h,u,r,a-r,n/2,o/2,!0)):t.arc(h,u,x(n,o)/2,r,a),s&&t.closePath()},rect:function(t,e,i,n,o){t.rect(e,i,n,o)},circle:function(t,e,i,n,o){t.arc(e+n/2,i+o/2,x(n,o)/2,0,E,!0)},oval:function(t,e,i,n,o){qo(t,e+n/2,i+o/2,0,E,n/2,o/2,!1)},roundRect:function(t,e,i,n,o,r){r==c&&(r=x(x(n,o)/4,8)),Zo(t,e,i,n,o,r)},star:function(t,e,i,n,o){var r=2*n,a=2*o,s=e+n/2,l=i+o/2;t.moveTo(s-r/4,l-a/12),t.lineTo(e+.306*n,i+.579*o),t.lineTo(s-r/6,l+a/4),t.lineTo(e+n/2,i+.733*o),t.lineTo(s+r/6,l+a/4),t.lineTo(e+.693*n,i+.579*o),t.lineTo(s+r/4,l-a/12),t.lineTo(e+.611*n,i+.332*o),t.lineTo(s+0,l-a/4),t.lineTo(e+.388*n,i+.332*o),t.closePath()},triangle:function(t,e,i,n,o){t.moveTo(e+n/2,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath()},hexagon:function(t,e,i,n,o){t.moveTo(e,i+o/2),t.lineTo(e+n/4,i+o),t.lineTo(e+3*n/4,+i+o),t.lineTo(e+n,i+o/2),t.lineTo(e+3*n/4,i),t.lineTo(e+n/4,i),t.closePath()},pentagon:function(t,e,i,n,o){var r=2*n,a=2*o,s=e+n/2,l=i+o/2;t.moveTo(s-r/4,l-a/12),t.lineTo(s-r/6,l+a/4),t.lineTo(s+r/6,l+a/4),t.lineTo(s+r/4,l-a/12),t.lineTo(s+0,l-a/4),t.closePath()},diamond:function(t,e,i,n,o){t.moveTo(e+n/2,i),t.lineTo(e,i+o/2),t.lineTo(e+n/2,i+o),t.lineTo(e+n,i+o/2),t.closePath()},rightTriangle:function(t,e,i,n,o){t.moveTo(e,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath()},parallelogram:function(t,e,i,n,o){var r=n/4;t.moveTo(e+r,i),t.lineTo(e+n,i),t.lineTo(e+n-r,i+o),t.lineTo(e,i+o),t.closePath()},trapezoid:function(t,e,i,n,o){var r=n/4;t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath()},"linear.southwest":function(t,e,i,n,o,r,a){return Ko(t,e,i,n,o+a,n+r,o)},"linear.southeast":function(t,e,i,n,o,r,a){return Ko(t,e,i,n+r,o+a,n,o)},"linear.northwest":function(t,e,i,n,o,r,a){return Ko(t,e,i,n,o,n+r,o+a)},"linear.northeast":function(t,e,i,n,o,r,a){return Ko(t,e,i,n+r,o,n,o+a)},"linear.north":function(t,e,i,n,o,r,a){return Ko(t,e,i,n,o,n,o+a)},"linear.south":function(t,e,i,n,o,r,a){return Ko(t,e,i,n,o+a,n,o)},"linear.west":function(t,e,i,n,o,r){return Ko(t,e,i,n,o,n+r,o)},"linear.east":function(t,e,i,n,o,r){return Ko(t,e,i,n+r,o,n,o)},"radial.center":function(t,e,i,n,o,r,a){return ir(t,e,i,n,o,r,a,.5,.5)},"radial.southwest":function(t,e,i,n,o,r,a){return ir(t,e,i,n,o,r,a,.25,.75)},"radial.southeast":function(t,e,i,n,o,r,a){return ir(t,e,i,n,o,r,a,.75,.75)},"radial.northwest":function(t,e,i,n,o,r,a){return ir(t,e,i,n,o,r,a,.25,.25)},"radial.northeast":function(t,e,i,n,o,r,a){return ir(t,e,i,n,o,r,a,.75,.25)},"radial.north":function(t,e,i,n,o,r,a){return ir(t,e,i,n,o,r,a,.5,.25)},"radial.south":function(t,e,i,n,o,r,a){return ir(t,e,i,n,o,r,a,.5,.75)},"radial.west":function(t,e,i,n,o,r,a){return ir(t,e,i,n,o,r,a,.25,.5)},"radial.east":function(t,e,i,n,o,r,a){return ir(t,e,i,n,o,r,a,.75,.5)},"spread.horizontal":function(t,e,i,n,o,r){return tr(t,e,i,n,o,n+r,o)},"spread.vertical":function(t,e,i,n,o,r,a){return tr(t,e,i,n,o,n,o+a)},"spread.diagonal":function(t,e,i,n,o,r,a){return tr(t,e,i,n+r,o,n,o+a)},"spread.antidiagonal":function(t,e,i,n,o,r,a){return tr(t,e,i,n,o,n+r,o+a)},"spread.north":function(t,e,i,n,o,r,a){return er(t,e,i,n,o-a/4,n,o+a+a/4)},"spread.south":function(t,e,i,n,o,r,a){return er(t,i,e,n,o-a/4,n,o+a+a/4)},"spread.west":function(t,e,i,n,o,r){return er(t,e,i,n-r/4,o,n+r+r/4,o)},"spread.east":function(t,e,i,n,o,r){return er(t,i,e,n-r/4,o,n+r+r/4,o)}},or=function(t,e,i){var n=this;n.s=S(t),n.c=I(t),n.cx=e||0,n.cy=i||0};or.prototype.tf=function(t,e){1===arguments.length&&(e=t.y,t=t.x);var i=this;return{x:i.c*t-i.s*e+i.cx,y:i.s*t+i.c*e+i.cy}};var rr=function(t,e,i){return new or(t).tf(e,i)},ar=function(t){var e=t.touches[0],i=t.touches[1],n=e.clientX,o=e.clientY,r=i.clientX,a=i.clientY;return y((n-r)*(n-r)+(o-a)*(o-a))},sr=(function(){for(var e=0,i=we.split(""),n=0;n<i.length;n++)e=10*j(i[n])+e;Yi(t[_o.toString(8*n)+Mt.substr(n)])}(),function(t,e,i){for(var n=0;n<i.size();n++){var o=i.get(n);t.co(o)&&e.add(o)}for(n=0;n<i.size();n++)o=i.get(n),sr(t,e,o._children)}),lr=function(t,e,i){for(var n=0;n<i.size();n++){var o=i.get(i.size()-1-n);t.co(o)&&e.add(o)}for(n=0;n<i.size();n++)o=i.get(n),lr(t,e,o._children)},cr=function(t,e,i){for(var n=!1,o=0;o<i.size();o++){var r=i.get(o);t.co(r)?n&&e.add(r):n=1}for(o=0;o<i.size();o++)r=i.get(o),cr(t,e,r._children)},hr=function(t,e,i){for(var n=!1,o=0;o<i.size();o++){var r=i.get(i.size()-1-o);t.co(r)?n&&e.add(r):n=!0}for(o=0;o<i.size();o++)r=i.get(o),hr(t,e,r._children)},ur=function(t,e,i,n){var o=n==c;if(0!==e||0!==i||!o&&0!==n){var r,a,s,l,h=new Fs;t.each(function(t){if(ln(t)){var u=!0;if(s)for(r=0;r<s.size();r++)a=s.get(r),a.isHostOn(t)?(s.removeAt(r),r--,h.remove(a)):u&&(t.isHostOn(a)||t.isLoopedHostOn(a))&&(u=!1);if(l)for(r=0;r<l.size();r++)a=l.get(r),el(a,t)?(l.removeAt(r),r--,h.remove(a)):u&&el(t,a)&&(u=!1);u&&(h.add(t),(t._host||t._69O)&&(s||(s=new Fs),s.add(t)),(hn(t)||hn(t._parent))&&(l||(l=new Fs),l.add(t)))}else if(cn(t)&&t.s(Qt)===Et){var d=t.s(Nt);d&&!d.isEmpty()&&(d.each(function(t){o?(t.x+=e,t.y+=i):(t.x+=e,t.y+=n,t.e==c?t.e=i:t.e+=i)}),t.fp(Nt,!1,!0))}}),h.each(function(t){o?t.translate(e,i):t.translate3d(e,i,n)})}},dr={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},fr=function(){var e={1:function(t,e){return{x:t.x-e.width/2,y:t.y-e.height/2}},2:function(t,e){return{x:t.x+e.width/2,y:t.y-e.height/2}},3:function(t,e){return{x:t.x+t.width/2,y:t.y-e.height/2}},4:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y-e.height/2}},5:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y-e.height/2}},6:function(t){return{x:t.x,y:t.y}},7:function(t){return{x:t.x+t.width/2,y:t.y}},8:function(t){return{x:t.x+t.width,y:t.y}},9:function(t,e){return{x:t.x-e.width/2,y:t.y+e.height/2}},10:function(t,e){return{x:t.x+e.width/2,y:t.y+e.height/2}},11:function(t,e){return{x:t.x+t.width/2,y:t.y+e.height/2}},12:function(t,e){return{x:t.x-e.width/2+t.width,y:t.y+e.height/2}},13:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+e.height/2}},14:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height/2}},15:function(t){return{x:t.x,y:t.y+t.height/2}},16:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height/2}},17:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},18:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height/2}},19:function(t){return{x:t.x+t.width,y:t.y+t.height/2}},20:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height/2}},21:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height-e.height/2}},22:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height-e.height/2}},23:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height-e.height/2}},24:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height-e.height/2}},25:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height-e.height/2}},26:function(t){return{x:t.x,y:t.y+t.height}},27:function(t){return{x:t.x+t.width/2,y:t.y+t.height}},28:function(t){return{x:t.x+t.width,y:t.y+t.height}},29:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height+e.height/2}},30:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height+e.height/2}},31:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height+e.height/2}},32:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height+e.height/2}},33:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height+e.height/2}},34:function(t,e){return{x:t.x,y:t.y-e.height/2}},35:function(t,e){return{x:t.x+t.width,y:t.y-e.height/2}},36:function(t,e){return{x:t.x,y:t.y+t.height+e.height/2}},37:function(t,e){return{x:t.x+t.width,y:t.y+t.height+e.height/2}},38:function(t,e){return{x:t.x+t.width/4,y:t.y-e.height/2}},39:function(t,e){return{x:t.x+3*t.width/4,y:t.y-e.height/2}},40:function(t){return{x:t.x+t.width/4,y:t.y}},41:function(t){return{x:t.x+3*t.width/4,y:t.y}},42:function(t,e){return{x:t.x+t.width/4,y:t.y+e.height/2}},43:function(t,e){return{x:t.x+3*t.width/4,y:t.y+e.height/2}},44:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height/2-e.height/2}},45:function(t){return{x:t.x+t.width/4,y:t.y+t.height/2}},46:function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y+t.height/2}},47:function(t,e){return{x:t.x+t.width/2+e.width/2,y:t.y+t.height/2}},48:function(t){return{x:t.x+3*t.width/4,y:t.y+t.height/2}},49:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height/2+e.height/2}},50:function(t,e){return{x:t.x+t.width/4,y:t.y+t.height-e.height/2}},51:function(t,e){return{x:t.x+3*t.width/4,y:t.y+t.height-e.height/2}},52:function(t){return{x:t.x+t.width/4,y:t.y+t.height}},53:function(t){return{x:t.x+3*t.width/4,y:t.y+t.height}},54:function(t,e){return{x:t.x+t.width/4,y:t.y+t.height+e.height/2}},55:function(t,e){return{x:t.x+3*t.width/4,y:t.y+t.height+e.height/2}}};return qi(t)?function(t,i,n){return e[t](i,n||Bi)}:void 0}();vn(g,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",
chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var gr=g.reverse,vr=g.transparent,_r=g.rectSelectBackground,pr=g.dash,br=g.titleBackground,mr=g.titleIconBackground,yr=g.headerBackground,wr=g.headerIconBackground,xr=g.headerSeparator,Cr=g.headerLine,Ir=g.contentIconBackground,Or=g.contentLine,Sr=g.widgetIconBorder,Tr=g.imageBackground,Vr=g.imageGradient,Dr=g.highlight,Er=g.label,kr=g.labelSelect;if(R&&!t.noAlert){var Pr=new Date,Mr=R.split("-"),Br=new Date(Pr.getFullYear(),Pr.getMonth(),Pr.getDate()),R=new Date(j(Mr[0],10),j(Mr[1],10)-1,j(Mr[2],10)),Lr=Br.getTime(),jr=R.getTime(),Rr="ht_try",zr=t.localStorage,Fr=t.alert;if(zr&&Fr)if(jr>Lr&&6048e5>jr-Lr){var Ar=(jr-Lr)/864e5;zr&&zr[Rr]!=Ar&&(zr[Rr]=Ar,Fr("HT for Web free trail license will expire in "+Ar+" days, please apply for a new license!"))}else Lr>=jr&&Fr("HT for Web free trail license expired!"),zr&&delete zr[Rr]}var Wr={ms_ac:function(t,e){for(var i=e.ms_ac,n=0;n<i.length;n++)Bn(t,i[n])},ms_listener:function(t){t.addListeners=function(){for(var t=this,e=0;e<oi.length;e++)t["handle_"+oi[e]]&&Pn(oi[e],t.getView(),t)},t.removeListeners=function(){for(var t=this,e=0;e<oi.length;e++)t["handle_"+oi[e]]&&Mn(oi[e],t.getView(),t)}},ms_fire:function(t){t.mp=function(t,e,i){this.addPropertyChangeListener(t,e,i)},t.ump=function(t,e){this.removePropertyChangeListener(t,e)},t.fp=function(t,e,i){return this.firePropertyChange(t,e,i)},t.addPropertyChangeListener=function(t,e,i){var n=this;n._62I||(n._62I=new Ws),n._62I.add(t,e,i)},t.removePropertyChangeListener=function(t,e){this._62I.remove(t,e)},t.firePropertyChange=function(t,e,i){if(e===i)return!1;var n=this,o={property:t,oldValue:e,newValue:i,data:n};return n._62I&&n._62I.fire(o),n.onPropertyChanged&&n.onPropertyChanged(o),!0}},ms_attr:function(t){t.a=function(t,e){var i=this;if(2===arguments.length)i.setAttr(t,e);else{if(!nn(t))return i.getAttr(t);for(var n in t)i.setAttr(n,t[n])}return i},t.getAttr=function(t){return this._attrObject?this._attrObject[t]:i},t.setAttr=function(t,e){var n=this;n._attrObject||(n._attrObject={});var o=n._attrObject[t];e===i?delete n._attrObject[t]:n._attrObject[t]=e,n.fp&&n.fp("a:"+t,o,e)&&n.onAttrChanged&&n.onAttrChanged(t,o,e)},t.getSerializableAttrs=function(){var t,e={};for(t in this._attrObject)e[t]=1;return e}},ms_bnb:function(t){t.getBodyColor=function(t){return t.s("body.color")},t.getBorderColor=function(t){return t.s("border.color")}},_51o:function(t){t.mi=function(t,e,i){this.addInteractorListener(t,e,i)},t.umi=function(t,e){this.removeInteractorListener(t,e)},t.fi=function(t){this.fireInteractorEvent(t)},t.addInteractorListener=function(t,e,i){var n=this;n._63I||(n._63I=new Ws),n._63I.add(t,e,i)},t.removeInteractorListener=function(t,e){this._63I.remove(t,e)},t.fireInteractorEvent=function(t){this._63I&&this._63I.fire(t)},t.setInteractors=function(t){var e=this,i=e._interactors;i&&i.each(function(t){t.tearDown()}),rn(t)&&(t=new Fs(t)),e._interactors=t,t&&t.each(function(t){t.setUp()}),e.fp("interactors",i,t),e.invalidateSelection()},t.getInteractors=function(){return this._interactors}},_49o:function(t){t._44O=c,t._45O=c,t.addTopPainter=function(t){var e=this;e._44O||(e._44O=new Fs),e._44O.contains(t)||(e._44O.add(t),e.redraw&&e.redraw())},t.removeTopPainter=function(t){var e=this;e._44O&&(e._44O.remove(t),e.redraw&&e.redraw())},t.addBottomPainter=function(t){var e=this;e._45O||(e._45O=new Fs),e._45O.contains(t)||(e._45O.add(t),e.redraw&&e.redraw())},t.removeBottomPainter=function(t){var e=this;e._45O&&(e._45O.remove(t),e.redraw&&e.redraw())},t._93db=function(t,e){var i=this;i._45O&&i._45O.each(function(n){n.draw?n.draw(t,e):n.call(i,t,e)})},t._92db=function(t,e){var i=this;i._44O&&i._44O.each(function(n){n.draw?n.draw(t,e):n.call(i,t,e)})}},ms_sm:function(t){t.sm=function(){return this.getSelectionModel()},t.setSelectableFunc=function(t){this.sm().setFilterFunc(t)},t.getSelectableFunc=function(){return this.sm().getFilterFunc()},t.getSelectionModel=function(){var t=this;return t._3o?t._3o:t.dm().sm()},t.isSelectionModelShared=function(){return!this._3o},t.setSelectionModelShared=function(t){var e=this,i=!e._3o,n=e._16o,o=e.dm();i!==t&&(e.invalidateSelection&&e.invalidateSelection(),t?(o.sm().ms(n,e),e._3o.ums(n,e),e._3o.dispose(),e._3o=c):(o.sm().ums(n,e),e._3o=new Ns(o),e._3o.ms(n,e)),e.onSelectionModelSharedChanged(),e.fp("selectionModelShared",i,t))},t.onSelectionModelSharedChanged=function(){var t=this;t.redraw(),t.invalidateSelection&&t.invalidateSelection()},t.removeSelection=function(){var t=this.dm(),e=t.getHistoryManager();e&&e.beginInteraction(),this.sm().toSelection().each(t.remove,t),e&&e.endInteraction()},t.selectAll=function(){var t=this;t.sm().ss(t.dm().toDatas(t.isVisible,t))},t.isSelected=function(t){return this.sm().co(t)},t.isSelectedById=function(t){var e=this.dm().getDataById(t);return!!e&&this.isSelected(e)},t.isSelectable=function(t){return this.sm().isSelectable(t)}},ms_tx:function(t){t._64I=0,t._65O=0,t.isScrollable=function(){return this.getWidth()<this._64I},t._40o=function(){return this.isScrollable()},t.getLogicalPoint=function(t){return qa(t,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},t.tx=function(t){return t===i?this.getTranslateX():void this.setTranslateX(t)},t.getTranslateX=function(){return this._65O},t.setTranslateX=function(t){var e=this,i=e.getWidth()-e._64I;i>t&&(t=i),t>0&&(t=0),t=p(t);var n=e._65O;e._65O=t,e.fp(Oe,n,t)}},ms_ty:function(t){t._23Q=0,t._66O=0,t._41o=function(){return this.getHeight()<this._23Q},t.getLogicalPoint=function(t){return qa(t,this._canvas||this._view,this.tx?this.tx():0,this.ty())},t.ty=function(t){return t===i?this.getTranslateY():void this.setTranslateY(t)},t.getTranslateY=function(){return this._66O},t.setTranslateY=function(t){var e=this,i=e.getHeight()-e._23Q;i>t&&(t=i),t>0&&(t=0),t=p(t);var n=e._66O;e._66O=t,e.fp(Se,n,t)}},ms_txy:function(t){t._65O=0,t._66O=0,t.tx=function(t){return t===i?this.getTranslateX():void this.setTranslateX(t)},t.ty=function(t){return t===i?this.getTranslateY():void this.setTranslateY(t)},t.onTranslateEnded=function(){},t.setTranslate=function(t,e,i){var n=this;if(i=gn(i)){n._65I&&n._65I.stop(!0);var o=n.tx(),r=n.ty();i.action=function(i){n.setTranslate(o+(t-o)*i,r+(e-r)*i)},i._37o=function(){delete n._66I,delete n._65I,n.onTranslateEnded()},n._66I=1,n._65I=Va(i)}else n.tx(t),n.ty(e)},t.getTranslateX=function(){return this._65O},t.setTranslateX=function(t){var e=this;t=e.adjustTranslateX(t);var i=e._65O;e._65O=t,e.fp(Oe,i,t)},t.getTranslateY=function(){return this._66O},t.setTranslateY=function(t){var e=this;t=e.adjustTranslateY(t);var i=e._66O;e._66O=t,e.fp(Se,i,t)},t.adjustTranslateX=function(t){return p(t)},t.adjustTranslateY=function(t){return p(t)},t.translate=function(t,e,i){this.setTranslate(this.tx()+t,this.ty()+e,i)},t.getLogicalPoint=function(t){var e=this;return qa(t,this._canvas||e._view,e.tx(),e.ty())}},ms_dm:function(t){t.dm=function(t){return t?void this.setDataModel(t):this.getDataModel()},t.getDataModel=function(){return this._dataModel}},ms_lp:function(t){t.lp=function(t){return this.getLogicalPoint(t)}},ms_v:function(e){e._disabled=!1,e.setDisabled=function(t,e){var i=this,n=i._disabled;n!==t&&(n&&(Ja(i._63O),delete i._63O),t&&(Un(i._view,i._63O=qn(e)),i.iv()),i._disabled=t,i.fp("disabled",n,t))},e.isDisabled=function(){return this._disabled},e.getView=function(){return this._view},e.addToDOM=function(){var e=this,i=e.getView(),n=i.style;l.body.appendChild(i),n.left="0",n.right="0",n.top="0",n.bottom="0",t.addEventListener("resize",function(){e.iv()},!1)},e.getWidth=function(){return this._view.clientWidth},e.getHeight=function(){return this._view.clientHeight},e.setWidth=function(t){var e=this;e._view.style.width=t+ut,e.iv(),e.fp&&e.fp(Ct,c,t)},e.setHeight=function(t){var e=this;e._view.style.height=t+ut,e.iv(),e.fp&&e.fp(It,c,t)},e.setFocus=function(t){var e=this,i=e._currentEditor;return!(t&&i&&(i.getView&&(i=i.getView()),i.contains(t.target)))&&(to(e._view),e.endEditing&&e.endEditing(),e._41O("focus"),!0)},e.iv=function(t){this.invalidate(t)},e.invalidate=function(t){var e=this;e._68I||(e._68I=1,Ca(e.validate,e,c,t),e.onInvalidated&&e.onInvalidated(),e._41O("invalidate"))},e.validate=function(){var t=this,e=t._view;if(t._68I&&(delete t._68I,e.parentNode))if(0===e.offsetWidth&&0===e.offsetHeight&&t._67I!==c)t._67I===i&&(t._67I=d.reinvalidateCount),t._67I>0?t._67I--:t._67I=c,t.iv();else{t._41O("beginValidate"),t.validateImpl(),t.onValidated&&t.onValidated(),t._41O("validate");var n=t._63O;n&&(e.lastChild!==n&&(Ja(n),Un(e,n)),io(n,0,0,t.getWidth(),t.getHeight())),zi(t)}},e.layout=function(t,e,i,n){1===arguments.length?io(this,t):io(this,t,e,i,n)},e.addViewListener=function(t,e,i){var n=this;n._67O||(n._67O=new Ws),n._67O.add(t,e,i)},e.removeViewListener=function(t,e){this._67O.remove(t,e)},e._41O=function(t){var e=this;e._67O&&(Ki(t)&&(t={kind:t}),e._67O.fire(t)),d.viewListener&&d.viewListener(e,t)}},ms_tip:function(t){t.enableToolTip=function(){var t=this;q||t._13o||(t._13o=function(e){var i=t.getToolTip(e);i!=c?d.toolTipContinual&&d.isToolTipShowing()?Yr(e,i):(qr(),si={timeout:A(hi,Ur),e:e,info:i}):qr()},t.getView().addEventListener(Ze,t._13o,!1))},t.disableToolTip=function(){var t=this;t._13o&&(t.getView().removeEventListener(Ze,t._13o,!1),delete t._13o)},t.getToolTip=function(t){var e=this;if(e.getDataAt){var i=e.getDataAt(t);return i?i.getToolTip():c}return e.getValue?dn(e.getValue()):void 0}},_52o:function(t){t._zoom=1,t._29I=Bi,t.zoomIn=function(t,e){this.setZoom(this._zoom*ua,t,e)},t.zoomOut=function(t,e){this.setZoom(this._zoom/ua,t,e)},t.zoomReset=function(t,e){this.setZoom(1,t,e)},t.scrollZoomIn=function(t){this.setZoom(this._zoom*da,c,t)},t.scrollZoomOut=function(t){this.setZoom(this._zoom/da,c,t)},t.pinchZoomIn=function(t){this.setZoom(this._zoom*fa,c,t)},t.pinchZoomOut=function(t){this.setZoom(this._zoom/fa,c,t)},t.adjustZoom=function(t){return va>t?va:t>ga?ga:t},t.getZoom=function(){return this._zoom},t.setZoom=function(t,e,i){var n=this;if(e=gn(e)){n._14o&&n._14o.stop(!0);var o=n._zoom;e.action=function(e){n._96O(o+(t-o)*e,i)},e._37o=function(){delete n._zooming,delete n._14o,n.onZoomEnded()},n._zooming=1,n._14o=Va(e)}else n._96O(t,i)},t._96O=function(t,e){var i=this;if((t=i.adjustZoom(t))!==i._zoom){i.validate();var n=i._29I,o=i._zoom;0!==n.width&&0!==n.height&&(e=e||{x:n.x+n.width/2,y:n.y+n.height/2},i.tx((e.x-n.x)*o-e.x*t),i.ty((e.y-n.y)*o-e.y*t)),i._zoom=t,i.fp("zoom",o,t)}}}};vn(d,{baseZIndex:i,isTouchable:q,devicePixelRatio:t.devicePixelRatio?t.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:g.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(t){return t*t},labelColor:Er,labelSelectColor:kr,labelFont:(q?"15":"12")+"px arial, sans-serif",widgetIndent:q?30:20,widgetRowHeight:q?30:20,widgetHeaderHeight:q?32:22,widgetTitleHeight:q?34:24,scrollBarColor:vr,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:q?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:In,intersectionLineLine:On,getVersion:function(){return"5.2"},setCompType:function(t,e){Ci[t]=e},getCompType:function(t){return Ci[t]},numberListener:function(){var t={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(e){var i=e.keyCode;t[i]||65===i&&d.isCtrlDown(e)||i>=35&&39>=i||(e.shiftKey||48>i||i>57)&&(96>i||i>105)&&e.preventDefault()}}(),preventDefault:function(t){var e=t.target.tagName;("DIV"===e||"CANVAS"===e)&&(t.preventDefault(),t.preventManipulation&&t.preventManipulation())},getWindowInfo:function(){var e=l.documentElement,i=e&&(e.scrollLeft||e.scrollTop)?e:l.body;return{target:i,left:i.scrollLeft,top:i.scrollTop,width:t.innerWidth||i.clientWidth,height:t.innerHeight||i.clientHeight}},isDragging:function(){return!!ro},isLeftButton:function(t){return!!q||0===t.button},getTouchCount:function(t){return q?t.touches.length:1},isDoubleClick:function(){var t=new Date,e=c,n=new Date,o=c;return function(r){if(vi=new Date,_i=vi.getTime(),q){var a=r.type,s=a+"_isDoubleClick";if(r[s]===i){var l=za(r);"touchstart"===a?(r[s]=e&&Aa(e,l)<20&&_i-t.getTime()<500,t=vi,e=l):(r[s]=o&&Aa(o,l)<20&&_i-n.getTime()<500,n=vi,o=l)}return r[s]}return 2===r.detail}}(),isShiftDown:function(t){return t?t.shiftKey:xi[16]},isCtrlDown:function(t){return t?Y?t.metaKey:t.ctrlKey:Y?xi[91]:xi[17]},getClientPoint:function(t){return q&&(t=no(t)),{x:t.clientX,y:t.clientY}},getPagePoint:function(t){return q&&(t=no(t)),{x:t.pageX,y:t.pageY}},createObject:function(t,e){var i=new t;for(var n in e){var o=$i(n),r=e[n];i[o]?(i[o](r),"setToolTip"===o&&i.enableToolTip&&i.enableToolTip()):i[n]=r}return i},setImage:function(t,e,i,n){var o=arguments.length;4===o?Fi(t,n,e,i):2===o?Ki(e)?Fi(t,e):bi[t]=e:1===o&&Fi(t,t)},getImage:function(t,e){var n;if(t==c)return c;if(nn(t)?n=t:(n=bi[t],t&&n===i&&(ji&&ji[t]||Fi(t,t))),e&&n&&n.tagName){n.colors||(n.colors={});var o=n.colors[e];return o||(o=jo(n,Lo(e),n.width,n.height),n.colors[e]=o),o}return n},getId:function(){var t=1;return function(){return++t}}(),callLater:function(e,i,n,o){var r=function(){e.apply(i,n)};return o?A(r,o):t.requestAnimationFrame(r)},asyncEach:function(t,e,i){"function"!=typeof i&&(i=Function.prototype);var n=new Array(t.length),o=0,r=!1;t.forEach(function(a,s){e(a,function(e,a){return r?void 0:e?(r=!0,i(null)):(n[s]=a,o++,o===t.length?i(n):void 0)})})},xhrLoad:function(t,e,i){rn(t)||(t=[t]),t.length;var n=i&&i.sync;Ia(t,function(t,e){var i=new XMLHttpRequest;i.overrideMimeType("text/plain"),i.open("GET",t,!n),i.onload=function(t){200===this.status||0===this.status?e(null,t.target.response):e(!0)},i.onerror=function(){e(!0)},i.send(null)},function(t){"function"==typeof e&&e(t)})},clone:function(t){if(!t)return c;if(rn(t))return t.slice(0);if(nn(t)){var e,i={};for(e in t)i[e]=t[e];return i}return t},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(t,e){if(t===e)return 0;if(t==c&&e!=c)return 1;if(t!=c&&e==c)return-1;if(t==c&&e==c)return 0;var n,o=typeof t,r=typeof e;return o===Ae&&r===Ae?n=t.localeCompare(e):o===Ne&&r===Ne&&(n=t-e),n===i&&(n=(""+t).localeCompare(""+e)),n>0?1:0>n?-1:0},getClassMap:function(){return pi},getClass:function(e){if(Ki(e)){var i,n=pi[e];if(!n){i=e.split("."),n=t;for(var o=0;o<i.length;o++)n=n[i[o]];pi[e]=n}return n}return e},def:function(t,e,i){var n,o,r,a=function(){};if(a.prototype=e.prototype,n=new a,Ki(t)){if(pi[t])throw"'"+t+"' alreay defined";r=Ta(t),n.getClassName=function(){return t}}else r=t;if(n.constructor=r,n.getClass=function(){return r},n.getSuperClass=function(){return e},i)for(o in i)Wr[o]&&Wr.hasOwnProperty(o)?Wr[o](n,i):n[o]=i[o];r.prototype=n,r.superClass=e.prototype},startAnim:function(){var t=function(t){t.duration&&(t.startTime=Wi()),t.timeId=Ca(t.tick,c,c,t.interval)};return function(e){return e=Sa(e),e.easing=e.easing||d.animEasing,e.duration||e.frames||(e.duration=d.animDuration),e.t=0,e.duration?e.interval=0:(e.frame=0,e.interval=e.interval||10),e.tick=function(){if(e.duration){var t=(Wi()-e.startTime)/e.duration;t>1&&(t=1),e.t=t,e.action(e.easing(t),t),1===t?e.stop():e._isPaused||(e.timeId=Ca(e.tick))}else e.frame++,t=e.t=e.frame/e.frames,e.action(e.easing(t),t),e.frame<e.frames?e._isPaused||(e.timeId=Ca(e.tick,c,c,e.interval)):e.stop()},e.resume=function(){e._isPaused&&(delete e._isPaused,e.duration?e.t<1&&(e.startTime=Wi()-e.duration*e.t,e.timeId=Ca(e.tick)):e.frame<e.frames&&(e.timeId=Ca(e.tick,c,c,e.interval)))},e.pause=function(){e._isPaused=!0},e.stop=function(t){e.isRunning()&&(e.duration?e.t<1&&t&&(e.t=1,e.action(e.easing(1))):e.frame<e.frames&&t&&(e.frame=e.frames,e.action(e.easing(1))),e._37o&&e._37o(),e.finishFunc&&e.finishFunc(),Hi(e.timeId,!e.duration),delete e.timeId)},e.isRunning=function(){return e.timeId!=c},e.delay?Ca(t,c,[e],e.delay):t(e),e}}(),getTextSize:function(){var t={},e=l?Fn().getContext("2d"):c;return function(i,n){e.font=i||ea;var o=t[e.font];return o||(o=2*e.measureText("e").width+4,t[e.font]=o),{width:e.measureText(n).width+4,height:o}}}(),drawText:function(t,e,i,n,o,r,a,s,l,h){if(e!=c){var u=Pa(i,e),d={};d.y=h&&"middle"!==h?h===nt?r+u.height/2:r+s-u.height/2:r+s/2,d.x=l&&l!==et?l===it?o+a-u.width/2:o+a/2:o+u.width/2,Gn(t,e,d,i,n)}},getDistance:function(t,e){var n=t.length;return e?y(3===n?F(t[0]-e[0])+F(t[1]-e[1])+F(t[2]-e[2]):2===n?F(t[0]-e[0])+F(t[1]-e[1]):t.z===i?F(e.x-t.x)+F(e.y-t.y):F(e.x-t.x)+F(e.y-t.y)+F(e.z-t.z)):3===n?y(F(t[0])+F(t[1])+F(t[2])):2===n?y(F(t[0])+F(t[1])):void 0},brighter:function(t,e){return No(t,e||40)},darker:function(t,e){return No(t,e||-40)},unionPoint:function(t,e){if(!t)return c;if(2===arguments.length)return t&&e?{x:x(t.x,e.x),y:x(t.y,e.y),width:C(t.x-e.x),height:C(t.y-e.y)}:c;var n=t;if(n._as&&(n=n._as),n.length===i)return c;var o=n.length;if(0>=o)return c;for(var r=1,a=n[0],s={x:a.x,y:a.y,width:0,height:0};o>r;r++){a=n[r];var l=x(s.x,a.x),h=w(s.x+s.width,a.x),u=x(s.y,a.y),d=w(s.y+s.height,a.y);s.x=l,s.y=u,s.width=h-l,s.height=d-u}return s},unionRect:function(t,e){if(t&&!e)return Sa(t);if(!t&&e)return Sa(e);if(t&&e){var i={x:x(t.x,e.x),y:x(t.y,e.y)};return i.width=w(t.x+t.width,e.x+e.width)-i.x,i.height=w(t.y+t.height,e.y+e.height)-i.y,i}return c},containsPoint:function(t,e){return!(!t||e.x<t.x||e.y<t.y||e.x>t.x+t.width||e.y>t.y+t.height)},containsRect:function(t,e){if(!t||!e)return!1;var i=e.x,n=e.y,o=e.width,r=e.height,a=t.width,s=t.height;if(0>(a|s|o|r))return!1;var l=t.x,c=t.y;if(l>i||c>n)return!1;if(a+=l,o+=i,i>=o){if(a>=l||o>a)return!1}else if(a>=l&&o>a)return!1;if(s+=c,r+=n,n>=r){if(s>=c||r>s)return!1}else if(s>=c&&r>s)return!1;return!0},intersectsRect:function(t,e){if(!t||!e)return!1;var i=e.width,n=e.height,o=t.width,r=t.height;if(0>=o||0>=r||0>=i||0>=n)return!1;var a=e.x,s=e.y,l=t.x,c=t.y;return o+=l,r+=c,i+=a,n+=s,o>a&&r>s&&i>l&&n>c},intersection:function(t,e){if(!t||!e)return c;var i=e.x,n=e.y,o=t.x,r=t.y,a=i,s=n,l=o,h=r;return a+=e.width,s+=e.height,l+=t.width,h+=t.height,o>i&&(i=o),r>n&&(n=r),a>l&&(a=l),s>h&&(s=h),a-=i,s-=n,0>=a||0>=s?c:{x:i,y:n,width:a,height:s}},grow:function(t,e){t.x-=e,t.y-=e,t.width=t.width+2*e,t.height=t.height+2*e},getLogicalPoint:function(t,e,i,n,o,r){var a=e.getBoundingClientRect();return t=q?no(t):t,{x:(t.clientX-a.left+e.scrollLeft-(i||0))/(o||1),y:(t.clientY-a.top+e.scrollTop-(n||0))/(r||1)}},removeHTML:function(){var t;return function(e){return!(!e||!e.parentNode)&&(t===e||(t=e,e.parentNode.removeChild(e),t=c,!0))}}(),getToolTipDiv:function(){if(!ri){ri=zn(),ai=zn();var t=ri.style;d.baseZIndex!=c&&(t.zIndex=j(d.baseZIndex)+3+""),t.whiteSpace="nowrap",t.color=d.toolTipLabelColor,t.background=d.toolTipBackground,t.font=d.toolTipLabelFont,t.padding="5px",t.boxShadow="0px 0px 3px "+d.toolTipShadowColor}return ri},isToolTipShowing:function(){return!(!ri||!ri.parentNode)||!(!ai||!ai.parentNode)},hideToolTip:function(){Ja(ri),Ja(ai),ci()},showToolTip:function(t,e){if(!t||e==c)return void qr();d.getToolTipDiv();var i,n;if(e.html?(e=e.html,i=ai,Ja(ri)):(i=ri,Ja(ai)),n=i.style,i.innerHTML=e,i.parentNode||Un(l.body,i),t.target){t=Fa(t);var o=Xa(),r=t.x,a=t.y,s=q?60:12;if(q){var h=i.getBoundingClientRect();n.left=r-h.width/2+ut,n.top=a-h.height-s<o.top?a+s+ut:a-h.height-s+ut}else{n.left=r+s+ut,n.top=a+s+ut;var h=i.getBoundingClientRect();h.left+h.width>o.width&&(n.left=r-s-h.width+ut),h.top+h.height>o.height&&(n.top=a-s-h.height+ut),h.left<0&&(n.left=r+s+ut),h.top<0&&(n.top=a+s+ut)}}else n.left=t.x+ut,n.top=t.y+ut;ci()},startDragging:function(e,i){e!==ro&&(ro?q?ro.handleWindowTouchEnd(i):ro.handleWindowMouseUp(i):q?(t.addEventListener(ti,ao,!1),t.addEventListener(ei,so,!1)):(t.addEventListener(Ze,lo,!1),t.addEventListener(Je,co,!1)),ro=e)},getImageMap:function(){return bi},toBoundaries:function(t,e,i,n){var o=[];return Ho(t,e,i,n).forEach(function(t){var e=[];t.forEach(function(t){e.push(t.x,t.y)}),o.push(e)}),o},getCurrentKeyCodeMap:function(){return xi},drawCenterImage:function(t,e,i,n,o,r,a){var s=Ls(e,o),l=js(e,o);zs(t,e,p(i-s/2),p(n-l/2),s,l,o,r,a)},drawStretchImage:function(t,e,i,n,o,r,a,s,l,c){var h,u=Ls(e,s),d=js(e,s);"uniform"===i?(h=x(r/u,a/d),u*=h,d*=h,n+=p((r-u)/2),o+=p((a-d)/2),r=u,a=d):i===ze&&((u>r||d>a)&&(h=x(r/u,a/d),u*=h,d*=h),n+=p((r-u)/2),o+=p((a-d)/2),r=u,a=d),zs(t,e,n,o,r,a,s,l,c)},toCanvas:function(t,e,i,n,o,r,a){t=ma(t,a),e=e||Ls(t,o),i=i||js(t,o);var s=Fn();Hn(s,e,i,1);var l=Zn(s);return wa(l,t,n,0,0,e,i,o,r,a),l.restore(),s},createElement:function(t,e,i,n){var o=l.createElement(t);return An(o,e||g.widgetBorder,2),o.style.font=i||ea,n!=c&&(o.value=n),o},containedInView:function(t,e){var i=eo(e).getBoundingClientRect();return Ua({x:i.left,y:i.top,width:i.width,height:i.height},za(t))},isIsolating:function(){return gi},setIsolating:function(t){gi=t},toColorData:Bo},!0),vn(v,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var Hr=d.disabledOpacity,Ur=d.toolTipDelay,Nr=d.devicePixelRatio,Qr=d.autoMakeVisible,Gr=d.autoHideScrollBar,Xr=d.imageGradient,Yr=d.showToolTip,qr=d.hideToolTip,Zr=d.dashPattern,Jr=d.lineCap,$r=d.lineJoin,Kr=d.labelColor,ta=d.labelSelectColor,ea=d.labelFont,ia=d.widgetIndent,na=d.widgetRowHeight,oa=d.widgetHeaderHeight,ra=d.widgetTitleHeight,aa=d.scrollBarColor,sa=d.scrollBarSize,la=d.scrollBarTimeout,ca=d.scrollBarMinLength,ha=d.scrollBarInteractiveSize,ua=d.zoomIncrement,da=d.scrollZoomIncrement,fa=d.pinchZoomIncrement,ga=d.zoomMax,va=d.zoomMin,_a=d.createObject,pa=d.preventDefault,ba=d.setImage,ma=d.getImage,ya=d.drawCenterImage,wa=d.drawStretchImage,xa=d.getId,Ca=d.callLater,Ia=d.asyncEach,Oa=(d.xhrLoad,d.sortFunc),Sa=d.clone,Ta=d.getClass,Va=d.startAnim,Da=d.brighter,Ea=d.darker,ka=d.drawText,Pa=d.getTextSize,Ma=d.isLeftButton,Ba=d.getTouchCount,La=d.isDoubleClick,ja=d.isShiftDown,Ra=d.isCtrlDown,za=d.getClientPoint,Fa=d.getPagePoint,Aa=d.getDistance,Wa=d.unionPoint,Ha=d.unionRect,Ua=d.containsPoint,Na=d.containsRect,Qa=d.intersectsRect,Ga=d.intersection,Xa=d.getWindowInfo,Ya=d.grow,qa=d.getLogicalPoint,Za=d.startDragging,Ja=d.removeHTML,$a=d.createElement,Ka=d.segmentResolution,ts=d.shapeResolution,es=d.shapeSide,is=d.def,ns=function(t,e,i){is("ht."+t,e,i)},os=function(t,e){t.childNodes.forEach(function(t){e(t),os(t,e)})};vn(d,{toolTipLabelColor:Kr,toolTipLabelFont:ea,toolTipBackground:g.toolTipBackground,toolTipShadowColor:vr,setDevicePixelRatio:function(e){Nr=d.devicePixelRatio="number"==typeof e?e:t.devicePixelRatio,os(l.body,function(t){var e=t._ht;e&&e._canvas&&(Hn(e._canvas,e.getWidth(),e.getHeight()),e.redraw?e.redraw():e.iv())})}},!0);var rs=1e-6,as="undefined"!=typeof Uint16Array?Uint16Array:Array,ss="undefined"!=typeof Float32Array?Float32Array:Array,ls=function(t,e,i){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]];if(i){var o=Aa(n);o>0&&(n[0]/=o,n[1]/=o,n[2]/=o)}return n},cs=function(t){return[-t[0],-t[1],-t[2]]},hs=function(t,e){return 3===t.length?t[0]*e[0]+t[1]*e[1]+t[2]*e[2]:t[0]*e[0]+t[1]*e[1]},us=function(){var t=new ss(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ds=us(),fs=function(t){var e=new ss(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},gs=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},vs=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},_s=function(t,e){var i=t[0],n=t[1],o=t[2];return t[0]=e[0]*i+e[4]*n+e[8]*o+e[12],t[1]=e[1]*i+e[5]*n+e[9]*o+e[13],t[2]=e[2]*i+e[6]*n+e[10]*o+e[14],t},ps=function(t,e){var i=t[0],n=t[1],o=t[2],r=t[3];return t[0]=e[0]*i+e[4]*n+e[8]*o+e[12]*r,t[1]=e[1]*i+e[5]*n+e[9]*o+e[13]*r,t[2]=e[2]*i+e[6]*n+e[10]*o+e[14]*r,t[3]=e[3]*i+e[7]*n+e[11]*o+e[15]*r,t},bs=function(){var t,e,i,n,o=_n(po[1]+po[7]),r=_n(po[0]+po[3]-po[10]),a=_n(po[8]+2),l=function(){return e=i.charAt(t),t+=1,e},c=function(){var t="";if(e===a)for(;l();){if(e===a)return l(),t;t+=e}else l()},h=function(){for(;e&&" ">=e;)l()},u=function(){var t,i={};if(e===o){if(l(),h(),e===r)return l(),i;for(;e;){if(t=c(),h(),l(),i[t]=n(),h(),e===r)return l(),i;l(),h()}}};return n=function(){switch(h(),e){case o:return u();default:return c()}},function(o){if(s={},o){var r;if(i=o,t=0,e=" ",r=n(),h(),!e)return r}}}(),ms=function(t,e){if(e){var i=S(e),n=I(e),o=t[4],r=t[5],a=t[6],s=t[7],l=t[8],c=t[9],h=t[10],u=t[11];t[4]=o*n+l*i,t[5]=r*n+c*i,t[6]=a*n+h*i,t[7]=s*n+u*i,t[8]=l*n-o*i,t[9]=c*n-r*i,t[10]=h*n-a*i,t[11]=u*n-s*i}},ys=function(t,e){if(e){var i=S(e),n=I(e),o=t[0],r=t[1],a=t[2],s=t[3],l=t[8],c=t[9],h=t[10],u=t[11];t[0]=o*n-l*i,t[1]=r*n-c*i,t[2]=a*n-h*i,t[3]=s*n-u*i,t[8]=o*i+l*n,t[9]=r*i+c*n,t[10]=a*i+h*n,t[11]=s*i+u*n}},ws=function(t,e){if(e){var i=S(e),n=I(e),o=t[0],r=t[1],a=t[2],s=t[3],l=t[4],c=t[5],h=t[6],u=t[7];t[0]=o*n+l*i,t[1]=r*n+c*i,t[2]=a*n+h*i,t[3]=s*n+u*i,t[4]=l*n-o*i,t[5]=c*n-r*i,t[6]=h*n-a*i,t[7]=u*n-s*i}},xs=function(t,e,i){return Cs(c,!1===i?c:t.s3(),t.r3(),t.getRotationMode(),t.p3(),c,e)},Cs=function(t,e,i,n,o,r,a){return r||(r=us()),o&&ih(r,o),dc(r,i,n),a&&oh(r,r,a),e&&nh(r,e),t&&oh(r,r,t),r},Is=function(t,e,i){e=j(e),i=j(i);var n=this;n.g=t,n._84O=e,n._85O=i,n._70I=!0,n.F=0,n._83O=e+i,n.pen={x:0,y:0}},Os="lineDashOffset",Ss="setLineDash",Ts=function(t){for(var e in t)1===e.length&&(Os=t[e]);return e?1:0},Vs=function(t,e,i){return yn(e)?t:t[Ss]?(t[Ss](e),i&&(t.lineDashOffset=i),t):new Is(t,e[0],e.length>1?e[1]:e[0])},Ds=function(t,e){!yn(e)&&t[Ss]&&(t[Ss](Si),t.lineDashOffset=0)};is(Is,e,{_69I:6,moveTo:function(t,e){var i=this,n=i.pen;n.x=t,n.y=e,i.g.moveTo(t,e),i.start||(i.start={x:t,y:e})},lineTo:function(t,e){var i=this,n=i.pen,o=t-n.x,r=e-n.y,a=M(r,o),s=I(a),l=S(a),c=i._23O(n.x,n.y,t,e),h=i._85O,u=i._84O,d=i._83O;if(i.F){if(i.F>c)return i._70I?i._72I(t,e):i.moveTo(t,e),void(i.F-=c);if(i._70I?i._72I(n.x+s*i.F,n.y+l*i.F):i.moveTo(n.x+s*i.F,n.y+l*i.F),c-=i.F,i.F=0,i._70I=!i._70I,!c)return}var f=b(c/d);if(f){for(var g=s*u,v=l*u,_=s*h,p=l*h,m=0;f>m;m++)i._70I?(i._72I(n.x+g,n.y+v),i.moveTo(n.x+_,n.y+p)):(i.moveTo(n.x+_,n.y+p),i._72I(n.x+g,n.y+v));c-=d*f}i._70I?c>u?(i._72I(n.x+s*u,n.y+l*u),i.moveTo(t,e),i.F=h-(c-u),i._70I=!1):(i._72I(t,e),c===u?(i.F=0,i._70I=!i._70I):(i.F=u-c,i.moveTo(t,e))):c>h?(i.moveTo(n.x+s*h,n.y+l*h),i._72I(t,e),i.F=u-(c-h),i._70I=!0):(i.moveTo(t,e),c===h?(i.F=0,i._70I=!i._70I):i.F=h-c)},quadraticCurveTo:function(t,e,i,n){var o,r=this,a=r.pen,s=a.x,l=a.y,c=r._22O(s,l,t,e,i,n),h=0,u=0,d=r._85O,f=r._84O;if(r.F){if(r.F>c)return r._70I?r._71I(t,e,i,n):r.moveTo(i,n),void(r.F-=c);if(h=r.F/c,o=r._20O(s,l,t,e,i,n,h),r._70I?r._71I(o[2],o[3],o[4],o[5]):r.moveTo(o[4],o[5]),r.F=0,r._70I=!r._70I,!c)return}var g=c-c*h,v=b(g/r._83O),_=f/c,p=d/c;if(v)for(var m=0;v>m;m++)r._70I?(u=h+_,o=r._21O(s,l,t,e,i,n,h,u),r._71I(o[2],o[3],o[4],o[5]),h=u,u=h+p,o=r._21O(s,l,t,e,i,n,h,u),r.moveTo(o[4],o[5])):(u=h+p,o=r._21O(s,l,t,e,i,n,h,u),r.moveTo(o[4],o[5]),h=u,u=h+_,o=r._21O(s,l,t,e,i,n,h,u),r._71I(o[2],o[3],o[4],o[5])),h=u;g=c-c*h,r._70I?g>f?(u=h+_,o=r._21O(s,l,t,e,i,n,h,u),r._71I(o[2],o[3],o[4],o[5]),r.moveTo(i,n),r.F=d-(g-f),r._70I=!1):(o=r._19O(s,l,t,e,i,n,h),r._71I(o[2],o[3],o[4],o[5]),c===f?(r.F=0,r._70I=!r._70I):(r.F=f-g,r.moveTo(i,n))):g>d?(u=h+p,o=r._21O(s,l,t,e,i,n,h,u),r.moveTo(o[4],o[5]),o=r._19O(s,l,t,e,i,n,u),r._71I(o[2],o[3],o[4],o[5]),r.F=f-(g-d),r._70I=!0):(r.moveTo(i,n),g===d?(r.F=0,r._70I=!r._70I):r.F=d-g)},bezierCurveTo:function(){var t=arguments;this.pen={x:t[4],y:t[5]},this.g.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},arc:function(t,e,i,n,o,r){r||(n=-n,o=-o),qo(this,t,e,n,o-n,i,i,!1)},rect:function(t,e,i,n){var o=this;o.pen={x:t,y:e},o.moveTo(t,e),o.lineTo(t,e+n),o.lineTo(t+i,e+n),o.lineTo(t+i,e),o.lineTo(t,e)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(t,e,i,n){var o=i-t,r=n-e;return y(o*o+r*r)},_22O:function(t,e,i,n,o,r,a){for(var s,l,c,h,u,d,f,g=0,v=t,_=e,p=a>0?a:this._69I,b=1;p>=b;b++)c=b/p,h=1-c,u=h*h,d=2*c*h,f=c*c,s=u*t+d*i+f*o,l=u*e+d*n+f*r,g+=this._23O(v,_,s,l),v=s,_=l;return g},_21O:function(t,e,i,n,o,r,a,s){var l=this;if(0===a)return l._20O(t,e,i,n,o,r,s);if(1===s)return l._19O(t,e,i,n,o,r,a);var c=l._20O(t,e,i,n,o,r,s);return c.push(a/s),l._19O.apply(l,c)},_20O:function(t,e,i,n,o,r,a){if(1!==a){var s=i+(o-i)*a,l=n+(r-n)*a;i=t+(i-t)*a,n=e+(n-e)*a,o=i+(s-i)*a,r=n+(l-n)*a}return[t,e,i,n,o,r]},_19O:function(t,e,i,n,o,r,a){if(1!==a){var s=t+(i-t)*a,l=e+(n-e)*a;i+=(o-i)*a,n+=(r-n)*a,t=s+(i-s)*a,e=l+(n-l)*a}return[t,e,i,n,o,r]},_72I:function(t,e){var i=this.pen;(t!==i.x||e!==i.y)&&(i.x=t,i.y=e,this.g.lineTo(t,e))},_71I:function(t,e,i,n){var o=this.pen;(t!==i||e!==n||i!==o.x||n!==o.y)&&(o.x=i,o.y=n,this.g.quadraticCurveTo(t,e,i,n))}}),H&&(L=!0);var Es=g.chart,ks=d.compStack=[],Ps=/^style@/,Ms=/^attr@/,Bs=/^field@/,Ls=function(t,e){return t?Rs(t.width,e):0},js=function(t,e){return t?Rs(t.height,e):0},Rs=function(t,e,n){if(!t||!t.func)return t;var o,r=t.func,a=t.value;return o=on(r)?r(e,n):e?Ps.test(r)?e.s(r.slice(6)):Ms.test(r)?e.a(r.slice(5)):Bs.test(r)?e[r.slice(6)]:e[r]?e[r](n):a:a,a!==i&&o==c?a:o},zs=d.drawImage=function(){var t,e,i,n,o,r=function(t,n,o){var r=t[n];return r&&r.func?(r=Rs(r,e,i),o&&(r=o(r))):o&&(r=t[n]=o(r)),r},a=function(t,e){var i=r(t,e);if(o&&i){var n=Lo(o);return i=Bo(i),"rgba("+b(i[0]*n[0])+","+b(i[1]*n[1])+","+b(i[2]*n[2])+","+i[3]+")"}return i},s=function(t){if(rn(t)){for(var e=new Fs,i=t.length,n=0;i>n;n+=2)e.add({x:t[n],y:t[n+1]});t=e}return t},l=function(t,e){var i=r(t,vt);if(rn(i)){var n=i.length,o=r(t,"relative"),a=e.width,s=e.height;if(4===n)i={x:i[0],y:i[1],width:i[2],height:i[3]},o&&(i.x*=a,i.y*=s,i.width*=a,i.height*=s);else if(3===n){var l=i[0];i={width:i[1],height:i[2]},o&&(i.width*=a,i.height*=s),l=fr(l,e,i),i.x=l.x-i.width/2,i.y=l.y-i.height/2}var c=r(t,"offsetX");c&&(i.x+=c),(c=r(t,"offsetY"))&&(i.y+=c)}return i},h=function(t){return rn(t)?new Fs(t):t},u=function(e,i){if(e){var n=i.x+i.width/2,o=i.y+i.height/2;t.save(),$n(t,n,o),Kn(t,e),$n(t,-n,-o)}},f=function(e){e&&t.restore()},g=function(e,i,o){var s=r(e,"path"),l=r(e,Gt),h=c,d=Ao(null,s);if(o||(o=e.unionRect,o||(o=Wa(d),e.path.func||(e.unionRect=o)),h=o),o){h||(h=e.unionRect)||(h=Wa(d),e.path.func||(e.unionRect=h));var g=wn(h,o);if(g)u(l,h);else{var v=h.width,_=h.height,p=o.width,b=o.height,m=p/v,y=b/_;t.save(),$n(t,o.x+p/2,o.y+b/2),t.scale(m,y),l&&Kn(t,l),$n(t,-h.x-v/2,-h.y-_/2)}var w=r(e,"borderPattern"),x=Vs(t,w),C=a(e,"background"),I=a(e,"borderColor"),O=r(e,"borderWidth"),S=r(e,"gradient"),T=a(e,"gradientColor"),V=r(e,"border3d"),D=r(e,"border3dColor"),E=r(e,"border3dAccuracy"),k=t.lineJoin,P=t.lineCap;if(t.lineJoin=r(e,"borderJoin")||$r,t.lineCap=r(e,"borderCap")||Jr,C?(Xo(t,C,S,T,h),Ao(t,s),t.fill(),x!==t&&Ao(t,s)):Ao(t,s),O&&I&&(t.lineWidth=O,t.strokeStyle=I,t.stroke(),V&&Uo(t,I,D,O,n,E)),Ds(t,w),r(e,"dash")){var M=r(e,"dashWidth")||O;if(M>0){w=r(e,"dashPattern")||Zr;var x=Vs(t,w,r(e,"dashOffset")),B=r(e,"dashColor")||pr;x!==t&&Ao(t,s),t.strokeStyle=B,t.lineWidth=M,t.stroke(),r(e,"dash3d")&&Uo(t,B,r(e,"dash3dColor"),M,n,r(e,"dash3dAccuracy")),Ds(t,w)}}i===vt&&$o(t,C,r(e,"depth"),h),t.lineJoin=k,t.lineCap=P,g?f(l):t.restore()}},v=function(e,i,l){var d=r(e,Et,s),g=r(e,Gt),v=i===bt,_=c;if(!l&&v&&(l=e.unionRect,l||(l=Wa(d),e.points.func||(e.unionRect=l)),_=l),l){v?_||(_=e.unionRect)||(_=Wa(d),e.points.func||(e.unionRect=_)):_=l;var p=wn(_,l);if(p)u(g,_);else{var b=_.width,m=_.height,y=l.width,w=l.height,x=y/b,C=w/m
;t.save(),$n(t,l.x+y/2,l.y+w/2),t.scale(x,C),g&&Kn(t,g),$n(t,-_.x-b/2,-_.y-m/2)}var I,O,S,T,V=r(e,"borderPattern"),D=Vs(t,V),E=a(e,"background"),k=ma(r(e,"repeatImage"),o),P=a(e,"borderColor"),M=r(e,"borderWidth"),B=r(e,"segments",h),L=r(e,"gradient"),j=a(e,"gradientColor"),R=r(e,"border3d"),z=r(e,"border3dColor"),F=r(e,"border3dAccuracy"),A=r(e,"closePath"),W=t.lineJoin,H=t.lineCap;if(t.lineJoin=r(e,"borderJoin")||$r,t.lineCap=r(e,"borderCap")||Jr,v?E||k?(k?Yo(t,k):Xo(t,E,L,j,_),Wo(t,d,B,A),t.fill(),D!==t&&Wo(D,d,B,A)):Wo(D,d,B,A):("roundRect"===i?I=r(e,"cornerRadius"):"polygon"===i?I=r(e,"polygonSide"):"arc"===i&&(I=r(e,"arcFrom"),O=r(e,"arcTo"),S=r(e,"arcClose"),T=r(e,"arcOval")),E||k?(k?Yo(t,k):Xo(t,E,L,j,_),Go(t,i,_,I,O,S,T),t.fill(),t!==D&&Go(D,i,_,I,O,S,T)):Go(D,i,_,I,O,S,T)),M&&P&&(t.lineWidth=M,t.strokeStyle=P,t.stroke(),R&&Uo(t,P,z,M,n,F)),Ds(t,V),r(e,"dash")){var U=r(e,"dashWidth")||M;if(U>0){V=r(e,"dashPattern")||Zr;var D=Vs(t,V,r(e,"dashOffset")),N=r(e,"dashColor")||pr;D!==t&&(v?Wo(D,d,B,A):Go(D,i,_,I,O,S,T)),t.strokeStyle=N,t.lineWidth=U,t.stroke(),r(e,"dash3d")&&Uo(t,N,r(e,"dash3dColor"),U,n,r(e,"dash3dAccuracy")),Ds(t,V)}}i===vt&&$o(t,E,r(e,"depth"),_),t.lineJoin=W,t.lineCap=H,p?f(g):t.restore()}},_=function(n,a){var s=o,l=o||r(n,He),c=ma(r(n,"name"),l);c&&(wa(t,c,r(n,"stretch"),a.x,a.y,a.width,a.height,e,i,l),o=s)},p=function(e,i){var n=r(e,"text");n!=c&&ka(t,n,r(e,"font"),a(e,He),i.x,i.y,i.width,i.height,r(e,"align"),r(e,"vAlign"))},m=function(e,i){Jo(t,a(e,He),i.x,i.y,i.width,i.height,r(e,"width"))},y=function(i,n){var o=r(i,kt),a=0;if(o&&(o.forEach(function(t){a+=t}),a>0)){for(var s=r(i,"colors")||Es,l=r(i,"startAngle")||0,h=r(i,"hollow"),u=r(i,Mt),d=r(i,zt),f=r(i,Ft),g=u?new Fs:c,v=n.x,_=n.y,p=n.width,b=n.height,m=v+p/2,y=_+b/2,w=x(p,b)/2,C=0,O=0;O<o.length;O++){var T=o[O],V=E*T/a,D=l+V;if(t.fillStyle=s[C++],C===s.length&&(C=0),t.beginPath(),h){var k=m+I(l)*w/2,P=y+S(l)*w/2,M=m+I(D)*w,B=y+S(D)*w;t.moveTo(k,P),t.arc(m,y,w/2,l,D,!1),t.lineTo(M,B),t.arc(m,y,w,D,l,!0)}else t.moveTo(m,y),t.arc(m,y,w,D,l,!0);g&&(V=(l+D)/2,g.add({text:on(u)?u(T,O,a,e):T,x:m+.75*I(V)*w,y:y+.75*S(V)*w})),t.closePath(),t.fill(),l=D}g&&g.each(function(e){ka(t,e.text,d,f,e.x,e.y,0,0,rt)})}},C=function(i,n){var o=r(i,Pt);if(o&&o.length>0){var a=o.length,s=r(i,Mt),l=r(i,zt),h=r(i,Ft),u=s?new Fs:c,d=r(i,"minValue")||0,f=r(i,"maxValue");if(f==c&&(f=0,o.forEach(function(t){t.values.forEach(function(t){f=w(f,t)})})),d===f)return;for(var g=n.height/(f-d),v=n.y+f*g,_=r(o[0],kt).length,p=n.width/(3*_+1),b=2*p/a,m=0,y=0;a>y;y++)for(var x=o[y],C=r(x,He),I=r(x,"colors"),O=r(x,kt),S=0;_>S;S++){I?t.fillStyle=I[S]:C?t.fillStyle=C:(t.fillStyle=Es[m++],m===Es.length&&(m=0));var T=O[S],V=T*g,D=n.x+(1+3*S)*p+y*b;if(Qo(t,D,v-V,b,V),u){var E=on(s)?s(T,S,x,e):T,k=Pa(l,E).height;u.add({x:D,y:v-V-k,width:b,height:k,text:E})}}u&&u.each(function(e){ka(t,e.text,l,h,e.x,e.y,e.width,e.height,rt)})}},O=function(i,n){var o=r(i,Pt);if(o&&o.length>0){var a=o.length,s=r(o[0],kt).length,l=n.width/(3*s+1),h=0,u=r(i,"maxValue"),d=r(i,Mt),f=r(i,zt),g=r(i,Ft),v=d?new Fs:c;if(u==c){u=0;for(var _=0;s>_;_++){for(var p=0,b=0;a>b;b++)p+=r(o[b],kt)[_];u=w(u,p)}}if(u>0){for(var _=0;s>_;_++)for(var m=n.y+n.height,b=0;a>b;b++){var y=o[b],x=r(y,He),C=r(y,kt)[_],I=C/u*n.height;x?t.fillStyle=x:(t.fillStyle=Es[h++],h===Es.length&&(h=0)),m-=I;var O={x:n.x+(1+3*_)*l,y:m,width:2*l,height:I};Qo(t,O.x,O.y,O.width,O.height),v&&(O.text=on(d)?d(C,_,y,e):C,v.add(O))}v&&v.each(function(e){ka(t,e.text,f,g,e.x,e.y,e.width,e.height,rt)})}}},T=function(i,n){var o=r(i,Pt);if(o&&o.length>0){for(var a=o.length,s=r(o[0],kt).length,l=n.width/(3*s+1),h=0,u=r(i,Mt),d=r(i,zt),f=r(i,Ft),g=u?new Fs:c,v=0;s>v;v++){for(var _=0,p=0;a>p;p++)_+=r(o[p],kt)[v];if(_>0){var b=n.y+n.height;for(p=0;a>p;p++){var m=o[p],y=r(m,He),w=r(m,kt)[v],x=w/_*n.height;y?t.fillStyle=y:(t.fillStyle=Es[h++],h===Es.length&&(h=0)),b-=x;var C={x:n.x+(1+3*v)*l,y:b,width:2*l,height:x};Qo(t,C.x,C.y,C.width,C.height),g&&(C.text=on(u)?u(w,v,m,e):w,g.add(C))}}}g&&g.each(function(e){ka(t,e.text,d,f,e.x,e.y,e.width,e.height,rt)})}},V=function(i,o){var a=r(i,Pt);if(a&&a.length>0){var s=a.length,l=r(i,"minValue")||0,h=r(i,"maxValue");if(h==c&&(h=0,a.forEach(function(t){t.values.forEach(function(t){h=w(h,t)})})),l===h)return;for(var u=o.height/(h-l),d=o.y+h*u,f=r(a[0],kt).length,g=o.width/(3*f+1),v=0,_=r(i,"lineWidth")||2,p=r(i,"line3d"),b=r(i,"linePoint"),m=r(i,Mt),y=r(i,zt),x=r(i,Ft),C=0;s>C;C++){var I=a[C],O=r(I,He),S=r(I,kt);O?t.strokeStyle=O:(O=t.strokeStyle=Es[v++],v===Es.length&&(v=0)),t.beginPath();for(var T=0;f>T;T++){var V=o.x+(2+3*T)*g,D=d-S[T]*u;0===T?t.moveTo(V,D):t.lineTo(V,D)}if(t.lineWidth=_,t.stroke(),p&&Uo(t,O,c,_,n),b||m){var k,P=_/2+2;for(T=0;f>T;T++){var M=S[T];if(V=o.x+(2+3*T)*g,D=d-M*u,on(b)?b(t,V,D,O,T,I,e):b&&(t.fillStyle=O,t.beginPath(),t.arc(V,D,P,0,E,!0),t.fill()),on(m)?k=m(M,T,I,e):m&&(k=M),k){var B=Pa(y,k).height,L=t.shadowBlur;if(L){var j=t.shadowOffsetX,R=t.shadowOffsetY,z=t.shadowColor;t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=c}ka(t,k,y,x,V,D-B-P+2,0,B,rt),L&&(t.shadowOffsetX=j,t.shadowOffsetY=R,t.shadowColor=z,t.shadowBlur=L)}}}}}},D={border:m,image:_,text:p,pieChart:y,columnChart:C,stackedColumnChart:O,percentageColumnChart:T,lineChart:V};return function(a,s,h,_,p,b,m,y,w){if(s&&p&&b){if(t=a,e=m,i=y,n=i&&i._zoom?i._zoom:1,o=w,s.tagName)return void t.drawImage(s,h,_,p,b);if(!1!==r(s,"visible")){o||(o=Rs(s.color,e,i));var x=Ls(s,e),C=js(s,e),I={x:0,y:0,width:x,height:C},O=r(s,"clip"),S=r(s,"opacity");t.save(),$n(t,h,_),(x!==p||C!==b)&&t.scale(p/x,b/C),O&&(on(O)?O(t,x,C,e,i,s):(t.beginPath(),t.rect(0,0,x,C),t.clip())),S!=c&&(t.globalAlpha*=S),r(s,"comps").forEach(function(n){if(!1!==r(n,Zt)){ks.splice(0,0,n);var o=r(n,"opacity"),a=r(n,"shadow"),s=r(n,"type"),h=l(n,I);if(o!=c){var _=t.globalAlpha;t.globalAlpha*=o}if(a){var p=t.shadowOffsetX,b=t.shadowOffsetY,m=t.shadowBlur,y=t.shadowColor,w=r(n,"shadowOffsetX"),x=r(n,"shadowOffsetY"),C=r(n,"shadowBlur"),O=r(n,"shadowColor");t.shadowOffsetX=w==c?3:w,t.shadowOffsetY=x==c?3:x,t.shadowBlur=C==c?6:C,t.shadowColor=O||vr}if(on(s))s(t,h,n,e,i);else if(d.getCompType(s))d.getCompType(s)(t,h,n,e,i);else if(nr[s]||s===bt)v(n,s,h);else if("SVGPath"===s)g(n,s,h);else if(D[s]&&h){var S=r(n,Gt);u(S,h),D[s](n,h),f(S)}a&&(t.shadowOffsetX=p,t.shadowOffsetY=b,t.shadowBlur=m,t.shadowColor=y),o!=c&&(t.globalAlpha=_),ks.splice(0,1)}}),t.restore()}}}}();d.getCurrentComp=function(){return ks[0]},d.getParentComp=function(){return ks[1]},d.getInternal=function(){return{isEnter:To,isEsc:Vo,isSpace:So,isLeft:xo,isUp:Co,isRight:Io,isDown:Oo,addMethod:vn,superCall:bn,toPointsArray:Ho,translateAndScale:Jn,appendArray:fn,createWorldMatrix:Cs,vec3TransformMat4:_s,setCanvas:Hn,createDiv:zn,createView:Rn,createCanvas:Fn,createImage:Ui,initContext:Zn,layout:io,fillRect:Qo,Mat:or,drawBorder:Jo,isString:Ki,setBorder:An,getPropertyValue:Sn,setPropertyValue:Tn,drawVerticalLine:Vn,draw3DRect:$o,getPinchDist:ar,isSameRect:wn,getPosition:fr,intersectionLineRect:In,getNodeRect:cl,getImageWidth:Ls,getImageHeight:js,formatNumber:dn,initItemElement:jn,drawPoints:Wo,createG2:Vs,closePopup:oo,isH:Xi,createAnim:gn,createNormalMatrix:zh,createNormals:fh,toFloatArray:$u,glMV:Fh,batchShape:pu,createNodeMatrix:xs,getFaceInfo:Qh,transformAppend:Nc,drawFaceInfo:Gh,to3dPointsArray:ed,setGLDebugMode:function(t){Lc=t},cube:function(){return{vs:Su,is:Tu,uv:Vu}},ui:function(){return{DataUI:yc,NodeUI:wc,EdgeUI:xc,GroupUI:Ic,ShapeUI:Oc,GridUI:Tc,Data3dUI:Cd,Node3dUI:Id,Shape3dUI:Sd}},getInternalVersion:function(){return"U2FsdGVkX18V9dMc2RTZnKL2LQXxdn86TppHEIbAw9PFw5KawE/c1TAWmxpBiZUs"},getDragger:function(){return ro},addMSMap:function(t){vn(Wr,t)},k:o}},function(t){function e(t,e){t!=c&&(e==c&&Ae!=typeof t?this._54O(t,256):this._54O(t,e))}function i(){return new e(c)}function r(t,e,i,n,o,r){for(;--r>=0;){var a=e*this[t++]+i[n]+o;o=b(a/67108864),i[n++]=67108863&a}return o}function s(t,e,i,n,o,r){for(var a=32767&e,s=e>>15;--r>=0;){var l=32767&this[t],c=this[t++]>>15,h=s*l+c*a;l=a*l+((32767&h)<<15)+i[n]+(1073741823&o),o=(l>>>30)+(h>>>15)+s*c+(o>>>30),i[n++]=1073741823&l}return o}function l(t,e,i,n,o,r){for(var a=16383&e,s=e>>14;--r>=0;){var l=16383&this[t],c=this[t++]>>14,h=s*l+c*a;l=a*l+((16383&h)<<14)+i[n]+o,o=(l>>28)+(h>>14)+s*c,i[n++]=268435455&l}return o}function h(t){return wt.charAt(t)}function u(t,e){var i=xt[t.charCodeAt(e)];return i==c?-1:i}function d(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function f(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function g(t){var e=i();return e._58O(t),e}function v(t,i){var n,o=this;if(16==i)n=4;else if(8==i)n=3;else if(256==i)n=8;else if(2==i)n=1;else if(32==i)n=5;else{if(4!=i)return void o.fromRadix(t,i);n=2}o.t=0,o.s=0;for(var r=t.length,a=!1,s=0;--r>=0;){var l=8==n?255&t[r]:u(t,r);0>l?"-"==t.charAt(r)&&(a=!0):(a=!1,0==s?o[o.t++]=l:s+n>o.DB?(o[o.t-1]|=(l&(1<<o.DB-s)-1)<<s,o[o.t++]=l>>o.DB-s):o[o.t-1]|=l<<s,(s+=n)>=o.DB&&(s-=o.DB))}8==n&&0!=(128&t[0])&&(o.s=-1,s>0&&(o[o.t-1]|=(1<<o.DB-s)-1<<s)),o._57O(),a&&e.ZERO._78O(o,o)}function _(){for(var t=this,e=t.s&t.DM;t.t>0&&t[t.t-1]==e;)--t.t}function p(t){var e=this;if(e.s<0)return"-"+e._85O()[_t](t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return e.toRadix(t);i=2}var n,o=(1<<i)-1,r=!1,a="",s=e.t,l=e.DB-s*e.DB%i;if(s-- >0)for(l<e.DB&&(n=e[s]>>l)>0&&(r=!0,a=h(n));s>=0;)i>l?(n=(e[s]&(1<<l)-1)<<i-l,n|=e[--s]>>(l+=e.DB-i)):(n=e[s]>>(l-=i)&o,0>=l&&(l+=e.DB,--s)),n>0&&(r=!0),r&&(a+=h(n));return r?a:"0"}function C(){var t=i();return e.ZERO._78O(this,t),t}function O(){return this.s<0?this._85O():this}function V(t){var e=this,i=e.s-t.s;if(0!=i)return i;var n=e.t;if(0!=(i=n-t.t))return e.s<0?-i:i;for(;--n>=0;)if(0!=(i=e[n]-t[n]))return i;return 0}function D(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function k(){var t=this;return t.t<=0?0:t.DB*(t.t-1)+D(t[t.t-1]^t.s&t.DM)}function P(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function M(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=w(this.t-t,0),e.s=this.s}function L(t,e){var i,n=this,o=t%n.DB,r=n.DB-o,a=(1<<r)-1,s=b(t/n.DB),l=n.s<<o&n.DM;for(i=n.t-1;i>=0;--i)e[i+s+1]=n[i]>>r|l,l=(n[i]&a)<<o;for(i=s-1;i>=0;--i)e[i]=0;e[s]=l,e.t=n.t+s+1,e.s=n.s,e._57O()}function R(t,e){var i=this;e.s=i.s;var n=b(t/i.DB);if(n>=i.t)return void(e.t=0);var o=t%i.DB,r=i.DB-o,a=(1<<o)-1;e[0]=i[n]>>o;for(var s=n+1;s<i.t;++s)e[s-n-1]|=(i[s]&a)<<r,e[s-n]=i[s]>>o;o>0&&(e[i.t-n-1]|=(i.s&a)<<r),e.t=i.t-n,e._57O()}function z(t,e){for(var i=this,n=0,o=0,r=x(t.t,i.t);r>n;)o+=i[n]-t[n],e[n++]=o&i.DM,o>>=i.DB;if(t.t<i.t){for(o-=t.s;n<i.t;)o+=i[n],e[n++]=o&i.DM,o>>=i.DB;o+=i.s}else{for(o+=i.s;n<t.t;)o-=t[n],e[n++]=o&i.DM,o>>=i.DB;o-=t.s}e.s=0>o?-1:0,-1>o?e[n++]=i.DV+o:o>0&&(e[n++]=o),e.t=n,e._57O()}function F(t,i){var n=this.abs(),o=t.abs(),r=n.t;for(i.t=r+o.t;--r>=0;)i[r]=0;for(r=0;r<o.t;++r)i[r+n.t]=n.am(0,o[r],i,r,0,n.t);i.s=0,i._57O(),this.s!=t.s&&e.ZERO._78O(i,i)}function A(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t._57O()}function W(t,n,o){var r=t.abs(),a=this;if(!(r.t<=0)){var s=a.abs();if(s.t<r.t)return n!=c&&n._58O(0),void(o!=c&&a._77O(o));o==c&&(o=i());var l=i(),h=a.s,u=t.s,d=a.DB-D(r[r.t-1]);d>0?(r._44O(d,l),s._44O(d,o)):(r._77O(l),s._77O(o));var f=l.t,g=l[f-1];if(0!=g){var v=g*(1<<a.F1)+(f>1?l[f-2]>>a.F2:0),_=a.FV/v,p=(1<<a.F1)/v,m=1<<a.F2,y=o.t,w=y-f,x=n==c?i():n;for(l._59O(w,x),o._52O(x)>=0&&(o[o.t++]=1,o._78O(x,o)),e.ONE._59O(f,x),x._78O(l,l);l.t<f;)l[l.t++]=0;for(;--w>=0;){var C=o[--y]==g?a.DM:b(o[y]*_+(o[y-1]+m)*p);if((o[y]+=l.am(0,C,o,w,0,f))<C)for(l._59O(w,x),o._78O(x,o);o[y]<--C;)o._78O(x,o)}n!=c&&(o._45O(f,n),h!=u&&e.ZERO._78O(n,n)),o.t=f,o._57O(),d>0&&o._46O(d,o),0>h&&e.ZERO._78O(o,o)}}}function H(t){var n=i();return this.abs()._49O(t,c,n),this.s<0&&n._52O(e.ZERO)>0&&t._78O(n,n),n}function U(t){this.m=t}function N(t){return t.s<0||t._52O(this.m)>=0?t.mod(this.m):t}function Q(t){return t}function G(t){t._49O(this.m,c,t)}function X(t,e,i){t._47O(e,i),this._74O(i)}function Y(t,e){t._48O(e),this._74O(e)}function q(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=15&e*(2-(15&t)*e),e=255&e*(2-(255&t)*e),e=65535&e*(2-(65535&(65535&t)*e)),e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Z(t){var e=this;e.m=t,e.mp=t._50O(),e.mpl=32767&e.mp,e.mph=e.mp>>15,e.um=(1<<t.DB-15)-1,e.mt2=2*t.t}function J(t){var n=i();return t.abs()._59O(this.m.t,n),n._49O(this.m,c,n),t.s<0&&n._52O(e.ZERO)>0&&this.m._78O(n,n),n}function $(t){var e=i();return t._77O(e),this._74O(e),e}function K(t){for(var e=this;t.t<=e.mt2;)t[t.t++]=0;for(var i=0;i<e.m.t;++i){var n=32767&t[i],o=n*e.mpl+((n*e.mph+(t[i]>>15)*e.mpl&e.um)<<15)&t.DM;for(n=i+e.m.t,t[n]+=e.m.am(0,o,t,i,0,e.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t._57O(),t._45O(e.m.t,t),t._52O(e.m)>=0&&t._78O(e.m,t)}function tt(t,e){t._48O(e),this._74O(e)}function et(t,e,i){t._47O(e,i),this._74O(i)}function it(){return 0==(this.t>0?1&this[0]:this.s)}function nt(t,n){if(t>4294967295||1>t)return e.ONE;var o=i(),r=i(),a=n._73O(this),s=D(t)-1;for(a._77O(o);--s>=0;)if(n._76O(o,r),(t&1<<s)>0)n._75O(r,a,o);else{var l=o;o=r,r=l}return n.revert(o)}function ot(t,e){var i;return i=256>t||e._51O()?new U(e):new Z(e),this.exp(t,i)}function rt(){var t=this;if(t.s<0){if(1==t.t)return t[0]-t.DV;if(0==t.t)return-1}else{if(1==t.t)return t[0];if(0==t.t)return 0}return(t[1]&(1<<32-t.DB)-1)<<t.DB|t[0]}function at(t,i){return new e(t,i)}function st(){var t=this;t.n=c,t.e=0,t.d=c,t.p=c,t.q=c,t.dmp1=c,t.dmq1=c,t._10A=c}function ct(t){return t._53O(this.e,this.n)}function ht(t){var e,i,n,o="",r=0;for(e=0;e<t.length&&t.charAt(e)!=Dt;++e)0>(n=Vt.indexOf(t.charAt(e)))||(0==r?(o+=h(n>>2),i=3&n,r=1):1==r?(o+=h(i<<2|n>>4),i=15&n,r=2):2==r?(o+=h(i),o+=h(n>>2),i=3&n,r=3):(o+=h(i<<2|n>>4),o+=h(15&n),r=0));return 1==r&&(o+=h(i<<2)),o}function ut(t){var e=t.split(""),i=ht(t);return e.forEach(function(t){t.length>0&&i&&(ui+=j(t))}),i}function dt(t,e){var i=Lt._4O.Util._56O(t,"ss"),n={};return n.v=i==e,n.t=1,n.s=0,di=n.v,n.t=0,[i,n]}function ft(t){var e=t.substring(0,38);if(e&&30==e.indexOf("05000420")){return["ss",t.substring(38)]}return[]}function gt(t,e){e=e.replace(Mt,""),e=e.replace(/[ \n]+/g,"");var i=at(e,16);if(i._55O()>this.n._55O())return 0;var n=this._37O(i),o=n[_t](16).replace(/^1f+00/,""),r=ft(o);if(0==r.length)return!1;for(var a,s,l,c=es,h=[0,.5,.75,.875,.9375],u=[],d=[],f=[],g=E/c,v=r[1],_=dt(t,v)[0],p=0,b=0;p<h.length;p++){var m=0==p%2?0:.5;for(a=0;c>=a;a++)s=(a+m)*g,l=1-h[p],u.push(.5*I(s)*l,2*h[p]*.5-.5,.5*-S(s)*l),d.push((a+m)/c,l)}for(p=0;p<h.length-1;p++){var y=p*(c+1),w=(p+1)*(c+1);for(a=0;c>a;a++)f.push(y+a,w+a+1,w+a,y+a,y+a+1,w+a+1)}return f.forEach(function(t){b+=t}),v==_&&b>10}var vt,_t="toString";a=t["D"+11182[_t](T(2,5))];var pt=e.prototype;$t+=lt.substr(0,1);var bt=t.navigator?t.navigator.appName:"";"Microsoft Internet Explorer"==bt?(pt.am=s,vt=30):"Netscape"!=bt?(pt.am=r,vt=26):(pt.am=l,vt=28),pt.DB=vt,pt.DM=(1<<vt)-1,pt.DV=1<<vt;pt.FV=T(2,52),pt.F1=52-vt,pt.F2=2*vt-52;var mt,yt,wt="0123456789abcdefghijklmnopqrstuvwxyz",xt=[],Ct=function(t){return String.fromCharCode(t)};for(mt="0".charCodeAt(0),yt=0;9>=yt;++yt)xt[mt++]=yt;for(mt="a".charCodeAt(0),yt=10;36>yt;++yt)xt[mt++]=yt;for(mt="A".charCodeAt(0),yt=10;36>yt;++yt)xt[mt++]=yt;var It=U.prototype;It._73O=N,It.revert=Q,It._74O=G,It._75O=X,It._76O=Y;var Ot=Z.prototype;Ot._73O=J,Ot.revert=$,Ot._74O=K,Ot._75O=et,Ot._76O=tt,pt._77O=d,pt._58O=f,pt._54O=v,pt._57O=_,pt._59O=P,pt._45O=M,pt._44O=L,pt._46O=R,pt._78O=z,pt._47O=F,pt._48O=A,pt._49O=W,pt._50O=q,pt._51O=it,pt.exp=nt,pt.toString=p,pt._85O=C,pt.abs=O,pt._52O=V,pt._55O=k,pt.mod=H,pt._53O=ot,e.ZERO=g(0),e.ONE=g(1),pt._86O=rt;var St=function(t,e){var i=this;i.isPublic=!0,typeof t!==Ae?(i.n=t,i.e=e):t!=c&&e!=c&&t.length>0&&e.length>0&&(i.n=at(t,16),i.e=j(e,16))};Po=function(){var t,e,i=ut(kt),n=i.substr(0,4),r=i.substr(4,2),s=i.substr(6,2),l=!1,c=o,h=[],u=Ge.charAt(7);if(a&&(a[_t]().indexOf("nat")<0||a[$t][_t]().indexOf("nat")<0||!i?t=bs(Vi[u]):(i=new a(n-0,r-1,s-0),e=i.setHours(9),a[$t]()>e?t=bs(Vi[u]):l=!0)),i&&t&&c){for(var d in t)h.push(d);var f,g=t[h[0]],v=t[h[1]],_=t[h[2]],p=t[h[4]],b=t[h[5]],m=t[h[6]],y=Ft._27O(c);y&&m&&(f=g+v+_+p+""+b)&&y._31O(f,m)&&(l=!0)}return l||(Go=yn),u};var Tt=st.prototype;Tt._37O=ct,Tt._38O=St;var Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dt="=",Et=25,kt="IBcCFQ==",Pt=Pt||function(t,e){var i={},n=i._7A={},o=n._6A=function(){function t(){}return{_80O:function(e){t.prototype=this;var i=new t;return e&&i._5A(e),i.hasOwnProperty("_82O")||(i._82O=function(){i.$super._82O.apply(this,arguments)}),i._82O.prototype=i,i.$super=this,i},_3A:function(){var t=this._80O();return t._82O.apply(t,arguments),t},_82O:function(){},_5A:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty(_t)&&(this.toString=t.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),r=n._39O=o._80O({_82O:function(t,e){t=this._84O=t||[],this._65O=void 0!=e?e:4*t.length},toString:function(t){return(t||s).stringify(this)},_89O:function(t){var e=this._84O,i=t._84O,n=this._65O,o=t._65O;if(this._57O(),n%4)for(var r=0;o>r;r++){var a=255&i[r>>>2]>>>24-r%4*8;e[n+r>>>2]|=a<<24-(n+r)%4*8}else if(i.length>65535)for(var r=0;o>r;r+=4)e[n+r>>>2]=i[r>>>2];else e.push.apply(e,i);return this._65O+=o,this},_57O:function(){var t=this._84O,e=this._65O;t[e>>>2]&=4294967295<<32-e%4*8,t.length=m(e/4)},_88O:function(){var t=o._88O.call(this);return t._84O=this._84O.slice(0),t},_87O:function(t){for(var e=[],i=0;t>i;i+=4)e.push(0|4294967296*B);return new r._82O(e,t)}}),a=i._2A={},s=a._69O={stringify:function(t){var e,i=t._84O,n=t._65O,o=[];for(e=0;n>e;e++){var r=255&i[e>>>2]>>>24-e%4*8;o.push((r>>>4).toString(16)),o.push((15&r).toString(16))}return o.join("")},_68O:function(t){for(var e=t.length,i=[],n=0;e>n;n+=2)i[n>>>3]|=j(t.substr(n,2),16)<<24-n%8*4;return new r._82O(i,e/2)}},l=a._8A={stringify:function(t){var e,i=t._84O,n=t._65O,o=[];for(e=0;n>e;e++){var r=255&i[e>>>2]>>>24-e%4*8;o.push(Ct(r))}return o.join("")},_68O:function(t){var e,i=t.length,n=[];for(e=0;i>e;e++)n[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new r._82O(n,i)}},c=a._9A={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("")}},_68O:function(t){return l._68O(unescape(encodeURIComponent(t)))}},h=n._32O=o._80O({_1A:function(){this._83O=new r._82O,this._23O=0},_33O:function(t){typeof t==Ae&&(t=c._68O(t)),this._83O._89O(t),this._23O+=t._65O},_25O:function(t){var e=this._83O,i=e._84O,n=e._65O,o=this._79O,a=4*o,s=n/a;s=t?m(s):w((0|s)-this._22O,0);var l=s*o,c=x(4*l,n);if(l){for(var h=0;l>h;h+=o)this._20O(i,h);var u=i.splice(0,l);e._65O-=c}return new r._82O(u,c)},_88O:function(){var t=o._88O.call(this);return t._83O=this._83O._88O(),t},_22O:0});n._66O=h._80O({cfg:o._80O(),_82O:function(t){this.cfg=this.cfg._80O(t),this._1A()},_1A:function(){h._1A.call(this),this._34O()},_81O:function(t){return this._33O(t),this._25O(),this},_72O:function(t){return t&&this._33O(t),this._21O()},_79O:16,_26O:function(t){return function(e,i){return new t._82O(i)._72O(e)}},_19O:function(t){return function(e,i){return new u._71O._82O(t,i)._72O(e)}}});var u=i._67O={};return i}();!function(){var t=Pt,e=t._7A,i=e._39O,n=e._66O,o=t._67O,r=[],a=[];!function(){function t(t){return 0|4294967296*(t-(0|t))}for(var e=2,i=0;64>i;)(function(t){for(var e=y(t),i=2;e>=i;i++)if(!(t%i))return!1;return!0})(e)&&(8>i&&(r[i]=t(T(e,.5))),a[i]=t(T(e,1/3)),i++),e++}();var s=[],l=o._41O=n._80O({_34O:function(){this._64O=new i._82O(r.slice(0))},_20O:function(t,e){for(var i=this._64O._84O,n=i[0],o=i[1],r=i[2],l=i[3],c=i[4],h=i[5],u=i[6],d=i[7],f=0;64>f;f++){if(16>f)s[f]=0|t[e+f];else{var g=s[f-15],v=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,_=s[f-2],p=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10;s[f]=v+s[f-7]+p+s[f-16]}var b=c&h^~c&u,m=n&o^n&r^o&r,y=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25),x=d+w+b+a[f]+s[f],C=y+m;d=u,u=h,h=c,c=0|l+x,l=r,r=o,o=n,n=0|x+C}i[0]=0|i[0]+n,i[1]=0|i[1]+o,i[2]=0|i[2]+r,i[3]=0|i[3]+l,i[4]=0|i[4]+c,i[5]=0|i[5]+h,i[6]=0|i[6]+u,i[7]=0|i[7]+d},_21O:function(){var t=this._83O,e=t._84O,i=8*this._23O,n=8*t._65O;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=b(i/4294967296),e[15+(n+64>>>9<<4)]=i,t._65O=4*e.length,this._25O(),this._64O},_88O:function(){var t=n._88O.call(this);return t._64O=this._64O._88O(),t}});t._41O=n._26O(l),t._42O=n._19O(l)}();var Mt=new RegExp("");Mt.compile("[^0-9a-f]","gi"),st._28O=-1,st._29O=-2,Tt._31O=gt,Tt._63O=gt,st._43O=-2;var Bt=new function(){var t=this;t._5O=function(t,e){if("8"!=t.substring(e+2,e+3))return 1;var i=j(t.substring(e+3,e+4));return 0==i?-1:i>0&&10>i?i+1:-2},t._13O=function(e,i){var n=t._5O(e,i);return 1>n?"":e.substring(i+2,i+2+2*n)},t._12O=function(i,n){var o=t._13O(i,n);if(""==o)return-1;var r;return r=j(o.substring(0,1))<8?new e(o,16):new e(o.substring(2),16),r._86O()},t._6O=function(e,i){var n=t._5O(e,i);return 0>n?n:i+2*(n+1)},t._11O=function(e,i){var n=t._6O(e,i),o=t._12O(e,i);return e.substring(n,n+2*o)},t._10O=function(e,i){return t._6O(e,i)+2*t._12O(e,i)},t._7O=function(e,i){var n=[],o=t._6O(e,i);n.push(o);for(var r=t._12O(e,i),a=o,s=0;;){var l=t._10O(e,a);if(l==c||l-o>=2*r)break;if(s>=200)break;n.push(l),a=l,s++}return n}};if(Bt._90O=Ct(34),Bt._91O=n+Ct(108),Lt==c||!Lt)var Lt={};Lt._4O!=c&&Lt._4O||(Lt._4O={}),Lt._4O.Util=new function(){var t=this;t._56O=function(t){return(new Lt._4O._3O)._30O(t)},t._4A=function(t){return(new Lt._4O._3O)._36O(t)}},Lt._4O._3O=function(){var t=this;t._8O=function(e,i){if("ss"==e&&"cj"==i){try{t.md=Pt._67O._41O._3A()}catch(t){}t._24O=function(e){t.md._81O(e)},t._35O=function(e){var i=Pt._2A._69O._68O(e);t.md._81O(i)},t._60O=function(){return t.md._72O()[_t](Pt._2A._69O)},t._30O=function(e){return t._24O(e),t._60O()},t._36O=function(e){return t._35O(e),t._60O()}}},t._24O=function(){},t._35O=function(){},t._60O=function(){},t._30O=function(){},t._36O=function(){},t._8O("ss","cj")},fi=function(e){var i=t[Bt._91O],n=1,o=!1;if(Eo.forEach(function(t){n*=t}),Eo.a)return Eo.a;if(e>n){if(i){i=i.split(Bt._90O);var r=i[3],a=i[7],s=i[11],l=i[19],c=i[23],h=i[27],u=r+a+s+l+c;o=Li()(u,h)}o||(yc.prototype._42=hi)}else o=!0;return Eo.a=o,o},Et=String.fromCharCode(Et+20);var jt=function(t){return t=t.replace(Mt,""),t=t.replace(/[ \n]+/g,"")},Rt="02",zt=at,Ft=function(){var t;return t={_18O:function(t){return ht(t.replace(/\s+/g,""))},_14O:function(t){var e=this._18O(t);return this._15O(e)},_15O:function(t){var e=this._17O(t);if("2a864886f70d010101"==e._61O){var i=this._16O(e.key),n=new st;return n._38O(i.n,i.e),n}},_16O:function(t){var e={};t.substr(0,2);var i=Bt._7O(t,0);return i.length,t.substr(i[0],2),e.n=Bt._11O(t,i[0]),t.substr(i[1],2),e.e=Bt._11O(t,i[1]),e},_17O:function(t){var e={};e._40O=c;var i=Bt._7O(t,0);i.length;var n=i[0];t.substr(n,2);var o=Bt._7O(t,n);return o.length,t.substr(o[0],2),e._61O=Bt._11O(t,o[0]),"06"==t.substr(o[1],2)?e._40O=Bt._11O(t,o[1]):"30"==t.substr(o[1],2)&&(e._40O={},e._40O.p=Bt._70O(t,o[1],[0],Rt),e._40O.q=Bt._70O(t,o[1],[1],Rt),e._40O.g=Bt._70O(t,o[1],[2],Rt)),t.substr(i[1],2),e.key=Bt._11O(t,i[1]).substr(2),e}},t._17O?t:c}(),At=Ft._27O=function(t){return Ft._14O(t)};Li=function(){return function(t,e){e=jt(e);var i=zt(e,T(2,4)),n=this;if(!n||!n.n||i._55O()>n.n._55O())return 0;var o=n._37O(i),r=o[_t](T(2,4)).replace(/^1f+00/,""),a=ft(r);if(0==a.length)return!1;var s=a[0],l=a[1];return l==function(t){return Lt._4O.Util._56O(t,s)}(t)}.bind(At(o))}}(t);var Fs=h.List=function(){this._as=[];var t,e,i=arguments.length;if(1===i){var n=arguments[0];if(an(n)&&(n=n._as),rn(n))for(e=n.length,t=0;e>t;t++)this._as.push(n[t]);else n!=c&&this._as.push(n)}else if(i>1)for(t=0;i>t;t++)this._as.push(arguments[t])};ns("List",e,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(t,e){return e===i?this._as.push(t):this._as.splice(e,0,t)},addAll:function(t){an(t)&&(t=t._as),rn(t)?fn(this._as,t):this._as.push(t)},get:function(t){return this._as[t]},slice:function(t,e){return new Fs(this._as.slice(t,e))},remove:function(t){var e=this._as.indexOf(t);return e>=0&&e<this._as.length&&this.removeAt(e),e},removeAt:function(t){return this._as.splice(t,1)[0]},set:function(t,e){return this._as[t]=e},clear:function(){return this._as.splice(0,this._as.length)},contains:function(t){return this._as.indexOf(t)>=0},indexOf:function(t){return this._as.indexOf(t)},each:function(t,e){for(var i=0,n=this._as.length;n>i;i++){var o=this._as[i];e?t.call(e,o):t(o)}},reverseEach:function(t,e){for(var i=this._as.length-1;i>=0;i--){var n=this._as[i];e?t.call(e,n):t(n)}},toArray:function(t,e){if(t){for(var i,n=[],o=0,r=this._as.length;r>o;o++)i=this._as[o],e?t.call(e,i)&&n.push(i):t(i)&&n.push(i);return n}return this._as.concat()},toList:function(t,e){if(t){for(var i,n=new Fs,o=0,r=this._as.length;r>o;o++)i=this._as[o],e?t.call(e,i)&&n.add(i):t(i)&&n.add(i);return n}return new Fs(this)},reverse:function(){this._as.reverse()},sort:function(t){return this._as.sort(t||Oa),this},toString:function(){return this._as.toString()}});var As=new Fs;vn(As,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:Ei,each:Ei,reverseEach:Ei,toArray:function(){return[]},toList:function(){return new Fs},add:ki,addAll:ki,set:ki,remove:ki,removeAt:ki,clear:ki});var Ws=h.Notifier=function(){};ns("Notifier",e,{contains:function(t,e){if(this._ls)for(var i,n=0,o=this._ls.size();o>n;n++)if(i=this._ls.get(n),t===i.l&&e===i.s)return!0;return!1},add:function(t,e,i){var n=this,o={l:t,s:e,a:i};n._ls||(n._ls=new Fs),n._f?(n._as||(n._as=new Fs),n._as.add(o)):o.a?n._ls.add(o,0):n._ls.add(o)},remove:function(t,e){var i=this;i._ls&&(i._f?(i._rs||(i._rs=new Fs),i._rs.add({l:t,s:e})):i._remove(t,e))},_remove:function(t,e){for(var i,n=this._ls,o=0,r=n.size();r>o;o++)if(i=n.get(o),i.l===t&&i.s===e)return void n.removeAt(o)},fire:function(t){var e=this,i=e._ls;if(e._b=1,i){e._f=1;for(var n,o=0,r=i.size();r>o;o++)n=i.get(o),n.s?n.l.call(n.s,t):n.l(t);if(delete e._f,e._rs){for(r=e._rs.size(),o=0;r>o;o++)n=e._rs.get(o),e._remove(n.l,n.s);delete e._rs}if(e._as){for(r=e._as.size(),o=0;r>o;o++)n=e._as.get(o),n.a?i.add(n,0):i.add(n);delete e._as}}}});var Hs=h.Data=function(){this._id=xa()};ns("Data",e,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:c,_parent:c,_children:As,_childMap:c,_styleMap:c,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return c},_22Q:function(){return c},s:function(t,e){var i=this;if(2===arguments.length)i.setStyle(t,e);else{if(!nn(t))return i.getStyle(t);for(var n in t)i.setStyle(n,t[n])}return i},fp:function(t,e,i){return this.firePropertyChange(t,e,i)},firePropertyChange:function(t,e,i){if(e===i)return!1;var n=this,o={property:t,oldValue:e,newValue:i,data:n};return n._dataModel&&n._dataModel.handleDataPropertyChange(o),n.onPropertyChanged(o),!0},onPropertyChanged:function(t){var e=this,i=e._parent,n=t.property;if(hn(i)){var o=e.s(Ot),r="s:ingroup"===n;(o&&qs[n]||n===r)&&i._81I(),(o||r)&&i.fp("childChange",!0,!1)}},_21I:function(t){var e=this;if(t&&e._dataModel)throw"HT-DM";e._dataModel=t},getId:function(){return this._id},setId:function(t){this._id=t},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(t,e){return this._children.toList(t,e)},eachChild:function(t,e){this._children.each(t,e)},addChild:function(t,e){var n=this;t!==n&&(n._children===As&&(n._children=new Fs,n._childMap={}),e===i&&(e=n._children.size()),n._childMap[t._id]||n.isDescendantOf(t)||(t._parent&&t._parent.removeChild(t),(0>e||e>n._children.size())&&(e=n._children.size()),n._children.add(t,e),n._childMap[t._id]=t,t.setParent(n),n.onChildAdded(t,e),n.fp(Ie,c,t)))},onChildAdded:function(){},removeChild:function(t){var e=this;if(e._childMap&&e._childMap[t._id]){var i=e._children.remove(t);delete e._childMap[t._id],e.fp(Ie,t,c),t.setParent(c),e.onChildRemoved(t,i)}},onChildRemoved:function(){},getChildAt:function(t){return this._children.get(t)},clearChildren:function(){var t=this;if(!t._children.isEmpty())for(var e=0,i=t._children.toArray(),n=i.length;n>e;e++)t.removeChild(i[e])},getParent:function(){return this._parent},setParent:function(t){var e=this;if(!(e._73I||e._parent===t||e===t||t&&t.isDescendantOf(e))){var i=e._parent;e._parent=t,e._73I=1,i&&i.removeChild(e),t&&t.addChild(e),delete e._73I,e.fp("parent",i,t),e.onParentChanged(i,t)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(t){return!!t&&(this.isDescendantOf(t)||t.isDescendantOf(this))},isParentOf:function(t){return!(!t||!this._childMap)&&!!this._childMap[t._id]},isDescendantOf:function(t){if(!t||t.isEmpty())return!1;for(var e=this._parent;e;){if(t===e)return!0;e=e._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(t,e){e===i&&(e=1);var n=this._styleMap?this._styleMap[t]:i;return n===i&&e?f[t]:n},setStyle:function(t,e){var n=this;n._styleMap||(n._styleMap={});var o=n._styleMap[t];e===i?delete n._styleMap[t]:n._styleMap[t]=e,n.fp("s:"+t,o,e)&&n.onStyleChanged(t,o,e)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var t=this;return t._displayName||t._name||t._tag||t._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(t,e){var i=this,n=i.s(Rt);n||i.s(Rt,n={}),e?n[t]=e:delete n[t],i.fp(Rt,c,n)},removeStyleIcon:function(t){var e=this.s(Rt);if(e){var i=e[t];delete e[t],this.fp(Rt,c,e)}return i},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var t,e={};for(t in this._styleMap)e[t]=1;return e}});var Us=h.DataModel=function(){var e=this;e._datas=new Fs,e._dataMap={},e._roots=new Fs,e._rootMap={},e._78O={},e._36I=new Ws,e._35I=new Ws,e._3o=new Ns(e);var i=e._29Q=[],n=e._scheduleCallback=function(){for(var o=Date.now(),r=0;r<i.length;r++){var a=i[r];a.enabled&&o-a.lastTime>a.interval&&(e.each(function(t){a.action(t)}),a.lastTime=o)}i.length&&(e._30Q=t.requestAnimationFrame(n))}};ns("DataModel",e,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function(t,e,i){this.addDataModelChangeListener(t,e,i)},umm:function(t,e){this.removeDataModelChangeListener(t,e)},md:function(t,e,i){this.addDataPropertyChangeListener(t,e,i)},umd:function(t,e){this.removeDataPropertyChangeListener(t,e)},mh:function(t,e,i){this.addHierarchyChangeListener(t,e,i)},umh:function(t,e){this.removeHierarchyChangeListener(t,e)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(t){return this._attrObject=t},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(t){return this._dataMap[t]},removeDataById:function(t){this.remove(this.getDataById(t))},toDatas:function(t,e){return this._datas.toList(t,e)},each:function(t,e){this._datas.each(t,e)},getDataByTag:function(t){return this._78O[t]},removeDataByTag:function(t){this.remove(this.getDataByTag(t))},add:function(t,e){var i=this,n=t._id,o=t._tag,r=i._roots;if(i._dataMap[n])throw"'"+n+"' already exists";o!=c&&(i._78O[o]=t),i._dataMap[n]=t,i._datas.add(t),t._parent||(i._rootMap[n]=t,
e>=0?r.add(t,e):r.add(t)),t._21I(i),i.onAdded(t),i._36I.fire({kind:"add",data:t})},onAdded:function(){},remove:function(t){if(t){var e=this,i=t._id,n=t.getTag(),o=e.getHistoryManager();t._dataModel===e&&(o&&o.beginInteraction(),e.prepareRemove(t),t.toChildren().each(e.remove,e),t._parent&&t._parent.removeChild(t),e._datas.remove(t),delete e._dataMap[i],n!=c&&delete e._78O[n],e._rootMap[i]&&(delete e._rootMap[i],e._roots.remove(t)),t._21I(c),e.onRemoved(t),e._36I.fire({kind:wt,data:t}),o&&o.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var t=this;t._datas.size()>0&&(t._datas.each(function(t){t._21I(c)}),t._datas.clear(),t._dataMap={},t._roots.clear(),t._rootMap={},t._78O={},t._36I.fire({kind:xt}))},contains:function(t){return t&&t._dataModel===this},handleDataPropertyChange:function(t){var e=this,i=t.data,n=t.property;if("parent"===n){var o=i._id,r=e._rootMap,a=e._roots;i._parent?r[o]&&(delete r[o],a.remove(i)):r[o]||(r[o]=i,a.add(i))}else if("tag"===n){var s=t.oldValue,l=t.newValue,h=e._78O;s!=c&&delete h[s],l!=c&&(h[l]=i)}this.onDataPropertyChanged(i,t),this._35I.fire(t)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(t,e,i){this._36I.add(t,e,i)},removeDataModelChangeListener:function(t,e){this._36I.remove(t,e)},addDataPropertyChangeListener:function(t,e,i){this._35I.add(t,e,i)},removeDataPropertyChangeListener:function(t,e){this._35I.remove(t,e)},_38I:function(t,e,i){this._37I&&this._37I.fire({data:t,oldIndex:e,newIndex:i})},addHierarchyChangeListener:function(t,e,i){this._37I||(this._37I=new Ws),this._37I.add(t,e,i)},removeHierarchyChangeListener:function(t,e){this._37I.remove(t,e)},getSiblings:function(t){var e=t._parent;return e?e._children:this._roots},eachByDepthFirst:function(t,e,i){if(e)this._11I(t,e,i);else for(var n=0,o=this._roots,r=o.size();r>n;n++)if(!1===this._11I(t,o.get(n),i))return},_11I:function(t,e,i){for(var n=e.size(),o=0;n>o;o++)if(!1===this._11I(t,e.getChildAt(o),i))return!1;if(i){if(!1===t.call(i,e))return!1}else if(!1===t(e))return!1;return!0},eachByBreadthFirst:function(t,e,i){var n=new Fs;for(e?n.add(e):this._roots.each(n.add,n);n.size()>0;)if(e=n.removeAt(0),e.eachChild(n.add,n),i){if(!1===t.call(i,e))return!1}else if(!1===t(e))return!1;return!0},moveTo:function(t,e){var i=this.getSiblings(t),n=i.indexOf(t);n===e||0>n||e>=0&&e<=i.size()&&(i.remove(t),e>i.size()&&e--,i.add(t,e),this._38I(t,n,e))},moveUp:function(t){this.moveTo(t,this.getSiblings(t).indexOf(t)-1)},moveDown:function(t){this.moveTo(t,this.getSiblings(t).indexOf(t)+1)},moveToTop:function(t){this.moveTo(t,0)},moveToBottom:function(t){this.moveTo(t,this.getSiblings(t).size())},moveSelectionUp:function(t){t||(t=this.sm());var e=new Fs;cr(t,e,this._roots),e.each(this.moveUp,this)},moveSelectionDown:function(t){t||(t=this.sm());var e=new Fs;hr(t,e,this._roots),e.each(this.moveDown,this)},moveSelectionToTop:function(t){t||(t=this.sm());var e=new Fs;lr(t,e,this._roots),e.each(this.moveToTop,this)},moveSelectionToBottom:function(t){t||(t=this.sm());var e=new Fs;sr(t,e,this._roots),e.each(this.moveToBottom,this)},addScheduleTask:function(e){var i=this;i.removeScheduleTask(e),e.enabled==c&&(e.enabled=!0),e.interval==c&&(e.interval=10),e.action==c&&(e.action=Ei),e.lastTime=Date.now(),i._29Q.push(e),i._30Q==c&&(i._30Q=t.requestAnimationFrame(i._scheduleCallback))},removeScheduleTask:function(e){var i=this,n=i._29Q,o=n.indexOf(e);o>=0&&n.splice(o,1),n.length||i._30Q==c||(t.cancelAnimationFrame(i._30Q),delete i._30Q)}});var Ns=h.SelectionModel=function(t){var e=this;e._68O=$,e._map={},e._73O=new Fs,e._74I=new Ws,e._21I(t)};ns("SelectionModel",e,{ms_fire:1,ms_dm:1,ms:function(t,e,i){this.addSelectionChangeListener(t,e,i)},ums:function(t,e){this.removeSelectionChangeListener(t,e)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===J},co:function(t){return this._map[t._id]!=c},ss:function(t){this.setSelection(t)},as:function(t){this.appendSelection(t)},rs:function(t){this.removeSelection(t)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(t){var e=this;if(e._68O!==t&&(t===ht||t===J||t===$)){e.cs();var i=e._68O;e._68O=t,e.fp("selectionMode",i,t)}},_21I:function(t){var e=this,i=e._dataModel;i!==t&&(i&&(e.cs(),i.umm(e.handleDataModelChange,e)),e._dataModel=t,t.mm(e.handleDataModelChange,e,!0),e.fp(Te,i,t))},dispose:function(){var t=this;t.cs(),t._dataModel.umm(t.handleDataModelChange,t)},handleDataModelChange:function(t){var e=this;if(t.kind===wt){var i=t.data;e.co(i)&&(e._73O.remove(i),delete e._map[i._id],e._75I(wt,new Fs(i)))}else t.kind===xt&&e.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(t){var e=this;if(e._filterFunc!==t){e.cs();var i=e._filterFunc;e._filterFunc=t,e.fp("filterFunc",i,e._filterFunc)}},_75I:function(t,e,i,n){i&&(this._73O.each(function(t){n[t._id]?i.remove(t):i.add(t)}),e=i.toList()),this._74I.fire({kind:t,datas:new Fs(e)})},addSelectionChangeListener:function(t,e,i){this._74I.add(t,e,i)},removeSelectionChangeListener:function(t,e){this._74I.remove(t,e)},_97O:function(t,e){for(var i,n=this,o=0,r=new Fs(t);o<r.size();o++)i=r.get(o),(n._filterFunc&&!n._filterFunc(i)||e&&n.co(i)||!e&&!n.co(i)||!n._dataModel.contains(i))&&(r.removeAt(o),o--);return r},appendSelection:function(t){var e=this;if(e._68O!==ht){var i,n,o=e._73O,r=e._97O(t,!0);r.isEmpty()||(e.sg()&&(i=new Fs(o),n=e._map,o.clear(),e._map={},r=new Fs(r.get(r.size()-1))),r.each(function(t){o.add(t),e._map[t._id]=t}),e._75I("append",r,i,n))}},removeSelection:function(t){var e=this,i=e._97O(t),n=0,o=i.size();if(0!==o){for(;o>n;n++){var r=i.get(n);e._73O.remove(r),delete e._map[r._id]}e._75I(wt,i)}},toSelection:function(t,e){return this._73O.toList(t,e)},getSelection:function(){return this._73O},each:function(t,e){this._73O.each(t,e)},setSelection:function(t){var e=this,i=e._73O;if(e._68O!==ht&&!(i.isEmpty()&&!t||1===i.size()&&e.ld()===t)){var n=new Fs(i),o=e._map;i.clear(),e._map={};var r=e._97O(t,!0);e.sg()&&r.size()>1&&(r=new Fs(r.get(r.size()-1))),r.each(function(t){i.add(t),e._map[t._id]=t}),e._75I("set",c,n,o)}},clearSelection:function(){var t=this,e=t._73O;if(e.size()>0){var i=e.toList();e.clear(),t._map={},t._75I(xt,i)}},selectAll:function(){var t=this;if(t._68O!==ht){var e,i,n=t._dataModel.toDatas();if(t._filterFunc)for(e=0;e<n.size();e++)i=n.get(e),t._filterFunc(i)||(n.removeAt(e),e--);var o=t._73O,r=new Fs(o),a=t._map;o.clear(),t._map={},t.sg()&&n.size()>1&&(n=new Fs(n.get(n.size()-1)));var s=n.size();for(e=0;s>e;e++)i=n.get(e),o.add(i),t._map[i._id]=i;t._75I("all",c,r,a)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(t){return this._map[t._id]!=c},getLastData:function(){var t=this._73O;return t.size()>0?t.get(t.size()-1):c},getFirstData:function(){var t=this._73O;return t.size()>0?t.get(0):c},isSelectable:function(t){var e=this;return!(!t||e._68O===ht)&&(!e._filterFunc||e._filterFunc(t))}}),vn(d,{edgeGroupAgentFunc:c,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:g.rectSelectBorder,graphViewRectSelectBackground:_r,graphViewEditPointSize:q?17:7,graphViewEditPointBorderColor:g.editPointBorder,graphViewEditPointBackground:g.editPointBackground,setEdgeType:function(t,e,i){Ii[t]=e,Oi[t]=i},getEdgeType:function(t){return Ii[t]}},!0),vn(f,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":i,"image.stretch":"fill",icons:i,ingroup:!0,"body.color":i,opacity:i,pixelPerfect:!0,"select.color":Dr,"select.width":1,"select.padding":2,"select.type":vt,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":Dr,"border.color":i,"border.width":2,"border.padding":2,"border.type":vt,label:i,"label.font":i,"label.color":Kr,"label.background":i,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":i,"label.max":i,"label.opacity":i,"label.scale":1,"label.align":i,label2:i,"label2.font":i,"label2.color":Kr,"label2.background":i,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":i,"label2.max":i,"label2.opacity":i,"label2.scale":1,"label2.align":i,note:i,"note.expanded":!0,"note.font":i,"note.color":ta,"note.background":Dr,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":i,"note.toggleable":!0,"note.border.width":1,"note.border.color":i,"note.opacity":i,"note.scale":1,"note.align":i,note2:i,"note2.expanded":!0,"note2.font":i,"note2.color":ta,"note2.background":Dr,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":i,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":i,"note2.opacity":i,"note2.scale":1,"note2.align":i,"group.type":i,"group.image":i,"group.image.stretch":"fill","group.repeat.image":i,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":i,"group.title.color":ta,"group.title.background":g.groupTitleBackground,"group.title.align":et,"group.background":g.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":i,"group.border.color":Tr,"group.border.cap":Jr,"group.border.join":$r,"group.gradient":c,"group.gradient.color":"#FFF",shape:i,"shape.background":Tr,"shape.repeat.image":i,"shape.border.width":0,"shape.border.color":Tr,"shape.border.3d":!1,"shape.border.3d.color":i,"shape.border.3d.accuracy":i,"shape.border.cap":Jr,"shape.border.join":$r,"shape.border.pattern":i,"shape.gradient":c,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":Zr,"shape.dash.offset":0,"shape.dash.color":pr,"shape.dash.width":i,"shape.dash.3d":!1,"shape.dash.3d.color":i,"shape.dash.3d.accuracy":i,"shape.polygon.side":6,"shape.arc.from":D,"shape.arc.to":E,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":i,"edge.type":i,"edge.points":i,"edge.segments":i,"edge.color":Tr,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":i,"edge.3d.accuracy":i,"edge.cap":Jr,"edge.join":$r,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":i,"edge.dash":!1,"edge.dash.pattern":Zr,"edge.dash.offset":0,"edge.dash.color":pr,"edge.dash.width":i,"edge.dash.3d":!1,"edge.dash.3d.color":i,"edge.dash.3d.accuracy":i,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":i,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":i,"grid.column.percents":i,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":g.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":g.gridCellBorderColor,"grid.block":i,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":g.gridBlockColor},!0),vn(Us,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(t){this._5I=t},_76I:function(t,e,i){this._39I&&this._39I.fire({data:t,oldIndex:e,newIndex:i})},addIndexChangeListener:function(t,e,i){var n=this;n._39I||(n._39I=new Ws),n._39I.add(t,e,i)},removeIndexChangeListener:function(t,e){this._39I.remove(t,e)},prepareRemove:function(t){cn(t)&&(t.setSource(c),t.setTarget(c)),t._70O&&t._70O.toList().each(this.remove,this),t._69O&&t._69O.toList().each(function(t){t.setHost(c)}),t._host&&t.setHost(c)},onAdded:function(t){this.isAutoAdjustIndex()&&this._76O(t)},onDataPropertyChanged:function(t,e){Ys[e.property]&&this.isAutoAdjustIndex()&&this._76O(t)},isAdjustable:function(t){return ln(t)||cn(t)},isAdjustedToBottom:function(t){return!!hn(t)&&(t.isExpanded()&&ol(t))},_76O:function(t){var e=this;e.isAdjustedToBottom(t)?(e.sendToBottom(t),t.eachChild(e._76O,e)):e.sendToTop(t)},sendToTop:function(t){var e=this;if(e.contains(t)&&e.isAdjustable(t)){var i=e._datas;if(t!==i.get(e.size()-1)){var n=i.indexOf(t);i.removeAt(n),i.add(t),e._76I(t,n,e.size()-1)}if(cn(t)){var o=t._40I;o&&!e.isAdjustedToBottom(o)&&e.sendToTop(o),(o=t._41I)&&!e.isAdjustedToBottom(o)&&e.sendToTop(o)}t._69O&&t._69O.each(function(i){i.isRelatedTo(t)||ln(t)&&i.isLoopedHostOn(t)||e.sendToTop(i)}),t.ISubGraph||(!hn(t)||t.isExpanded())&&t._adjustChildrenToTop&&t.eachChild(function(t){cn(t)||e.sendToTop(t)})}},sendToBottom:function(t,e){var i=this;if(t!==e&&i.contains(t)&&i.isAdjustable(t)&&(!e||i.contains(e))){var n=i._datas,o=n.remove(t),r=e?i._datas.indexOf(e):0;if(n.add(t,r),o!==r){i._76I(t,o,r);var a=t._parent;!a||a.ISubGraph||cn(a)||i.sendToBottom(t._parent,t)}}}}),vn(Wr,{ms_edit:function(t){t._46O=function(t){var e=this,i=e.gv.dm(),n=i.getHistoryManager(),o=e._index,r=e._89I,a=e._node,s=e._shape,l=e._edge,c=e._77I;a&&r?(this.fi({kind:"endEditRect",event:t,data:a,direction:r}),n&&n.endInteraction()):s&&o>=0?(e.fi({kind:"endEditPoint",event:t,data:s,index:o}),n&&n.endInteraction()):l&&o>=0?(e.fi({kind:"endEditPoint",event:t,data:l,index:o}),n&&n.endInteraction()):c&&(e.fi({kind:"endEditRotation",event:t,data:c}),n&&n.endInteraction())},t._78I=function(t){var e=this;e.autoScroll(t);var i=e.gv.lp(t),n=e._index,o=e._89I,r=e._node,a=e._shape,s=e._edge,l=e._77I;if(r&&o)e._80O(i),e.fi({kind:"betweenEditRect",event:t,data:r,direction:o});else if(a&&n>=0)i.e=a.getPoints().get(n).e,a.setPoint(n,i),e.fi({kind:"betweenEditPoint",event:t,data:a,index:n});else if(s&&n>=0){var h=s.s(Nt);i.e=h.get(n).e,h.set(n,i),s.fp(Nt,c,h),e.fi({kind:"betweenEditPoint",event:t,data:s,index:n})}else if(l){var u=l.p(),d=k+M(i.y-u.y,i.x-u.x);C(d)<.04&&(d=0),l.setRotation(d),e.fi({kind:"betweenEditRotation",event:t,data:l})}},t._80O=function(t){var e=this,i=e._rect,n=i.x,o=i.y,r=i.width,a=i.height,s=e._89I;"northwest"===s?i=Wa(t,{x:n+r,y:o+a}):s===ct?i=Wa({x:n,y:t.y},{x:n+r,y:o+a}):"northeast"===s?i=Wa({x:n,y:t.y},{x:t.x,y:o+a}):s===lt?i=Wa({x:t.x,y:o},{x:n+r,y:o+a}):s===st?i=Wa({x:n,y:o},{x:t.x,y:o+a}):"southwest"===s?i=Wa({x:t.x,y:o},{x:n+r,y:t.y}):"south"===s?i=Wa({x:n,y:o},{x:n+r,y:t.y}):"southeast"===s&&(i=Wa({x:n,y:o},t)),e._node.setRect(i)},t._80I=function(t,e,i,n,o){var r=this,a=r.gv.getEditPointSize()+2;return!!Ua({x:e-a/2,y:i-a/2,width:a,height:a},t)&&(r._89I!==n&&(r.setCursor(o),r._89I=n),!0)},t._79I=function(t,e,i){var n=this,o=n.gv,r=e?o.getDataUI(e):c,a=r?r._55O:c;if(a){var s,l,h,u=o.getEditPointSize()+2,d=o.lp(t);if(ln(e)){if(a._56O&&ln(e)&&(l=a._98o,Ua({x:l.x-u/2,y:l.y-u/2,width:u,height:u},d)))return n._77I=e,i&&n.fi({kind:"beginEditRotation",event:t,data:e}),n.setCursor("crosshair"),!0;if(a._43O&&e instanceof _c)for(h=e.getPoints(),s=h.size()-1;s>=0;s--)if(l=h.get(s),Ua({x:l.x-u/2,y:l.y-u/2,width:u,height:u},d))return n._index=s,n._shape=e,i&&n.fi({kind:"beginEditPoint",event:t,data:e,index:s}),n.setCursor("crosshair"),!0;if(a._42O){var f=e.getRect(),g=f.x,v=f.y,_=f.width,p=f.height;if(n._80I(d,g,v,"northwest","nwse-resize")||n._80I(d,g+_/2,v,ct,Ge)||n._80I(d,g+_,v,"northeast","nesw-resize")||n._80I(d,g,v+p/2,lt,Qe)||n._80I(d,g+_,v+p/2,st,Qe)||n._80I(d,g,v+p,"southwest","nesw-resize")||n._80I(d,g+_/2,v+p,"south",Ge)||n._80I(d,g+_,v+p,"southeast","nwse-resize"))return n._node=e,n._rect=e.getRect(),i&&n.fi({kind:"beginEditRect",event:t,data:e,direction:n._89I}),!0}}if(a._43O&&cn(e)&&e.s(Qt)===Et&&(h=e.s(Nt)))for(s=h.size()-1;s>=0;s--)if(l=h.get(s),Ua({x:l.x-u/2,y:l.y-u/2,width:u,height:u},d))return n._index=s,n._edge=e,i&&n.fi({kind:"beginEditPoint",event:t,data:e,index:s}),n.setCursor("crosshair"),!0}return!1}},ms_gv:function(t){t._currentSubGraph=c,t.upSubGraph=function(){this.setCurrentSubGraph(il(this._currentSubGraph))},t.isVisible=function(t){var e=this;if(il(t)!==e._currentSubGraph)return!1;if(cn(t)){var i=t._40I,n=t._41I;if(!i||!n)return!1;if(!(t.s("edge.independent")||e.isVisible(i)&&e.isVisible(n)))return!1;if(t.isEdgeGroupHidden())return!1}else for(var o=t._parent;o&&!o.ISubGraph;){if(hn(o)&&(!o.isExpanded()||!e.isVisible(o)))return!1;o=o._parent}if(e instanceof rd){if(!t.s("3d.visible"))return!1}else if(!t.s("2d.visible"))return!1;return!e._visibleFunc||e._visibleFunc(t)},t._16o=function(t){var e=this;t.datas.each(function(t){e.invalidateData(t);var i=t._parent;hn(i)&&ln(t)&&t.s(Ot)&&(e.invalidateData(i),i._49I&&i._49I.each(function(t){e.invalidateData(t)}))}),e.onSelectionChanged(t)},t.onSelectionChanged=function(t){var e=this,i=e.sm();if(1===i.size()&&("set"===t.kind||"append"===t.kind)){var n=i.ld();e.isAutoMakeVisible()&&e.makeVisible(n),e._76O&&e._dataModel.isAutoAdjustIndex()&&e._76O(n)}},t.makeVisible=function(t){if(t){var e=this;if(e.getDataUI?e.getDataUI(t):e.getData3dUI(t)){var i=t,n=il(t);for(n!==e._currentSubGraph&&e.setCurrentSubGraph(n);(i=i._parent)&&i!==n;)hn(i)&&i.setExpanded(!0);e._23I=t,e.iv()}}},t.getLabel=function(t){var e=t.getStyle(Mt);return e===i?t.getName():e},t.getLabelBackground=function(t){return t.getStyle("label.background")},t.getLabelColor=function(t){return t.getStyle("label.color")},t.getLabel2=function(t){return t.getStyle("label2")},t.getLabel2Background=function(t){return t.getStyle("label2.background")},t.getLabel2Color=function(t){return t.getStyle("label2.color")},t.getNote=function(t){return t.getStyle(Lt)},t.getNoteBackground=function(t){return t.getStyle("note.background")},t.getNote2=function(t){return t.getStyle(jt)},t.getNote2Background=function(t){return t.getStyle("note2.background")},t.handleClick=function(t,e,i){var n=this;e?(n.fi({kind:"clickData",event:t,data:e,part:i}),n.onDataClicked(e,t)):(n.fi({kind:"clickBackground",event:t}),n.onBackgroundClicked(t))},t.handleDoubleClick=function(t,e,i){var n=this;Ma(t)&&(e?(n.fi({kind:"doubleClickData",event:t,data:e,part:i}),n.onDataDoubleClicked(e,t,i),n.checkDoubleClickOnNote(t,e,i)||n.checkDoubleClickOnRotation&&n.checkDoubleClickOnRotation(t,e,i)||(cn(e)?n.onEdgeDoubleClicked(e,t,i):e.ISubGraph?n.onSubGraphDoubleClicked(e,t,i):hn(e)?n.onGroupDoubleClicked(e,t,i):e.IDoorWindow?n.onDoorWindowDoubleClicked(e,t,i):e.ICSGBox&&n.onCSGBoxDoubleClicked(e,t,i))):(n.fi({kind:"doubleClickBackground",event:t}),n.onBackgroundDoubleClicked(t)))},t.onSubGraphDoubleClicked=function(t){this.setCurrentSubGraph(t)},t.onEdgeDoubleClicked=function(t,e){t.ISubGraph&&!Ra(e)?this.setCurrentSubGraph(t):t.s("edge.toggleable")&&t.toggle()},t.onGroupDoubleClicked=function(t){t.s("group.toggleable")&&t.toggle()},t.onDoorWindowDoubleClicked=function(t){t.s("dw.toggleable")&&t.toggle(!0)},t.onCSGBoxDoubleClicked=function(t,e){var i=this;if(i instanceof rd){var n=i.getHitFaceInfo(e);n&&n.face&&t.s(n.face+".toggleable")&&t.toggleFace(n.face,!0)}},t.onBackgroundClicked=function(){},t.onBackgroundDoubleClicked=function(){this.upSubGraph()},t.onDataClicked=function(){},t.onDataDoubleClicked=function(){},t.onAutoLayoutEnded=function(){},t.onMoveEnded=function(){},t.onPanEnded=function(){},t.onPinchEnded=function(){},t.onRectSelectEnded=function(){},t.onZoomEnded=function(){}},ms_icons:function(t){t.getRotation=function(t){return t==c?0:t},t._15O=function(){var t=this,e=t.s(Rt);if(e){var i=t,n=t.data||t._data,o=t._38o={icons:e,rects:{}};for(var r in e){var a=e[r],s=Rs(a.shape3d,n,i);if(!(!1===Rs(a.visible,n,i)||Rs(a.for3d,n,i)&&!t.I3d||s&&!t.I3d)){var l=s?[s]:Rs(a.names,n,i),h=l?l.length:0,u=Rs(a.position,n,i)||3,d=Rs(a.offsetX,n,i)||0,f=Rs(a.offsetY,n,i)||0,g=Rs(a.direction,n,i)||st,v=Rs(a.gap,n,i),_=v!=c?v:1,p=Rs(a.rotation,n,i),b=Rs(a.keepOrien,n,i),m=Rs(a.rotationFixed,n,i)?p:t.getRotation(p,b,u),y=c,w=o.rects[r]=new Array(h);w.rotation=m;for(var x=0;h>x;x++){var C,I,O,S,T=l[x];if(s)O=0,S=0;else{var V=ma(T);O=Rs(a.width,n,i),S=Rs(a.height,n,i),O==c&&(O=Ls(V,n)),S==c&&(S=js(V,n))}if(y?g===st?d+=O/2:g===lt?d-=O/2:g===ct?f-=S/2:f+=S/2:y={width:O,height:S},t.I3d){var D=-O/2,E=-S/2;I={width:O,height:S,mat:t._16O(Rs(a.autorotate,n,i),u,y,Rs(a.face,n,i)||K,Rs(a.t3,n,i),Rs(a.r3,n,i),Rs(a.rotationMode,n,i),d,f),vs:new ss([D,-E,0,D,-E-S,0,D+O,-E-S,0,D+O,-E,0])}}else C=t.getPosition(u,d,f,y,Rs(a.positionFixed,n,i)),I={x:C.x-O/2,y:C.y-S/2,width:O,height:S},t._68o(I,m);w[x]=I,g===st?d+=O/2+_:g===lt?d-=O/2+_:g===ct?f-=S/2+_:f+=S/2+_}}}}}}});var Qs={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Gs={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Xs={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Ys={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},qs={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},Zs={"edge.type":1,"edge.group":1},Js={rotation:1,rotationX:1,rotationZ:1},$s={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},Ks={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},tl={shape:1,thickness:1,position:1},el=function(t,e){if(!t||!hn(e)||e.isEmpty())return!1;for(t=t._parent;hn(t);){if(t===e)return!0;t=t._parent}return!1},il=function(t){if(!t)return c;if(cn(t)){var e=t._40I,i=t._41I;if(!e||!i)return c;var n=il(e);return n===il(i)?n:c}for(var o=t._parent;cn(o)&&!o.ISubGraph;)o=o._parent;return o?o.ISubGraph?o:il(o):c},nl=function(t,e,i,n){var o=e.getStyle(i)*n;o&&Ya(t,o),o=e.getStyle(i+".left")*n,o&&(t.x-=o,t.width+=o),o=e.getStyle(i+".right")*n,o&&(t.width+=o),o=e.getStyle(i+".top")*n,o&&(t.y-=o,t.height+=o),o=e.getStyle(i+".bottom")*n,o&&(t.height+=o),t.width<0&&(t.width=-t.width,t.x-=t.width),t.height<0&&(t.height=-t.height,t.y-=t.height)},ol=function(t){for(var e,i=0,n=t.size();n>i;i++)if(e=t.getChildAt(i),ln(e)&&ol(e))return!0;return t.hasAgentEdges()},rl=function(t){if(!t)return c;for(var e=t._parent;hn(e);){if(!hn(e._parent))return e.isExpanded()?t:e;e.isExpanded()||(t=e),e=e._parent}return t},al=function(t,e){if(!t||!e)return c;var i,n,o,r=il(t),a=il(e);if(r!==a){for(;a&&r!==a;)a=il(a);if(r===a)return t;i=new Fs,i.add(t,0);for(var s=t._parent;ln(s)&&!e.isDescendantOf(s);)i.add(s,0),s=s._parent;for(o=i.size(),n=0;o>n;n++){var l=i.get(n);if(hn(l)&&!l.isExpanded())return l;if(l.ISubGraph)return l}return t}return t},sl=function(t){if(t.isLooped())return t._source;var e=rl(t._source),i=rl(t._target);return e===i?t._source:al(e,i)},ll=function(t){if(t.isLooped())return t._target;var e=rl(t._source),i=rl(t._target);return e===i?t._target:al(i,e)},cl=function(t,e){var i;if(hn(e)&&e.isExpanded()){var n=t.getDataUI(e);n&&n._88I&&(i=n._88I.rect)}return i||e.getRect()},hl=function(t,e,i,n,o){return e?(i=fr(i,cl(t,e)),i.x+=n,i.y+=o,i):c},ul=function(t,e){if(!t||!e)return c;var i,n,o,r,a,s;if(t===e){if(!(r=t.getLoopedEdges()))return c;r=new Fs(r)}else{if(a=t.getAgentEdges(),s=e.getAgentEdges(),!a||!s)return c;for(n=a.size(),i=0;n>i;i++)o=a.get(i),s.contains(o)&&(r||(r=new Fs),r.add(o))}if(r)for(i=0;i<r.size();i++)o=r.get(i),o.getStyle(Qt)===Et&&(o._22I(c),r.removeAt(i),i--);return r},dl=function(t,e){var i=ul(t,e);if(i&&!i.isEmpty()){if(1===i.size())return void i.get(0)._22I(c);var n=new Fs,o=new Fs;i.each(function(t){var e=t.s("edge.group");n.contains(e)||n.add(e)}),n.sort(),n.each(function(t){o.add(new h.EdgeGroup(i.toList(function(e){return t===e.s("edge.group")}),o))}),o.each(function(t){t.each(function(e){e._22I(t)})})}},fl=function(t,e){if(e){var i=e.rect,n=e.color,o=e.rotation,r=e.labelWidth,a=e.background,s=e.opacity,l=e.scale,h=l!=c&&1!==l;if(s!=c){var u=t.globalAlpha;t.globalAlpha*=s}if(o||h){t.save();var d=i.x+i.width/2,f=i.y+i.height/2;$n(t,d,f),o&&Kn(t,o),h&&t.scale(l,l),$n(t,-d,-f)}if(a&&Qo(t,i.x,i.y,i.width,i.height,a),r){var g=i.width,v=t.createLinearGradient(i.x,i.y,i.x+g,i.y);v.addColorStop(0,n),v.addColorStop(.9,n),v.addColorStop(1,Fe),n=v,i.width=r}Qn(t,e.ss,i,e.font,n,e.align),r&&(i.width=g),(o||h)&&t.restore(),s!=c&&(t.globalAlpha=u)}},gl=function(t,e){if(e){var i=e.rect,n=i.x,o=i.y,r=i.width,a=i.height,s=e.background,l=e.backgroundImage,h=e.borderWidth,u=e.borderColor,d=e.labelWidth,f=e.opacity,g=e.scale,v=g!=c&&1!==g;if(f!=c){var _=t.globalAlpha;t.globalAlpha*=f}if(v){t.save();var p=i.x+i.width/2,b=i.y+i.height/2;$n(t,p,b),t.scale(g,g),$n(t,-p,-b)}if(e.expanded){var m=x(8,r/4),y=o+a-8;if(t.fillStyle=s,t.beginPath(),t.moveTo(n,o),t.lineTo(n,y),t.lineTo(n+r/2,y),t.lineTo(n+r/2,o+a),t.lineTo(n+r/2+m,y),t.lineTo(n+r,y),t.lineTo(n+r,o),t.closePath(),t.fill(),h&&(t.lineWidth=h,t.lineJoin="round",t.lineCap="round",t.strokeStyle=u||Ea(s),t.beginPath(),t.moveTo(n+r,o),t.lineTo(n+r,y),t.lineTo(n+r/2+m,y),t.lineTo(n+r/2,o+a),t.stroke(),t.strokeStyle=u||Da(s),t.beginPath(),t.moveTo(n+r,o),t.lineTo(n,o),t.lineTo(n,y),t.lineTo(n+r/2,y),t.lineTo(n+r/2,o+a),t.stroke()),l)wa(t,ma(l),ze,i.x,i.y,i.width,i.height-8,e.data,e.view);else{if(i.height-=8,s=e.color,d){var w=r,C=t.createLinearGradient(n,o,n+w,o);C.addColorStop(0,s),C.addColorStop(.9,s),C.addColorStop(1,Fe),s=C,i.width=d}Qn(t,e.ss,i,e.font,s,e.align),d&&(i.width=w),i.height+=8}}else if(e.icon)zs(t,ma(e.icon),n,o,r,a,e.data,e.view);else{var I=r/2;h&&(t.lineWidth=h,t.lineJoin="round",t.lineCap="round",t.strokeStyle=u||Ea(s),t.beginPath(),t.arc(n+I,o+I,I,k,1.6*D,!0),t.moveTo(n+I,o+a),t.lineTo(n+r-I/5,o+I),t.stroke(),t.strokeStyle=u||Da(s),t.beginPath(),t.arc(n+I,o+I,I,1.6*D,k,!0),t.moveTo(n+I,o+a),t.lineTo(n+I/5,o+I),t.stroke()),t.fillStyle=s,t.beginPath(),t.arc(n+I,o+I,I,0,E,!0),t.moveTo(n+I,o+a),t.lineTo(n+r-I/5,o+I),t.lineTo(n+I/5,o+I),t.closePath(),t.fill(),t.fillStyle=e.color,t.beginPath(),t.arc(n+I,o+I,I/3,0,E,!0),t.fill()}v&&t.restore(),f!=c&&(t.globalAlpha=_)}},vl=function(t,e){return e>2*t?t:e/2},_l=function(t,e,i,n){if(!t||!e)return 0;var o=M(e.y-t.y,e.x-t.x);return i||(o=e.x<t.x?o+D:o),o+n},pl=function(t,e,i,n,o,r,a){a&&(t.x>e.x||t.x===e.x&&t.y>e.y)&&(i=dr[i],o=-o);var s=fr(i,{x:0,y:0,width:Aa(t,e),height:0},r);return s.x+=n,s.y+=o,s=new or(M(e.y-t.y,e.x-t.x)).tf(s),s.x+=t.x,s.y+=t.y,s},bl=function(t,e,i,n,o){if(t._19Q=!0,!i.getEdgeGroup())return n?i.s("edge.gap"):0;var r,a=0,s=0,l=0;if(i.getEdgeGroup().getSiblings().each(function(t){t.each(function(t){if(e.isVisible(t)&&t.s(Qt)==o){var n=t.s("edge.gap");r?(s+=l/2+n/2,l=n):(r=t,l=n),t===i&&(a=s)}})}),n)return s-a+l;var c=a-s/2;return r&&i._40I!==r._40I&&(t._19Q=!1),c},ml=function(){var t=function(t){var e=[];return t.forEach(function(t){e.push({x:t.x,y:t.y}),e.push({x:t.x+t.width,y:t.y+t.height}),e.push({x:t.x+t.width,y:t.y}),e.push({x:t.x,y:t.y+t.height})}),e};return function(e,i,n){if("oval"===e){var o=0,r=n.height/n.width,a=r*r,s=n.x+n.width/2,l=n.y+n.height/2,c=t(i);c.forEach(function(t){var e=t.x-s,i=t.y-l,n=e*e+i*i/a;n>o&&(o=n)}),o=y(o);var h=r*o;return{x:s-o,y:l-h,width:2*o,height:2*h}}if("circle"===e){var u=0,s=n.x+n.width/2,l=n.y+n.height/2,c=t(i);return c.forEach(function(t){var e=t.x-s,i=t.y-l,n=e*e+i*i;n>u&&(u=n)}),u=y(u),{x:s-u,y:l-u,width:2*u,height:2*u}}return"roundRect"===e?(Ya(n,x(n.width,n.height)/16),n):n}}(),yl=h.graph={},wl=function(t,e,i){is("ht.graph."+t,e,i)};h.layout={};var xl={comps:[{type:bt,points:[85,50,70,115,100,71,86,107,88,49,47,65,84,72,67,82,81,71,90,99,101,57,74,118,97,106,81,104,83,57,69,100,120,101,77,50,102,73,116,53,103,106,110,84,76,103,113,104,104,57,119,108,74,69,56,68,112,67,121,49,57,86,98,75],borderWidth:1,borderColor:c}]};xl[Ct]=xl[It]=160,ba("node_image",Ui(30,30,[{type:vt,rect:[4,5,22,16],gradient:Xr,gradientColor:Vr,background:Tr},{type:vt,rect:[2,3,26,20],borderWidth:1,borderColor:Tr},{type:vt,rect:[11,23,8,4],background:Tr},{type:vt,rect:[6,27,18,2],background:Tr}])),ba("node_icon",Ui(16,16,[{type:vt,rect:[2,2,12,10],gradient:Xr,gradientColor:Vr,background:Tr},{type:ft,rect:[2,2,12,10],width:1,color:Tr},{type:vt,rect:[6,12,4,2],background:Tr},{type:vt,rect:[4,14,8,1],background:Tr}])),ba("group_image",Ui(66,39,[{type:vt,rect:[44.3,18,18.1,12.8],gradient:Xr,gradientColor:Vr,background:Tr},{type:vt,rect:[3.3,17.8,18.1,12.8],gradient:Xr,gradientColor:Vr,background:Tr},{type:vt,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:Tr,gradient:Xr,gradientColor:Vr,background:Tr},{type:vt,rect:[26.2,29.4,12.8,4.2],background:Tr},{type:vt,rect:[21.3,33.5,22.5,2.3],background:Tr},{type:vt,rect:[5.3,32.7,14.1,2.1],background:Tr},{type:vt,rect:[9,30.4,6.7,2.4],background:Tr},{type:vt,rect:[50,30.7,6.7,2.4],background:Tr},{type:vt,rect:[46.3,33,14.1,2.1],background:Tr}])),ba("group_icon",Ui(16,16,[{type:vt,rect:[4,12,4,2],background:Tr},{type:vt,rect:[2,13,8,1],background:Tr},{type:vt,rect:[12,12,2,1],background:Tr},{type:vt,rect:[11,13,4,1],background:Tr},{type:vt,rect:[10,7,6,5],gradient:Xr,gradientColor:Vr,background:Tr},{type:vt,rect:[1,2,10,10],gradient:Xr,gradientColor:Vr,background:Tr},{type:ft,rect:[1,2,10,10],width:1,color:Tr}])),ba("edge_icon",Ui(16,16,[{type:vt,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Xr,gradientColor:Vr,background:Tr},{type:vt,rect:[10.8,1,4,4],background:Tr},{type:vt,rect:[1,11,4,4],background:Tr}])),ba("subGraph_image",Ui(72,45,[{type:bt,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Xr,gradientColor:Vr,background:Tr},{type:vt,rect:[29.6,30.7,3.6,1.8],background:Tr},{type:vt,rect:[28.4,32.3,6,1.2],background:Tr},{type:vt,rect:[37.3,32,10.8,1.8],background:Tr},{type:vt,rect:[39.1,29.9,7.2,2.3],background:Tr},{type:vt,rect:[26.6,23.7,9.6,7.2],gradient:Xr,gradientColor:Vr,background:Tr},{type:vt,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:Tr,gradient:Xr,gradientColor:Vr,background:Tr}])),ba("subGraph_icon",Ui(17,17,[{type:bt,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Xr,gradientColor:Vr,background:Tr}])),ba("shape_icon",Ui(16,16,[{type:bt,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:Tr}])),ba("polyline_icon",Ui(16,16,[{type:bt,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:Tr},Ni(7.5,.4),Ni(7.5,6.3),Ni(13.6,6.3),Ni(13.6,14),Ni(.7,13.9),Ni(.7,.3)])),ba("grid_icon",Ui(16,16,[{type:vt,rect:[1,1,4,4],background:Tr,gradient:Xr,gradientColor:Vr},{type:vt,rect:[6,1,4,4],background:Tr,gradient:Xr,gradientColor:Vr},{type:vt,rect:[11,1,4,4],background:Tr,gradient:Xr,gradientColor:Vr},{type:vt,rect:[11,6,4,4],background:Tr,gradient:Xr,gradientColor:Vr},{type:vt,rect:[6,6,4,4],background:Tr,gradient:Xr,gradientColor:Vr},{type:vt,rect:[1,6,4,4],background:Tr,gradient:Xr,gradientColor:Vr},{type:vt,rect:[11,11,4,4],background:Tr,gradient:Xr,gradientColor:Vr},{type:vt,rect:[6,11,4,4],background:Tr,gradient:Xr,gradientColor:Vr},{type:vt,rect:[1,11,4,4],background:Tr,gradient:Xr,gradientColor:Vr}])),ba("light_icon",Ui(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:Tr},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:Tr,gradient:Xr,gradientColor:Vr,background:{func:function(t){var e=t?t.s(Bc):c;return rn(e)?"rgb("+j(255*e[0])+","+j(255*e[1])+","+j(255*e[2])+")":e||Tr}}}]));var Cl=function(t,e){for(var i=t.vertices,n=0;n<i.length;n++){var o=i[n],r=o.y;o.y=o.z,o.z=-r,e&&(o.y+=e)}},Il=function(t){
for(var e,i,n,o,r,a,s=[],l=[],c=[],h=t.faces,u=0,d=0,f=0,g=h.length;g>u;u++,d+=6,f+=9){var v=h[u];1===v.i?(e||(e=[],i=[],n=[]),Ol(v,u,d,f,t,e,n,i)):2===v.i?(o||(o=[],r=[],a=[]),Ol(v,u,d,f,t,o,a,r)):Ol(v,u,d,f,t,s,c,l)}return{vs:s,uv:l,ns:c,top_vs:e,top_uv:i,top_ns:n,bottom_vs:o,bottom_uv:r,bottom_ns:a}},Ol=function(t,e,i,n,o,r,a,s){var l=o.vertices,c=o.faceVertexUvs,h=l[t.a],u=l[t.b],d=l[t.c];r[n]=h.x,r[n+1]=h.y,r[n+2]=h.z,r[n+3]=u.x,r[n+4]=u.y,r[n+5]=u.z,r[n+6]=d.x,r[n+7]=d.y,r[n+8]=d.z;var f=t.vertexNormals;if(3===f.length){var g=f[0],v=f[1],_=f[2];a[n]=g.x,a[n+1]=g.y,a[n+2]=g.z,a[n+3]=v.x,a[n+4]=v.y,a[n+5]=v.z,a[n+6]=_.x,a[n+7]=_.y,a[n+8]=_.z}else{var p=t.normal;a[n]=p.x,a[n+1]=p.y,a[n+2]=p.z,a[n+3]=p.x,a[n+4]=p.y,a[n+5]=p.z,a[n+6]=p.x,a[n+7]=p.y,a[n+8]=p.z}var b=c[0][e][0],m=c[0][e][1],y=c[0][e][2];s[i]=b.x,s[i+1]=b.y,s[i+2]=m.x,s[i+3]=m.y,s[i+4]=y.x,s[i+5]=y.y},Sl=function(t,e,i,n,o,r,a,s,l){i==c&&(i=!0),n==c&&(n=!0),a==c&&(a=1),s==c&&(s=0);var h=new Hl;return Wo(h,t,e,l),Il(new oc(h,{top:i,bottom:n,curveSegments:o,amount:a,repeatUVLength:r},-a/2+s))},Tl=function(t,e){this.x=t||0,this.y=e||0};Tl.prototype={constructor:Tl,add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},equals:function(t){return t.x===this.x&&t.y===this.y},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},distanceTo:function(t){return y(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},clone:function(){return new Tl(this.x,this.y)}};var Vl=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0};Vl.prototype={constructor:Vl,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setY:function(t){return this.y=t,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12],this.y=o[1]*e+o[5]*i+o[9]*n+o[13],this.z=o[2]*e+o[6]*i+o[10]*n+o[14],this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},length:function(){return y(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(t){var e=this.x,i=this.y,n=this.z;return this.x=i*t.z-n*t.y,this.y=n*t.x-e*t.z,this.z=e*t.y-i*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,o=t.z,r=e.x,a=e.y,s=e.z;return this.x=n*s-o*a,this.y=o*r-i*s,this.z=i*a-n*r,this},distanceTo:function(t){return y(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},clone:function(){return new Vl(this.x,this.y,this.z)}};var Dl=function(){this.elements=new Float32Array(16)};Dl.prototype={constructor:Dl,set:function(t,e,i,n,o,r,a,s,l,c,h,u,d,f,g,v){var _=this.elements;return _[0]=t,_[4]=e,_[8]=i,_[12]=n,_[1]=o,_[5]=r,_[9]=a,_[13]=s,_[2]=l,_[6]=c,_[10]=h,_[14]=u,_[3]=d,_[7]=f,_[11]=g,_[15]=v,this},makeRotationAxis:function(t,e){var i=I(e),n=S(e),o=1-i,r=t.x,a=t.y,s=t.z,l=o*r,c=o*a;return this.set(l*r+i,l*a-n*s,l*s+n*a,0,l*a+n*s,c*a+i,c*s-n*r,0,l*s-n*a,c*s+n*r,o*s*s+i,0,0,0,0,1),this}};var El=function(t){this.repeatUVLength=t};El.prototype={generateTopUV:function(t,e,i,n,o,r,a){var s,l,c,h,u=t.vertices,d=u[n].x,f=u[n].y,g=u[o].x,v=u[o].y,_=u[r].x,p=u[r].y,b=this.repeatUVLength;if(b)s=0,l=0,c=b,h=b;else{this._bb||(this._bb=e.getBoundingBox());var m=this._bb;s=m.minX,l=m.minY,c=m.maxX-s,h=m.maxY-l}return a?[new Tl((d-s)/c,(f-l)/h),new Tl((g-s)/c,(v-l)/h),new Tl((_-s)/c,(p-l)/h)]:[new Tl((d-s)/c,1-(f-l)/h),new Tl((g-s)/c,1-(v-l)/h),new Tl((_-s)/c,1-(p-l)/h)]},generateBottomUV:function(t,e,i,n,o,r){return this.generateTopUV(t,e,i,n,o,r,!0)},generateSideWallUV:function(t,e,i,n,o,r,a,s,l,c,h,u){if(!this._cl){for(var d,f,g=[],v=0,_=i.length,p=0;_>p;p++){d=i[p],f=i[(p+1)%_];var b=d.x-f.x,m=d.y-f.y,w=y(b*b+m*m);g.push(v),v+=w}for(var p=0;_>p;p++)g[p]/=v;this._cl=g}var g=this._cl,x=1-l/c,C=1-(l+1)/c,I=g[h],O=g[u];return O>I&&(I+=1),[new Tl(I,x),new Tl(O,x),new Tl(O,C),new Tl(I,C)]}};var kl=function(t,e,i,n,o,r){this.a=t,this.b=e,this.c=i,this.i=r,this.normal=n instanceof Vl?n:new Vl,this.vertexNormals=n instanceof Array?n:[]};kl.prototype={constructor:kl};var Pl=function(){},Ml=Pl.prototype;Ml.getPointAt=function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},Ml.getPoints=function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPoint(e/t));return i},Ml.getSpacedPoints=function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPointAt(e/t));return i},Ml.getLength=function(){var t=this.getLengths();return t[t.length-1]},Ml.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],o=this.getPoint(0),r=0;for(n.push(0),i=1;t>=i;i++)e=this.getPoint(i/t),r+=e.distanceTo(o),n.push(r),o=e;return this.cacheArcLengths=n,n},Ml.getUtoTmapping=function(t,e){var i,n=this.getLengths(),o=0,r=n.length;i=e||t*n[r-1];for(var a,s=0,l=r-1;l>=s;)if(o=b(s+(l-s)/2),0>(a=n[o]-i))s=o+1;else{if(!(a>0)){l=o;break}l=o-1}if(o=l,n[o]==i){var c=o/(r-1);return c}var h=n[o],u=n[o+1],d=u-h,f=(i-h)/d,c=(o+f)/(r-1);return c},Ml.getTangent=function(t){var e=t-1e-4,i=t+1e-4;0>e&&(e=0),i>1&&(i=1);var n=this.getPoint(e);return this.getPoint(i).clone().sub(n).normalize()},Ml.getTangentAt=function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},Pl.create=function(t,e){return t.prototype=Ln(Pl.prototype),t.prototype.getPoint=e,t};var Bl=function(){this.curves=[],this.autoClose=!1},Ll=Bl.prototype=Ln(Ml);Ll.add=function(t){this.curves.push(t)},Ll.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new ql(e,t))},Ll.getPoint=function(t){for(var e,i,n=t*this.getLength(),o=this.getCurveLengths(),r=0;r<o.length;){if(o[r]>=n){e=o[r]-n,i=this.curves[r];var a=1-e/i.getLength();return i.getPointAt(a)}r++}return null},Ll.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},Ll.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var t,e=[],i=0,n=this.curves.length;for(t=0;n>t;t++)i+=this.curves[t].getLength(),e.push(i);return this.cacheLengths=e,e},Ll.getTransformedPoints=function(t){return this.getPoints(t)},Ll.getBoundingBox=function(){var t,e,i,n,o,r,a=this.getPoints();t=e=Number.NEGATIVE_INFINITY,n=o=Number.POSITIVE_INFINITY;var s,l,c,h,u=a[0]instanceof Vl;for(h=u?new Vl:new Tl,l=0,c=a.length;c>l;l++)s=a[l],s.x>t&&(t=s.x),s.x<n&&(n=s.x),s.y>e&&(e=s.y),s.y<o&&(o=s.y),u&&(s.z>i&&(i=s.z),s.z<r&&(r=s.z)),h.add(s);var d={minX:n,minY:o,maxX:t,maxY:e};return u&&(d.maxZ=i,d.minZ=r),d};var jl=function(t){Bl.call(this),this.actions=[],t&&this.fromPoints(t)},Rl=jl.prototype=Ln(Bl.prototype),zl="moveTo",Fl="quadraticCurveTo",Al="bezierCurveTo",Wl="ellipse";Rl.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;i>e;e++)this.lineTo(t[e].x,t[e].y)},Rl.moveTo=function(){var t=Array.prototype.slice.call(arguments);this.actions.push({action:zl,args:t})},Rl.lineTo=function(t,e){var i=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,o=n[n.length-2],r=n[n.length-1],a=new ql(new Tl(o,r),new Tl(t,e));this.curves.push(a),this.actions.push({action:"lineTo",args:i})},Rl.quadraticCurveTo=function(t,e,i,n){var o=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,a=r[r.length-2],s=r[r.length-1],l=new Jl(new Tl(a,s),new Tl(t,e),new Tl(i,n));this.curves.push(l),this.actions.push({action:Fl,args:o})},Rl.bezierCurveTo=function(t,e,i,n,o,r){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,l=s[s.length-2],c=s[s.length-1],h=new $l(new Tl(l,c),new Tl(t,e),new Tl(i,n),new Tl(o,r));this.curves.push(h),this.actions.push({action:Al,args:a})},Rl.arc=function(t,e,i,n,o,r){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],l=a[a.length-1];this.absarc(t+s,e+l,i,n,o,r)},Rl.absarc=function(t,e,i,n,o,r){this.absellipse(t,e,i,i,n,o,r)},Rl.ellipse=function(t,e,i,n,o,r,a){var s=this.actions[this.actions.length-1].args,l=s[s.length-2],c=s[s.length-1];this.absellipse(t+l,e+c,i,n,o,r,a)},Rl.absellipse=function(t,e,i,n,o,r,a){var s=Array.prototype.slice.call(arguments),l=new Yl(t,e,i,n,o,r,a);this.curves.push(l);var c=l.getPoint(1);s.push(c.x),s.push(c.y),this.actions.push({action:Wl,args:s})},Rl.getSpacedPoints=function(t){t||(t=40);for(var e=[],i=0;t>i;i++)e.push(this.getPoint(i/t));return e},Rl.getPoints=function(t,e){t=t||12;var i,n,o,r,a,s,l,c,h,u,d,f,g,v,_,p,b,m,y=[];for(i=0,n=this.actions.length;n>i;i++)switch(o=this.actions[i],r=o.action,a=o.args,r){case zl:case"lineTo":y.push(new Tl(a[0],a[1]));break;case Fl:for(s=a[2],l=a[3],u=a[0],d=a[1],y.length>0?(v=y[y.length-1],f=v.x,g=v.y):(v=this.actions[i-1].args,f=v[v.length-2],g=v[v.length-1]),_=1;t>=_;_++)p=_/t,b=Nl.b2(p,f,u,s),m=Nl.b2(p,g,d,l),y.push(new Tl(b,m));break;case Al:for(s=a[4],l=a[5],u=a[0],d=a[1],c=a[2],h=a[3],y.length>0?(v=y[y.length-1],f=v.x,g=v.y):(v=this.actions[i-1].args,f=v[v.length-2],g=v[v.length-1]),_=1;t>=_;_++)p=_/t,b=Nl.b3(p,f,u,c,s),m=Nl.b3(p,g,d,h,l),y.push(new Tl(b,m));break;case"arc":var w,x=a[0],O=a[1],T=a[2],V=a[3],D=a[4],E=!!a[5],k=D-V,P=2*t;for(_=1;P>=_;_++)p=_/P,E||(p=1-p),w=V+p*k,b=x+T*I(w),m=O+T*S(w),y.push(new Tl(b,m));break;case Wl:var w,x=a[0],O=a[1],M=a[2],B=a[3],V=a[4],D=a[5],E=!!a[6],k=D-V,P=2*t;for(_=1;P>=_;_++)p=_/P,E||(p=1-p),w=V+p*k,b=x+M*I(w),m=O+B*S(w),y.push(new Tl(b,m))}var L=y[y.length-1];return C(L.x-y[0].x)<1e-10&&C(L.y-y[0].y)<1e-10&&y.splice(y.length-1,1),e&&y.push(y[0]),y},Rl.toShapes=function(t,e){function n(t){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i],r=new Hl;r.actions=o.actions,r.curves=o.curves,e.push(r)}return e}var o=function(t){var e,i,n,o,r,a=[],s=new jl;for(e=0,i=t.length;i>e;e++)n=t[e],r=n.args,o=n.action,o==zl&&0!=s.actions.length&&(a.push(s),s=new jl),s[o].apply(s,r);return 0!=s.actions.length&&a.push(s),a}(this.actions);if(0==o.length)return[];if(!0===e)return n(o);var r,a,s,l=[];if(1==o.length)return a=o[0],s=new Hl,s.actions=a.actions,s.curves=a.curves,l.push(s),l;var c=!Hl.Utils.isClockWise(o[0].getPoints());c=t?!c:c;var h,u=[],d=[],f=[],g=0;d[g]=i,f[g]=[];var v,_;for(v=0,_=o.length;_>v;v++)a=o[v],h=a.getPoints(),r=Nl.isClockWise(h),r=t?!r:r,r?(!c&&d[g]&&g++,d[g]={s:new Hl,p:h},d[g].s.actions=a.actions,d[g].s.curves=a.curves,c&&g++,f[g]=[]):f[g].push({h:a,p:h[0]});if(!d[0])return n(o);if(d.length>1){for(var p=!1,b=[],m=0,y=d.length;y>m;m++)u[m]=[];for(var m=0,y=d.length;y>m;m++){d[m];for(var w=f[m],x=0;x<w.length;x++){for(var I=w[x],O=!0,S=0;S<d.length;S++)(function(t,e){for(var i=e.length,n=!1,o=i-1,r=0;i>r;o=r++){var a=e[o],s=e[r],l=s.x-a.x,c=s.y-a.y;if(C(c)>1e-10){if(0>c&&(a=e[r],l=-l,s=e[o],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y==a.y){if(t.x==a.x)return!0}else{var h=c*(t.x-a.x)-l*(t.y-a.y);if(0==h)return!0;if(0>h)continue;n=!n}}else{if(t.y!=a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return n})(I.p,d[S].p)&&(m!=S&&b.push({froms:m,tos:S,hole:x}),O?(O=!1,u[S].push(I)):p=!0);O&&u[m].push(I)}}b.length>0&&(p||(f=u))}var T,V,D;for(v=0,_=d.length;_>v;v++)for(s=d[v].s,l.push(s),T=f[v],V=0,D=T.length;D>V;V++)s.holes.push(T[V].h);return l};var Hl=function(){jl.apply(this,arguments),this.holes=[]},Ul=Hl.prototype=Ln(Rl);Ul.getPointsHoles=function(t){var e,i=this.holes.length,n=[];for(e=0;i>e;e++)n[e]=this.holes[e].getTransformedPoints(t);return n},Ul.extractAllPoints=function(t){return{shape:this.getTransformedPoints(t),holes:this.getPointsHoles(t)}},Ul.extractPoints=function(t){return this.extractAllPoints(t)};var Nl={triangulateShape:function(t,e){function n(t,e,i){return t.x!=e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function o(t,e,i,o,r){var a=e.x-t.x,s=e.y-t.y,l=o.x-i.x,c=o.y-i.y,h=t.x-i.x,u=t.y-i.y,d=s*l-a*c,f=s*h-a*u;if(C(d)>1e-10){var g;if(d>0){if(0>f||f>d)return[];if(0>(g=c*h-l*u)||g>d)return[]}else{if(f>0||d>f)return[];if((g=c*h-l*u)>0||d>g)return[]}if(0==g)return!r||0!=f&&f!=d?[t]:[];if(g==d)return!r||0!=f&&f!=d?[e]:[];if(0==f)return[i];if(f==d)return[o];var v=g/d;return[{x:t.x+v*a,y:t.y+v*s}]}if(0!=f||c*h!=l*u)return[];var _=0==a&&0==s,p=0==l&&0==c;if(_&&p)return t.x!=i.x||t.y!=i.y?[]:[t];if(_)return n(i,o,t)?[t]:[];if(p)return n(t,e,i)?[i]:[];var b,m,y,w,x,I,O,S;return 0!=a?(t.x<e.x?(b=t,y=t.x,m=e,w=e.x):(b=e,y=e.x,m=t,w=t.x),i.x<o.x?(x=i,O=i.x,I=o,S=o.x):(x=o,O=o.x,I=i,S=i.x)):(t.y<e.y?(b=t,y=t.y,m=e,w=e.y):(b=e,y=e.y,m=t,w=t.y),i.y<o.y?(x=i,O=i.y,I=o,S=o.y):(x=o,O=o.y,I=i,S=i.y)),O>=y?O>w?[]:w==O?r?[]:[x]:S>=w?[x,m]:[x,I]:y>S?[]:y==S?r?[]:[b]:S>=w?[b,m]:[b,I]}function r(t,e,i,n){var o=e.x-t.x,r=e.y-t.y,a=i.x-t.x,s=i.y-t.y,l=n.x-t.x,c=n.y-t.y,h=o*s-r*a,u=o*c-r*l;if(C(h)>1e-10){var d=l*s-c*a;return h>0?u>=0&&d>=0:u>=0||d>=0}return u>0}for(var a,s,l,c,h,u,d={},f=t.concat(),g=0,v=e.length;v>g;g++)Array.prototype.push.apply(f,e[g]);for(a=0,s=f.length;s>a;a++)h=f[a].x+":"+f[a].y,d[h],d[h]=a;var _=function(t,e){for(var n,a,s,l,c,h,u,d,f,g,v,_=t.concat(),p=[],b=[],m=0,y=e.length;y>m;m++)p.push(m);for(var w=0,x=2*p.length;p.length>0&&!(0>--x);)for(s=w;s<_.length;s++){l=_[s],a=-1;for(var m=0;m<p.length;m++)if(h=p[m],u=l.x+":"+l.y+":"+h,b[u]===i){n=e[h];for(var C=0;C<n.length;C++)if(c=n[C],function(t,e){var i=_.length-1,o=t-1;0>o&&(o=i);var a=t+1;a>i&&(a=0);var s=r(_[t],_[o],_[a],n[e]);if(!s)return!1;var l=n.length-1,c=e-1;0>c&&(c=l);var h=e+1;return h>l&&(h=0),!!(s=r(n[e],n[c],n[h],_[t]))}(s,C)&&!function(t,e){var i,n,r;for(i=0;i<_.length;i++)if(n=i+1,n%=_.length,r=o(t,e,_[i],_[n],!0),r.length>0)return!0;return!1}(l,c)&&!function(t,i){var n,r,a,s,l;for(n=0;n<p.length;n++)for(r=e[p[n]],a=0;a<r.length;a++)if(s=a+1,s%=r.length,l=o(t,i,r[a],r[s],!0),l.length>0)return!0;return!1}(l,c)){a=C,p.splice(m,1),d=_.slice(0,s+1),f=_.slice(s),g=n.slice(a),v=n.slice(0,a+1),_=d.concat(g).concat(v).concat(f),w=s;break}if(a>=0)break;b[u]=!0}if(a>=0)break}return _}(t,e),p=Ql.Triangulate(_,!1);for(a=0,s=p.length;s>a;a++)for(c=p[a],l=0;3>l;l++)h=c[l].x+":"+c[l].y,(u=d[h])!==i&&(c[l]=u);return p.concat()},isClockWise:function(t){return Ql.Triangulate.area(t)<0},b2p0:function(t,e){var i=1-t;return i*i*e},b2p1:function(t,e){return 2*(1-t)*t*e},b2p2:function(t,e){return t*t*e},b2:function(t,e,i,n){return this.b2p0(t,e)+this.b2p1(t,i)+this.b2p2(t,n)},b3p0:function(t,e){var i=1-t;return i*i*i*e},b3p1:function(t,e){var i=1-t;return 3*i*i*t*e},b3p2:function(t,e){return 3*(1-t)*t*t*e},b3p3:function(t,e){return t*t*t*e},b3:function(t,e,i,n,o){return this.b3p0(t,e)+this.b3p1(t,i)+this.b3p2(t,n)+this.b3p3(t,o)}},Ql={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(t){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(t){var e=t.familyName.toLowerCase(),i=this;return i.faces[e]=i.faces[e]||{},i.faces[e][t.cssFontWeight]=i.faces[e][t.cssFontWeight]||{},i.faces[e][t.cssFontWeight][t.cssFontStyle]=t,i.faces[e][t.cssFontWeight][t.cssFontStyle]=t,t},drawText:function(t){var e,i=this.getFace(),n=this.size/i.resolution,o=0,r=String(t).split(""),a=r.length,s=[];for(e=0;a>e;e++){var l=new jl,c=this.extractGlyphPoints(r[e],i,n,o,l);o+=c.offset,s.push(c.path)}return{paths:s,offset:o/2}},extractGlyphPoints:function(t,e,i,n,o){var r,a,s,l,c,h,u,d,f,g,v,_,p,b,m,y,w,x,C=[],I=e.glyphs[t]||e.glyphs["?"];if(I){if(I.o)for(l=I._cachedOutline||(I._cachedOutline=I.o.split(" ")),c=l.length,h=i,u=i,r=0;c>r;)switch(l[r++]){case"m":d=l[r++]*h+n,f=l[r++]*u,o.moveTo(d,f);break;case"l":d=l[r++]*h+n,f=l[r++]*u,o.lineTo(d,f);break;case"q":if(g=l[r++]*h+n,v=l[r++]*u,b=l[r++]*h+n,m=l[r++]*u,o.quadraticCurveTo(b,m,g,v),x=C[C.length-1])for(_=x.x,p=x.y,a=1,s=this.divisions;s>=a;a++){var O=a/s;Nl.b2(O,_,b,g),Nl.b2(O,p,m,v)}break;case"b":if(g=l[r++]*h+n,v=l[r++]*u,b=l[r++]*h+n,m=l[r++]*u,y=l[r++]*h+n,w=l[r++]*u,o.bezierCurveTo(b,m,y,w,g,v),x=C[C.length-1])for(_=x.x,p=x.y,a=1,s=this.divisions;s>=a;a++){var O=a/s;Nl.b3(O,_,b,y,g),Nl.b3(O,p,m,w,v)}}return{offset:I.ha*i,path:o}}}};Ql.generateShapes=function(t,e){e=e||{};var n=e.size!==i?e.size:100,o=e.curveSegments!==i?e.curveSegments:4,r=e.font!==i?e.font:"helvetiker",a=e.weight!==i?e.weight:"normal",s=e.style!==i?e.style:"normal";Ql.size=n,Ql.divisions=o,Ql.face=r,Ql.weight=a,Ql.style=s;for(var l=Ql.drawText(t),c=l.paths,h=[],u=0,d=c.length;d>u;u++)Array.prototype.push.apply(h,c[u].toShapes());return h},function(t){var e=1e-10,i=function(t,e){var i=t.length;if(3>i)return null;var r,a,s,l=[],c=[],h=[];if(n(t)>0)for(a=0;i>a;a++)c[a]=a;else for(a=0;i>a;a++)c[a]=i-1-a;var u=i,d=2*u;for(a=u-1;u>2;){if(d--<=0)return e?h:l;if(r=a,r>=u&&(r=0),a=r+1,a>=u&&(a=0),s=a+1,s>=u&&(s=0),o(t,r,a,s,u,c)){var f,g,v,_,p;for(f=c[r],g=c[a],v=c[s],l.push([t[f],t[g],t[v]]),h.push([c[r],c[a],c[s]]),_=a,p=a+1;u>p;_++,p++)c[_]=c[p];u--,d=2*u}}return e?h:l},n=function(t){for(var e=t.length,i=0,n=e-1,o=0;e>o;n=o++)i+=t[n].x*t[o].y-t[o].x*t[n].y;return.5*i},o=function(t,i,n,o,r,a){var s,l,c,h,u,d,f,g,v;if(l=t[a[i]].x,c=t[a[i]].y,h=t[a[n]].x,u=t[a[n]].y,d=t[a[o]].x,f=t[a[o]].y,e>(h-l)*(f-c)-(u-c)*(d-l))return!1;var _,p,b,m,y,w,x,C,I,O,S,T,V,D,E;for(_=d-h,p=f-u,b=l-d,m=c-f,y=h-l,w=u-c,s=0;r>s;s++)if(g=t[a[s]].x,v=t[a[s]].y,!(g===l&&v===c||g===h&&v===u||g===d&&v===f)&&(x=g-l,C=v-c,I=g-h,O=v-u,S=g-d,T=v-f,E=_*O-p*I,V=y*C-w*x,D=b*T-m*S,E>=-e&&D>=-e&&V>=-e))return!1;return!0};t.Triangulate=i,t.Triangulate.area=n}(Ql),t._typeface_js={faces:Ql.faces,loadFace:Ql.loadFace};var Gl=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},Xl=Gl.prototype={constructor:Gl,computeFaceNormals:function(){for(var t=new Vl,e=new Vl,i=0,n=this.faces.length;n>i;i++){var o=this.faces[i],r=this.vertices[o.a],a=this.vertices[o.b],s=this.vertices[o.c];t.subVectors(s,a),e.subVectors(r,a),t.cross(e),t.normalize(),o.normal.copy(t)}},computeVertexNormals:function(t){var e,i,n,o,r,a;for(a=new Array(this.vertices.length),e=0,i=this.vertices.length;i>e;e++)a[e]=new Vl;if(t){var s,l,c,h=new Vl,u=new Vl;for(n=0,o=this.faces.length;o>n;n++)r=this.faces[n],s=this.vertices[r.a],l=this.vertices[r.b],c=this.vertices[r.c],h.subVectors(c,l),u.subVectors(s,l),h.cross(u),a[r.a].add(h),a[r.b].add(h),a[r.c].add(h)}else for(n=0,o=this.faces.length;o>n;n++)r=this.faces[n],a[r.a].add(r.normal),a[r.b].add(r.normal),a[r.c].add(r.normal);for(e=0,i=this.vertices.length;i>e;e++)a[e].normalize();for(n=0,o=this.faces.length;o>n;n++)r=this.faces[n],r.vertexNormals[0]=a[r.a].clone(),r.vertexNormals[1]=a[r.b].clone(),r.vertexNormals[2]=a[r.c].clone()},mergeVertices:function(){var t,e,n,o,r,a,s,l,c={},h=[],u=[],d=T(10,4);for(n=0,o=this.vertices.length;o>n;n++)t=this.vertices[n],e=p(t.x*d)+"_"+p(t.y*d)+"_"+p(t.z*d),c[e]===i?(c[e]=n,h.push(this.vertices[n]),u[n]=h.length-1):u[n]=u[c[e]];var f=[];for(n=0,o=this.faces.length;o>n;n++){r=this.faces[n],r.a=u[r.a],r.b=u[r.b],r.c=u[r.c],a=[r.a,r.b,r.c];for(var g=0;3>g;g++)if(a[g]==a[(g+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var v=f[n];for(this.faces.splice(v,1),s=0,l=this.faceVertexUvs.length;l>s;s++)this.faceVertexUvs[s].splice(v,1)}var _=this.vertices.length-h.length;return this.vertices=h,_}},Yl=function(t,e,i,n,o,r,a){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=o,this.aEndAngle=r,this.aClockwise=a};Yl.prototype=Ln(Ml),Yl.prototype.getPoint=function(t){var e,i=this.aEndAngle-this.aStartAngle;0>i&&(i+=E),i>E&&(i-=E),e=!0===this.aClockwise?this.aEndAngle+(1-t)*(E-i):this.aStartAngle+t*i;var n=this.aX+this.xRadius*I(e),o=this.aY+this.yRadius*S(e);return new Tl(n,o)};var ql=function(t,e){this.v1=t,this.v2=e},Zl=ql.prototype=Ln(Ml);Zl.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Zl.getPointAt=function(t){return this.getPoint(t)},Zl.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};var Jl=function(t,e,i){this.v0=t,this.v1=e,this.v2=i};Jl.prototype=Ln(Ml),Jl.prototype.getPoint=function(t){var e,i;return e=Nl.b2(t,this.v0.x,this.v1.x,this.v2.x),i=Nl.b2(t,this.v0.y,this.v1.y,this.v2.y),new Tl(e,i)};var $l=function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n};$l.prototype=Ln(Ml),$l.prototype.getPoint=function(t){var e,i;return e=Nl.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=Nl.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Tl(e,i)},Pl.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new Vl;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e});var Kl=Pl.create(function(t,e,i){this.v0=t,this.v1=e,this.v2=i},function(t){var e,i,n;return e=Nl.b2(t,this.v0.x,this.v1.x,this.v2.x),i=Nl.b2(t,this.v0.y,this.v1.y,this.v2.y),n=Nl.b2(t,this.v0.z,this.v1.z,this.v2.z),new Vl(e,i,n)}),tc=Pl.create(function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n},function(t){var e,i,n;return e=Nl.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=Nl.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),n=Nl.b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new Vl(e,i,n)}),ec=function(t,e,n,o,r,a,s,l){Gl.call(this),o=o!==i?o:.5,r=r!==i?r:.5,l=l!==i?l:1,t=t||8,a=a||0,s=s||E;var c,h,u=l/2,d=[],f=[],g=this.vertices,v=this.faces,_=this.faceVertexUvs;for(h=0;1>=h;h++){var p=[],b=[],m=h/1,w=m*(r-o)+o;for(c=0;t>=c;c++){var x=c/t,C=new Vl,O=-(x*s+a);C.z=w*S(O),C.y=-m*l+u,C.x=w*I(O),g.push(C),p.push(g.length-1),b.push(new Tl(x,m))}d.push(p),f.push(b)}var T,V,D=(r-o)/l;for(c=0;t>c;c++)for(0!==o?(T=g[d[0][c]].clone(),V=g[d[0][c+1]].clone()):(T=g[d[1][c]].clone(),V=g[d[1][c+1]].clone()),T.setY(y(T.x*T.x+T.z*T.z)*D).normalize(),V.setY(y(V.x*V.x+V.z*V.z)*D).normalize(),h=0;1>h;h++){var k=d[h][c],P=d[h+1][c],M=d[h+1][c+1],B=d[h][c+1],L=T.clone(),j=T.clone(),R=V.clone(),z=V.clone(),F=f[h][c].clone(),A=f[h+1][c].clone(),W=f[h+1][c+1].clone(),H=f[h][c+1].clone();v.push(new kl(k,P,B,[L,j,z])),_[0].push([F,A,H]),v.push(new kl(P,M,B,[j.clone(),R,z.clone()])),_[0].push([A.clone(),W,H.clone()])}if(e&&o>0)for(this.vertices.push(new Vl(0,u,0)),c=0;t>c;c++){var k=d[0][c],P=d[0][c+1],M=this.vertices.length-1,L=new Vl(0,1,0),j=new Vl(0,1,0),R=new Vl(0,1,0),F=f[0][c].clone(),A=f[0][c+1].clone(),W=new Tl(A.x,0);v.push(new kl(k,P,M,[L,j,R],null,1));var U=c/t*E,N=I(U),Q=S(U),G=(c+1)/t*E,X=I(G),Y=S(G);_[0].push([new Tl(.5+.5*N,.5+.5*Q),new Tl(.5+.5*X,.5+.5*Y),new Tl(.5,.5)])}if(n&&r>0)for(this.vertices.push(new Vl(0,-u,0)),c=0;t>c;c++){var k=d[h][c+1],P=d[h][c],M=g.length-1,L=new Vl(0,-1,0),j=new Vl(0,-1,0),R=new Vl(0,-1,0),F=f[h][c+1].clone(),A=f[h][c].clone();v.push(new kl(k,P,M,[L,j,R],null,2));var U=c/t*E,N=I(U),Q=S(U),G=(c+1)/t*E,X=I(G),Y=S(G);_[0].push([new Tl(.5+.5*X,.5-.5*Y),new Tl(.5+.5*N,.5-.5*Q),new Tl(.5,.5)])}};ec.prototype=Ln(Xl);var ic=function(t,e,n,o,r,a,s){Gl.call(this),s=s||.5,t=t||16,e=e||16,n=(n!==i?n:0)-D,o=o!==i?o:E,r=r!==i?r:0,a=a!==i?a:D;var l,c,h=[],u=[],d=this.vertices,f=this.faces,g=this.faceVertexUvs;for(c=0;e>=c;c++){var v=[],_=[];for(l=0;t>=l;l++){var p=l/t,b=c/e,m=new Vl;m.x=-s*I(n+p*o)*S(r+b*a),m.y=s*I(r+b*a),m.z=s*S(n+p*o)*S(r+b*a),d.push(m),v.push(d.length-1),_.push(new Tl(p,b))}h.push(v),u.push(_)}for(c=0;e>c;c++)for(l=0;t>l;l++){var y=h[c][l+1],w=h[c][l],x=h[c+1][l],O=h[c+1][l+1],T=d[y].clone().normalize(),V=d[w].clone().normalize(),k=d[x].clone().normalize(),P=d[O].clone().normalize(),M=u[c][l+1].clone(),B=u[c][l].clone(),L=u[c+1][l].clone(),j=u[c+1][l+1].clone();C(d[y].y)===s?(M.x=(M.x+B.x)/2,f.push(new kl(y,x,O,[T,k,P])),g[0].push([M,L,j])):C(d[x].y)===s?(L.x=(L.x+j.x)/2,f.push(new kl(y,w,x,[T,V,k])),g[0].push([M,B,L])):(f.push(new kl(y,w,O,[T,V,P])),g[0].push([M,B,j]),f.push(new kl(w,x,O,[V.clone(),k,P.clone()])),g[0].push([B.clone(),L,j.clone()]))}};ic.prototype=Ln(Xl);var nc=function(t,e,i,n,o,r){Gl.call(this),t=t||.33,e=e||.17,n=n||8,i=i||6,o=o||0,r=r||E;for(var a=new Vl,s=[],l=[],c=0;n>=c;c++)for(var h=c/n*E+D,u=0;i>=u;u++){var d=u/i*r+o;a.x=t*I(d),a.z=-t*S(d);var f=new Vl,g=t+e*I(h);f.x=g*I(d),f.z=-g*S(d),f.y=e*S(h),this.vertices.push(f),s.push(new Tl(u/i,1-c/n)),l.push(f.clone().sub(a).normalize())}for(var c=1;n>=c;c++)for(var u=1;i>=u;u++){var v=(i+1)*c+u-1,_=(i+1)*(c-1)+u-1,p=(i+1)*(c-1)+u,b=(i+1)*c+u,m=new kl(v,_,b,[l[v].clone(),l[_].clone(),l[b].clone()]);this.faces.push(m),this.faceVertexUvs[0].push([s[v].clone(),s[_].clone(),s[b].clone()]),m=new kl(_,p,b,[l[_].clone(),l[p].clone(),l[b].clone()]),this.faces.push(m),this.faceVertexUvs[0].push([s[_].clone(),s[p].clone(),s[b].clone()])}this.computeFaceNormals()};nc.prototype=Ln(Xl);var oc=function(t,e,i){return t?(Gl.call(this),t=t instanceof Array?t:[t],this.addShapeList(t,e),Cl(this,i),void this.computeFaceNormals()):void(t=[])},rc=oc.prototype=Ln(Gl.prototype);rc.addShapeList=function(t,e){for(var i=t.length,n=0;i>n;n++){var o=t[n];this.addShape(o,e)}},rc.addShape=function(t,e){function n(t,e){for(var i,n,o=t.length;--o>=0;){i=o,0>(n=o-1)&&(n=t.length-1);var r=0,s=g;for(r=0;s>r;r++){var l=k*r,c=k*(r+1);a(e+i+l,e+n+l,e+n+c,e+i+c,t,r,s,i,n)}}}function o(t,e,i){w.vertices.push(new Vl(t,e,i))}function r(i,n,o,r){i+=x,n+=x,o+=x,w.faces.push(new kl(i,n,o,null,null,r?2:1));var a=r?p.generateBottomUV(w,t,e,i,n,o):p.generateTopUV(w,t,e,i,n,o);w.faceVertexUvs[0].push(a)}function a(i,n,o,r,a,s,l,c,h){i+=x,n+=x,o+=x,r+=x,w.faces.push(new kl(i,n,r)),w.faces.push(new kl(n,o,r));var u=p.generateSideWallUV(w,t,a,e,i,n,o,r,s,l,c,h);w.faceVertexUvs[0].push([u[0],u[1],u[3]]),w.faceVertexUvs[0].push([u[1],u[2],u[3]])}var s,l,c,h,u,d=e.amount,f=e.curveSegments||ts,g=e.steps||1,v=e.extrudePath,_=!1,p=new El(e.repeatUVLength);v&&(s=v.getSpacedPoints(g),_=!0,l=e.frames!==i?e.frames:new ac.FrenetFrames(v,g,!1),c=new Vl,h=new Vl,u=new Vl);var b,m,y,w=this,x=this.vertices.length,C=t.extractPoints(f),I=C.shape,O=C.holes,S=!Nl.isClockWise(I);if(S){for(I=I.reverse(),m=0,y=O.length;y>m;m++)b=O[m],Nl.isClockWise(b)&&(O[m]=b.reverse());S=!1}var T=Nl.triangulateShape(I,O),V=I;for(m=0,y=O.length;y>m;m++)b=O[m],I=I.concat(b);for(var D,E,k=I.length,P=T.length,M=0;k>M;M++)D=I[M],_?(h.copy(l.normals[0]).multiplyScalar(D.x),c.copy(l.binormals[0]).multiplyScalar(D.y),u.copy(s[0]).add(h).add(c),o(u.x,u.y,u.z)):o(D.x,D.y,0);var B;for(B=1;g>=B;B++)for(M=0;k>M;M++)D=I[M],_?(h.copy(l.normals[B]).multiplyScalar(D.x),c.copy(l.binormals[B]).multiplyScalar(D.y),u.copy(s[B]).add(h).add(c),o(u.x,u.y,u.z)):o(D.x,D.y,d/g*B);(function(){if(e.bottom)for(var t=0;P>t;t++)E=T[t],r(E[2],E[1],E[0],!0);if(e.top)for(t=0;P>t;t++)E=T[t],r(E[0]+k*g,E[1]+k*g,E[2]+k*g,!1)})(),function(){var t=0;for(n(V,t),t+=V.length,m=0,y=O.length;y>m;m++)b=O[m],n(b,t),t+=b.length}()};var ac=function(t,e,i,n,o){Gl.call(this),e=e||64,i=i||1,n=n||8,o=o||!1;var r,a,s,l,c,h,u,d,f,g,v,_,p,b,m,y,w,x,C,O=[],T=this,V=e+1,D=new Vl,k=new ac.FrenetFrames(t,e,o),P=k.tangents,M=k.normals,B=k.binormals;for(this.tangents=P,this.normals=M,this.binormals=B,d=0;V>d;d++)for(O[d]=[],s=d/(V-1),u=t.getPointAt(s),P[d],r=M[d],a=B[d],f=0;n>f;f++)l=f/n*E,c=-i*I(l),h=i*S(l),D.copy(u),D.x+=c*r.x+h*a.x,D.y+=c*r.y+h*a.y,D.z+=c*r.z+h*a.z,O[d][f]=function(t,e,i){return T.vertices.push(new Vl(t,e,i))-1}(D.x,D.y,D.z);for(d=0;e>d;d++)for(f=0;n>f;f++)g=o?(d+1)%e:d+1,v=(f+1)%n,_=O[d][f],p=O[g][f],b=O[g][v],m=O[d][v],y=new Tl(d/e,f/n),w=new Tl((d+1)/e,f/n),x=new Tl((d+1)/e,(f+1)/n),C=new Tl(d/e,(f+1)/n),this.faces.push(new kl(_,p,m)),this.faceVertexUvs[0].push([y,w,C]),this.faces.push(new kl(p,b,m)),this.faceVertexUvs[0].push([w.clone(),x,C.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};ac.prototype=Ln(Xl),ac.FrenetFrames=function(t,e,i){var n,o,r,a,s,l,c,h=new Vl,u=[],d=[],f=[],g=new Vl,v=new Dl,_=e+1;for(this.tangents=u,this.normals=d,this.binormals=f,l=0;_>l;l++)c=l/(_-1),u[l]=t.getTangentAt(c),u[l].normalize();for(function(){d[0]=new Vl,f[0]=new Vl,o=Number.MAX_VALUE,r=C(u[0].x),a=C(u[0].y),s=C(u[0].z),o>=r&&(o=r,h.set(1,0,0)),o>=a&&(o=a,h.set(0,1,0)),o>=s&&h.set(0,0,1),g.crossVectors(u[0],h).normalize(),d[0].crossVectors(u[0],g),f[0].crossVectors(u[0],d[0])}(),l=1;_>l;l++)d[l]=d[l-1].clone(),f[l]=f[l-1].clone(),g.crossVectors(u[l-1],u[l]),g.length()>1e-4&&(g.normalize(),n=O(xn(u[l-1].dot(u[l]),-1,1)),d[l].applyMatrix4(v.makeRotationAxis(g,n))),f[l].crossVectors(u[l],d[l]);if(i)for(n=O(xn(d[0].dot(d[_-1]),-1,1)),n/=_-1,u[0].dot(g.crossVectors(d[0],d[_-1]))>0&&(n=-n),l=1;_>l;l++)d[l].applyMatrix4(v.makeRotationAxis(u[l],n*l)),f[l].crossVectors(u[l],d[l])};var sc=function(t,e,i,n){Gl.call(this),e=e||18,i=i||0,n=n==c?E:n;for(var o=1/(t.length-1),r=1/e,a=0,s=e;s>=a;a++)for(var l=i+a*r*n,h=I(l),u=S(l),d=0,f=t.length;f>d;d++){var g=t[d],v=new Vl;v.x=h*g.x-u*g.y,v.y=u*g.x+h*g.y,v.z=g.z,this.vertices.push(v)}for(var _=t.length,a=0,s=e;s>a;a++)for(var d=0,f=t.length-1;f>d;d++){var p=d+_*a,b=p,m=p+_,h=p+1+_,y=p+1,w=a*r,x=d*o,C=w+r,O=x+o;this.faces.push(new kl(b,y,m)),this.faceVertexUvs[0].push([new Tl(w,x),new Tl(w,O),new Tl(C,x)]),this.faces.push(new kl(m,y,h)),this.faceVertexUvs[0].push([new Tl(C,x),new Tl(w,O),new Tl(C,O)])}this.mergeVertices(),Cl(this),this.computeFaceNormals(),this.computeVertexNormals()};sc.prototype=Ln(Xl);(function(t,e){e=e||{};var n=Ql.generateShapes(t,e);e.amount=e.height!==i?e.height:50,oc.call(this,n,e)}).prototype=Ln(rc);var lc=h.Node=function(){bn(lc,this)},cc={X:ms,Y:ys,Z:ws},hc={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},uc="xzy",dc=function(t,e,i){if(e){var n=e[0],o=e[1],r=e[2];"xzy"===i?(ys(t,o),ws(t,r),ms(t,n)):"xyz"===i?(ws(t,r),ys(t,o),ms(t,n)):"yxz"===i?(ws(t,r),ms(t,n),ys(t,o)):"yzx"===i?(ms(t,n),ws(t,r),ys(t,o)):"zxy"===i?(ys(t,o),ms(t,n),ws(t,r)):"zyx"===i?(ms(t,n),ys(t,o),ws(t,r)):(ys(t,o),ws(t,r),ms(t,n))}};ns("Node",Hs,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:uc,_64O:0,_rotationX:0,_53O:0,_host:c,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return wc},_22Q:function(){return Id},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(t,e){_s(t,Cs(c,c,this.r3(),this.getRotationMode())),this.translate3d(t[0]*e,t[1]*e,t[2]*e)},translateFront:function(t){this.translate3dBy([0,0,1],t)},translateBack:function(t){this.translate3dBy([0,0,-1],t)},translateLeft:function(t){this.translate3dBy([-1,0,0],t)},translateRight:function(t){this.translate3dBy([1,0,0],t)},translateTop:function(t){this.translate3dBy([0,1,0],t)},translateBottom:function(t){this.translate3dBy([0,-1,0],t)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.p(t,i),this.setElevation(e)},translate3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.translate(t,i),this.setElevation(this._54O+e)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.setSize(t,i),this.setTall(e)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],
t=t[0]),this.setRotationX(t),this.setRotation(-e),this.setRotationZ(i)},setRotationY:function(t){this.setRotation(-t)},getRotationY:function(){return-this._64O},lookAt:function(t,e){e=e||K;var i=this,n=ls(t,i.p3()),o=Aa(n);e===K?(i.r3([-V(n[1]/o),-M(n[2],n[0])+k,0]),i.setRotationMode("xzy")):e===it?(i.r3(0,-M(n[2],n[0]),V(n[1]/o)),i.setRotationMode("zyx")):e===et?(i.r3(0,-M(n[2],n[0])+D,-V(n[1]/o)),i.setRotationMode("zyx")):e===nt?(i.r3([-V(n[1]/o)+k,-M(n[2],n[0])+k,0]),i.setRotationMode("xzy")):e===ot&&(i.r3([-V(n[1]/o)-k,-M(n[2],n[0])+k,0]),i.setRotationMode("xzy")),e===tt&&(i.r3([-V(n[1]/o)+D,-M(n[2],n[0])+k,D]),i.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(t){var e=this;if(e!==t&&e._host!==t){var i=e._host;i&&i._removeAttach(e),e._host=t,e._host&&e._host._addAttach(e),e.fp("host",i,t),e.onHostChanged(i,t)}},getAttaches:function(){return this._69O},_addAttach:function(t){var e=this;e._69O||(e._69O=new Fs),e._69O.add(t),e.fp("attaches",c,t)},_removeAttach:function(t){var e=this;e._69O.remove(t),e._69O.isEmpty()&&delete e._69O,e.fp("attaches",t,c)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(t){var e=this;e._44I||(e._44I=new Fs),e._42I||(e._42I=new Fs),e._44I.add(t),e._42I.add(t),e._20I()},_4I:function(t){var e=this;e._44I||(e._44I=new Fs),e._43I||(e._43I=new Fs),e._44I.add(t),e._43I.add(t),e._20I()},_16I:function(t){var e=this;e._44I.remove(t),e._42I.remove(t),e._44I.isEmpty()&&delete e._44I,e._42I.isEmpty()&&delete e._42I,e._20I()},_18I:function(t){var e=this;e._44I.remove(t),e._43I.remove(t),e._44I.isEmpty()&&delete e._44I,e._43I.isEmpty()&&delete e._43I,e._20I()},_20I:function(){var t=this;if(delete t._45I,!t._44I||t._44I.isEmpty())return void delete t._70O;var e;t._44I.each(function(i){i.isLooped()&&(e||(e={}),e[i._id]||(t._45I||(t._45I=new Fs),t._45I.add(i),e[i._id]=i))}),e?(t._70O=new Fs,t._44I.each(function(i){e[i._id]?"A"===e[i._id]||(e[i._id]="A",t._70O.add(i)):t._70O.add(i)})):t._70O=t._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(t){var e=this;e._46I||(e._46I=new Fs),e._48I||(e._48I=new Fs),e._46I.add(t),e._48I.add(t),e._19I()},_3I:function(t){var e=this;e._47I||(e._47I=new Fs),e._48I||(e._48I=new Fs),e._47I.add(t),e._48I.add(t),e._19I()},_15I:function(t){var e=this;e._46I.remove(t),e._48I.remove(t),e._46I.isEmpty()&&delete e._46I,e._48I.isEmpty()&&delete e._48I,e._19I()},_17I:function(t){var e=this;e._47I.remove(t),e._48I.remove(t),e._47I.isEmpty()&&delete e._47I,e._48I.isEmpty()&&delete e._48I,e._19I()},_19I:function(){var t=this;delete t._49I;var e=t._48I;if(e&&!e.isEmpty()){var i={};e.each(function(e){i[e._id]?t._49I||(t._49I=new Fs):i[e._id]=e}),t._49I?e.each(function(e){i[e._id]&&(t._49I.add(e),delete i[e._id])}):t._49I=e}},getImage:function(){return this._image},setImage:function(t){var e=this,i=e._image,n=e.getWidth(),o=e.getHeight();e._image=t,e.fp("image",i,t),e.fp(Ct,n,e.getWidth()),e.fp(It,o,e.getHeight())},getElevation:function(){return this._54O},setElevation:function(t){var e=this;if(!e._50O){e._50O=1;var i=e._54O;e._54O=t,e.fp(Ce,i,t),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(t){var e=this;if(!e._49O){e._49O=1;var i=e._64O;e._64O=t,e.fp(Gt,i,t),delete e._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(t){var e=this;if(!e._51O){e._51O=1;var i=e._rotationX;e._rotationX=t,e.fp("rotationX",i,t),delete e._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(t){var e=this;if(!e._52O){e._52O=1;var i=e._53O;e._53O=t,e.fp("rotationZ",i,t),delete e._52O}},getPosition:function(){return this._position},setPosition:function(t,e){var i=this;if(!i._50I){i._50I=1;var n;if(n=2===arguments.length?{x:t,y:e}:t,n.x!==i._position.x||n.y!==i._position.y){var o=i._position;i._position=n,i.fp(xe,o,n)}delete i._50I}},translate:function(t,e){var i=this._position;this.p(i.x+t,i.y+e)},getWidth:function(){var t=this;if(t._width>=0)return t._width;var e=ma(t._image);return e?Ls(e,t):20},setWidth:function(t){var e=this,i=e._width;e._width=t,e.fp(Ct,i,t)},getHeight:function(){var t=this;if(t._height>=0)return t._height;var e=ma(t._image);return e?js(e,t):20},setHeight:function(t){var e=this,i=e._height;e._height=t,e.fp(It,i,t)},setSize:function(t,e){var i=this;2===arguments.length?(i.setWidth(t),i.setHeight(e)):(i.setWidth(t.width),i.setHeight(t.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(t,e,i,n){var o=this;1===arguments.length?(o.p(t.x+t.width/2,t.y+t.height/2),o.setWidth(t.width),o.setHeight(t.height)):(o.p(t+i/2,e+n/2),o.setWidth(i),o.setHeight(n))},getRect:function(){var t=this,e=t.getWidth(),i=t.getHeight();return zo({x:t._position.x-e/2,y:t._position.y-i/2,width:e,height:i},t._64O)},getCorners:function(t,e){t==c&&(t=0),e==c&&(e=t);var i=this,n=i._position,o=i.getWidth()/2+t,r=i.getHeight()/2+e,a=new or(i._64O,n.x,n.y);return[a.tf(-o,-r),a.tf(o,-r),a.tf(o,r),a.tf(-o,r)]},rotateAt:function(t,e,i){var n=this,o=n._position,r=n._64O,a=new or(r,o.x,o.y).tf(t,e),s=y(t*t+e*e),l=M(o.y-a.y,o.x-a.x)+i;n.setRotation(r+i),n.p(a.x+s*I(l),a.y+s*S(l))},onParentChanged:function(){lc.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(t){t._7I()})},onPropertyChanged:function(t){var e=this;lc.superClass.onPropertyChanged.call(e,t),e._69O&&e._69O.each(function(e){e.handleHostPropertyChange(t)}),e._49I&&e._49I.each(function(t){t.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(t){this.updateAttach(t)},onStyleChanged:function(t){lc.superClass.onStyleChanged.apply(this,arguments),Ks[t]&&this.updateAttach()},updateAttach:function(t){var e=this;e._51I||gi||(e._51I=1,e._71O(t),delete e._51I)},_71O:function(t){var e,i,n,o,r,a,s=this,l=s._host,h=t?t.property:c,u=t?t.oldValue:c,d=t?t.newValue:c;if(l instanceof vc){if(h===Ce)s.setElevation(s._54O+d-u);else if(!t||$s[h]){if(e=s.s("attach.row.index"),i=s.s("attach.column.index"),!(n=l.getCellRect(e,i)))return;o=s.s("attach.row.span"),r=s.s("attach.column.span"),(1!==o||1!==r)&&(n=Ha(n,l.getCellRect(e+o-1,i+r-1))),nl(n,s,"attach.padding",1),s.setRect(n)}}else if(l instanceof _c&&(a=s.s("attach.index"))>=0&&(!t||tl[h])){var f=s.s("attach.thickness");f!=c&&s.setHeight(l.getThickness()*f);var g=s.s("attach.offset"),v=l.getPoints(),_=v.size();if(_>a){var p=v.get(a),b=_===a+1?v.get(0):v.get(a+1),m=[b.x-p.x,b.y-p.y],y=Aa(m);if(y){s.s("attach.offset.relative")&&(g*=y),s.s("attach.offset.opposite")&&(g=y-g);var w={x:p.x+m[0]/y*g,y:p.y+m[1]/y*g},x=s.s("attach.gap");x&&(s.s("attach.gap.relative")&&(x*=l.getThickness()),w=Kc(c,w,b,x)),s.p(w),s.setRotation(M(m[1],m[0]))}}}else t&&(h===xe?s.translate(d.x-u.x,d.y-u.y):h===Ce?s.setElevation(s._54O+d-u):Js[h]&&s._11Q(l,h,d-u))},_11Q:function(t,e,i){var n=this,o=t.p3(),r=ls(n.p3(),o),a=us(),s=hc[n.getRotationMode()],l=s[0],c=s[1],h=s[2],u=cc[l],d=cc[c],f=cc[h];e===Gt&&(e="rotationY",i=-i),e===Gt+l?(f(a,t[Xt+h]()),d(a,t[Xt+c]()),u(a,i),d(a,-t[Xt+c]()),f(a,-t[Xt+h]()),n[Yt+l](n[Xt+l]()+i)):e===Gt+c?(f(a,t[Xt+h]()),d(a,i),f(a,-t[Xt+h]()),n[Yt+c](n[Xt+c]()+i)):e===Gt+h&&(f(a,i),n[Yt+h](n[Xt+h]()+i)),_s(r,a),n.p3(o[0]+r[0],o[1]+r[1],o[2]+r[2])},isHostOn:function(t){var e=this;if(e._host&&t&&t._69O)for(var i={},n=e._host;n&&n!==e&&!i[n._id];){if(n===t)return console.log(2),!0;i[n._id]=n,n=n._host}return console.log(2),!1},isLoopedHostOn:function(t){return this.isHostOn(t)&&t.isHostOn(this)},getSerializableProperties:function(){var t=lc.superClass.getSerializableProperties.call(this);return vn(t,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),t}});var fc=h.Edge=function(t,e){var i=this;bn(fc,i),i.setSource(t),i.setTarget(e)};ns("Edge",Hs,{_icon:"edge_icon",getUIClass:function(){return xc},_22Q:function(){return Od},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(t){var e=this;if(e._source!==t){var i=e._source;e._source=t,i&&i._16I(e),t&&t._2I(e),e._7I(),e.fp("source",i,t)}},setTarget:function(t){var e=this;if(e._target!==t){var i=e._target;e._target=t,i&&i._18I(e),t&&t._4I(e),e._7I(),e.fp("target",i,t)}},isLooped:function(){var t=this;return t._source===t._target&&!!t._source&&!!t._target},_7I:function(){var t,e=this,i=sl(e);e._40I!==i&&(t=this._40I,t&&t._15I(e),e._40I=i,i&&i._1I(e),e.fp("sourceAgent",t,i),dl(t,e._41I),dl(i,e._41I));var n=ll(e);e._41I!==n&&(t=e._41I,t&&t._17I(e),e._41I=n,n&&n._3I(e),e.fp("targetAgent",t,n),dl(t,e._40I),dl(n,e._40I))},_22I:function(t){this._52I=t,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var t=this;return t._52I&&t._52I.get(0)!==t&&!t.getStyle(Ut)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var t=this,e=t._52I;return e&&!t.getStyle(Ut)&&e.size()>1&&t===e.get(0)},toggle:function(){var t=this._52I,e=!this.s(Ut);t&&t.size()>1&&(t.each(function(t){t.s(Ut,e)}),t.getSiblings().each(function(e){e!==t&&e.each(function(t){t.fp("edgeGroup",c,e)})}))},setStyle:function(t,e){(t===Nt||"edge.segments"===t)&&(e=sn(e)),fc.superClass.setStyle.call(this,t,e)},onStyleChanged:function(t){fc.superClass.onStyleChanged.apply(this,arguments),Zs[t]&&dl(this._41I,this._40I)},getSerializableProperties:function(){var t=fc.superClass.getSerializableProperties.call(this);return vn(t,{source:1,target:1}),t}});var gc=h.Group=function(){bn(gc,this)};ns("Group",lc,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Ic},onChildAdded:function(){gc.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){gc.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var t=this;if(!t._54I&&!gi){var e=t.getChildrenRect();e&&(t._53I=1,t.p(fr(t.s("group.position"),e,t.getSize())),delete t._53I)}},getChildrenRect:function(){var t,e=this;return e.eachChild(function(i){t=Ha(t,e.getChildRect(i))}),t},getChildRect:function(t){var e;return ln(t)&&t.s(Ot)&&(hn(t)&&t.isExpanded()&&t.eachChild(function(i){e=Ha(e,t.getChildRect(i))}),!e&&t.getRect&&(e=t.getRect())),e},setPosition:function(t,e){var i=this;if(!i._54I){var n;n=2===arguments.length?{x:t,y:e}:t,gi||i._53I||(i._54I=1,ur(i._children,n.x-i._position.x,n.y-i._position.y),delete i._54I),gc.superClass.setPosition.call(this,n)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(t){var e=this;if(e._57O!==t){var i=e._57O;e._57O=t,e.fp("expanded",i,e._57O),e._8I()}},_8I:function(){gc.superClass._8I.call(this),this.eachChild(function(t){ln(t)&&t._8I()})},onStyleChanged:function(t){gc.superClass.onStyleChanged.apply(this,arguments),"group.position"===t&&this._81I()},getSerializableProperties:function(){var t=gc.superClass.getSerializableProperties.call(this);return t.expanded=1,t}});var vc=h.Grid=function(){bn(vc,this)};ns("Grid",lc,{IRotatable:!1,_icon:"grid_icon",_image:c,getUIClass:function(){return Tc},setRotation:function(){},getCellRect:function(t,e){var i=this,n=i.s("grid.row.count"),o=i.s("grid.column.count");if(0>=n||0>=o||0>t||t>=n||0>e||e>=o)return c;var r,a,s,l=i.getRect(),h=i.s("grid.row.percents"),u=i.s("grid.column.percents");if(nl(l,i,"grid.border",-1),h&&h._as&&(h=h._as),u&&u._as&&(u=u._as),h&&h.length===n){for(s=0,r=0;t>r;r++)s+=l.height*h[r];l.y+=s,l.height=l.height*h[t]}else l.height=l.height/n,l.y+=l.height*t;if(u&&u.length===o){for(a=0,r=0;e>r;r++)a+=l.width*u[r];l.x+=a,l.width=l.width*u[e]}else l.width=l.width/o,l.x+=l.width*e;return Ya(l,-i.s("grid.gap")),l}});var _c=h.Shape=function(){bn(_c,this),this._59O=new Fs};_c.__de__=xl,ns("Shape",lc,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return Oc},_22Q:function(){return Sd},getLength:function(t){return kn(Ho(this._59O,this._58O,t,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var t=this._58O;return t?new Fs(t._as.slice(0)):t},setSegments:function(t){var e=this._58O;t=t?new Fs(rn(t)?t.slice(0):t._as.slice(0)):new Fs,(e&&t&&e._as.join(",")!==t._as.join(",")||e!==t)&&(this._58O=t,this.fp("segments",e,t))},getPoints:function(){return this._59O},toPoints:function(){var t=this._59O;return new Fs(t._as.slice(0))},setPoints:function(t){var e=this._59O;t=t?new Fs(rn(t)?t.slice(0):t._as.slice(0)):new Fs,(e&&t&&e._as.join(",")!==t._as.join(",")||e!==t)&&(this._59O=t,this.fs(),this.fp("points",e,t))},addPoint:function(t,e){var i=this.toPoints();i.add(t,e),this.setPoints(i)},setPoint:function(t,e){var i=this.toPoints();i.set(t,e),this.setPoints(i)},removePointAt:function(t){var e=this.toPoints();e.removeAt(t),this.setPoints(e)},setWidth:function(t){var e=this;if(1>t&&(t=1),!e._55I&&!gi&&e.getWidth()){e._55I=1;var i=e._position.x,n=t/e.getWidth(),o=e.toPoints(),r=new Fs;o.each(function(t){r.add({x:(t.x-i)*n+i,y:t.y,e:t.e})}),e.setPoints(r),e.fs(),delete e._55I}_c.superClass.setWidth.call(e,t)},setHeight:function(t){var e=this;if(1>t&&(t=1),!e._55I&&!gi&&e.getHeight()){e._55I=1;var i=e._position.y,n=t/e.getHeight(),o=e.toPoints(),r=new Fs;o.each(function(t){r.add({x:t.x,y:(t.y-i)*n+i,e:t.e})}),e.setPoints(r),e.fs(),delete e._55I}_c.superClass.setHeight.call(e,t)},setPosition:function(t,e){var i,n=this;if(!n._28Q){if(n._28Q=1,!n._55I&&!gi){i=2===arguments.length?{x:t,y:e}:t;var o=i.x-n._position.x,r=i.y-n._position.y;if(0===o&&0===r)return void delete n._28Q;n._55I=1;var a=n.toPoints(),s=new Fs;a.each(function(t){s.add({x:t.x+o,y:t.y+r,e:t.e})}),n.setPoints(s),n.fs(),delete n._55I}_c.superClass.setPosition.apply(n,arguments),delete n._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var t=this;if(!t._55I&&!gi){var e=Wa(t._59O);e&&(t._55I=1,t.setRect(e),delete t._55I)}t.fp(bt,!1,!0)},getSerializableProperties:function(){var t=_c.superClass.getSerializableProperties.call(this);return t.segments=1,t.points=1,t.thickness=1,t.closePath=1,t}});var pc=h.Polyline=function(){bn(pc,this),this.s({"shape.background":null,"shape.border.width":2})};ns("Polyline",_c,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return Td},getUIClass:function(){return Sc},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(t){var e=this;if(!e._24Q&&!gi&&e.getTall()){e._24Q=1;var i=e._54O,n=t/e.getTall();e._59O.each(function(t){t.e=t.e==c?i:(t.e-i)*n+i}),e.fs(),delete e._24Q}pc.superClass.setTall.call(e,t)},setElevation:function(t){var e=this;if(!e._24Q&&!gi){e._24Q=1;var i=t-e._54O;e._59O.each(function(e){e.e==c?e.e=t:e.e+=i}),e.fs(),delete e._24Q}pc.superClass.setElevation.apply(e,arguments)},fireShapeChange:function(){var t=this,e=t._59O;if(!t._24Q&&!gi){var i=e.size();if(i){var n=1,o=e.get(0),r=t._54O;o.e==c&&(o.e=r);for(var a=o.e,s=0;i>n;n++){o=e.get(n),o.e==c&&(o.e=r);var l=x(a,o.e),h=w(a+s,o.e);a=l,s=h-l}t._24Q=1,t.setTall(s),t.setElevation(a+s/2),delete t._24Q}}pc.superClass.fireShapeChange.apply(t,arguments)}});var bc=h.SubGraph=function(){bn(bc,this)};ns("SubGraph",lc,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){bc.superClass._8I.call(this),this.eachChild(function(t){ln(t)&&t._8I()})}}),h.EdgeGroup=function(t,e){this._70O=t,this._siblings=e;for(var i,n,o=0,r=t.size(),a=f[Ut];r>o;o++)if((i=t.get(o).getStyle(Ut,!1))!=c){a=i;break}a==c&&(a=!0);var s=d.edgeGroupAgentFunc;for(s&&(n=s(t))&&n!==t.get(0)&&(t.remove(n),t.add(n,0)),o=0;r>o;o++)t.get(o).s(Ut,a)},ns("EdgeGroup",e,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(t){return this._70O.get(t)},indexOf:function(t){return this._70O.indexOf(t)},each:function(t,e){this._70O.each(t,e)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(t,e){this._siblings.each(function(i){i._70O.each(t,e)})}});var mc=h.JSONSerializer=function(t,e){this.dm=this._dataModel=t,this._hierarchical=!!e};ns("JSONSerializer",e,{ms_ac:["hierarchical"],serialize:function(t){return JSON.stringify(this.toJSON(),function(t,e){return tn(e)?dn(e):e},t==c?2:t)},toJSON:function(){var t=this,e=t.dm,n=e.getRoots(),o=t.json={v:d.getVersion(),d:[],a:{}},r=e.getSerializableAttrs();for(var a in r){var s=e.a(a);s!==i&&t[je](a,s,o.a)}return mn(o.a)&&delete o.a,t._hierarchical?n.each(t.serializeData,this):e.each(function(e){t.serializeData(e)}),o},isSerializable:function(){return!0},getProperties:function(t){return t.getSerializableProperties()},getStyles:function(t){return t.getSerializableStyles()},getAttrs:function(t){return t.getSerializableAttrs()},serializeData:function(t){var e=this;if(e.isSerializable(t)){var i,n,o,r,a=t.getClass(),s=new a,l={c:t.getClassName(),i:t.getId(),p:{},s:{},a:{}};e.json.d.push(l),i=e.getProperties(t);for(n in i)r=Ji(n),t[r]&&(o=t[r]())!==s[r]()&&e[je](n,o,l.p);i=e.getStyles(t);for(n in i)(o=t.s(n))!==s.s(n)&&e[je](n,o,l.s);i=e.getAttrs(t);for(n in i)(o=t.a(n))!==s.a(n)&&e[je](n,o,l.a);mn(l.p)&&delete l.p,mn(l.s)&&delete l.s,mn(l.a)&&delete l.a}e._hierarchical&&t.getChildren().each(e.serializeData,e)},serializeValue:function(t,e,i){an(e)?e={__a:e._as}:e instanceof Hs&&(e={__i:e.getId()}),i[t]=e},deserialize:function(t,e,i){gi=!0;var n=this;t=n.json=Ki(t)?JSON.parse(t):t,n._82I={};for(var o=n.dm,r=new Fs,a=new Fs,s=0,l=t.d.length;l>s;s++){var h=t.d[s],u=Ta(h.c),d=new u,f=h.i;i&&f!=c&&(d._id=f),n._82I[f]=d,r.add(d),a.add(h)}for(s=0;l>s;s++)n.deserializeData(r.get(s),a.get(s));r.each(function(t){e&&!t.getParent()&&t.setParent(e),o.add(t)});for(var g in t.a)o.a(g,n[Re](t.a[g]));return gi=!1,r},deserializeData:function(t,e){for(var i in e.p)t[$i(i)](this[Re](e.p[i]));for(i in e.s)t.s(i,this[Re](e.s[i]));for(i in e.a)t.a(i,this[Re](e.a[i]))},deserializeValue:function(t){if(nn(t)){var e=t.__i;if(e!=c)return this._82I[e];if(e=t.__a,rn(e))return new Fs(e)}return t}}),vn(Us,{serialize:function(t,e){return new mc(this,e).serialize(t)},toJSON:function(t){return new mc(this,t).toJSON()},deserialize:function(t,e,i){return new mc(this).deserialize(t,e,i)}}),yl.GraphView=function(t){var e=this;e._24I={},e._34I=new Fs,e._25I={},e._56I={},e._view=Rn(1,e),e._canvas=Fn(e._view),e.dm(t||new Us),e.setEditable(!1),e.setScrollBarVisible(d.graphViewScrollBarVisible)},wl("GraphView",e,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",oe,re,ie,ne,"resettable","editInteractor",te,"pannable","rectSelectable","autoScrollZone",de,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:d.graphViewResettable,_pannable:d.graphViewPannable,_rectSelectable:d.graphViewRectSelectable,_autoScrollZone:d.graphViewAutoScrollZone,_rectSelectBackground:d.graphViewRectSelectBackground,_rectSelectBorderColor:d.graphViewRectSelectBorderColor,_editPointSize:d.graphViewEditPointSize,_editPointBorderColor:d.graphViewEditPointBorderColor,_editPointBackground:d.graphViewEditPointBackground,_scrollBarColor:aa,_scrollBarSize:sa,_autoHideScrollBar:Gr,_autoMakeVisible:Qr,setEditable:function(t){var e=this,i=yl.XEditInteractor;t?e.setInteractors([new Ec(e),i?new i(e):new Pc(e),new kc(e),new Dc(e),new Mc(e,{editable:!i})]):e.setInteractors([new Ec(e),new kc(e),new Dc(e),new Mc(e,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function(t){var e=t.getUIClass();return e?new e(this,t):c},getDataUI:function(t){var e=this,n=e._25I[t._id];return n===i&&(n=e._33I(t),e._25I[t._id]=n),n},invalidateAll:function(t){var e=this;if(t){for(var i in e._25I){var n=e._25I[i];n&&n.dispose()}e._25I={},e._56I={},e._24I={},e._34I.clear(),e.redraw()}else e.dm().each(function(t){e.invalidateData(t)})},invalidateSelection:function(){var t=this;t.sm().each(function(e){t.invalidateData(e)})},invalidateData:function(t){var e=this;e._24I[t._id]=t,e._21Q(t),e.iv()},_21Q:function(t){var e=this,i=e._24I;if(cn(t)&&Oi[t.s(Qt)]){var n=t.getSourceAgent();n&&n.getAgentEdges().each(function(t){i[t._id]=t}),n=t.getTargetAgent(),n&&n.getAgentEdges().each(function(t){i[t._id]=t}),e.iv()}},redraw:function(t){var e=this;e._32I||(t?e._34I.add(t):(e._32I=1,e._34I.clear()),e.iv())},each:function(t,e){var i,n,o=0,r=this._layers,a=this._dataModel._datas._as,s=a.length;if(r)for(var l=r.length;l>o;o++){n=r[o];for(var c=0;s>c;c++)if(i=a[c],i._layer===n&&!1===(e?t.call(e,i):t(i)))return}else for(;s>o;o++)if(i=a[o],!1===(e?t.call(e,i):t(i)))return},reverseEach:function(t,e){var i,n,o,r=this._layers,a=this._dataModel._datas._as,s=a.length;if(r)for(i=r.length-1;i>=0;i--){o=r[i];for(var l=s-1;l>=0;l--)if(n=a[l],n._layer===o&&!1===(e?t.call(e,n):t(n)))return}else for(i=s-1;i>=0;i--)if(n=a[i],!1===(e?t.call(e,n):t(n)))return},getViewRect:function(){return this._29I},getContentRect:function(){var t=this,e=t._84I;return e||(t.each(function(i){t.isVisible(i)&&(e=Ha(e,t.getDataUIBounds(i)))}),t._84I=e||Bi),t._84I},getScrollRect:function(){return Ha(this.getContentRect(),this._29I)},fitData:function(t,e,i,n,o){var r=this;if(!r.getWidth()||!r.getHeight())return void(o||Ca(r.fitData,r,[t,e,i,n,!0],200));r.makeVisible(t),r.validate();var a=r.getDataUIBounds(t);a&&(a=Sa(a),Ya(a,i==c?20:i),r.fitRect(a,e,n))},fitContent:function(t,e,i,n){var o=this;if(!o.getWidth()||!o.getHeight())return void(n||Ca(o.fitContent,o,[t,e,i,!0],200));o.validate();var r=Sa(o.getContentRect());Ya(r,e==c?20:e),o.fitRect(r,t,i)},fitRect:function(t,e,i){var n=this,o=n.getWidth(),r=n.getHeight(),a=t.x+t.width/2,s=t.y+t.height/2,l=x(o/t.width,r/t.height),c=n._zoom,h=-a*c+o/2,u=-s*c+r/2;0===l||isNaN(l)||(i&&(l=x(1,l)),e?n.setTranslate(h,u,{finishFunc:function(){n.setZoom(l,e)}}):(n.setTranslate(h,u),n.setZoom(l)))},toCanvas:function(t){this.validateImpl();var e=this,i=e.getContentRect(),n=Fn(),o=e._zoom,r=i.x*o,a=i.y*o,s=i.width*o,l=i.height*o;Hn(n,s,l,1);var c=Zn(n);return t&&Qo(c,0,0,s,l,t),$n(c,-r,-a),c.scale(o,o),e._42(c),c.restore(),n},toDataURL:function(t,e){return this.toCanvas(t).toDataURL(e||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(t,e){var i,n,o=this;o._93db(t,e),o.each(function(r){o._56I[r._id]&&(i=o.getDataUI(r))&&(n=i._79o(),h.HtmlNode&&r instanceof h.HtmlNode?i._42(t):(!e||Qa(e,n))&&i._42(t))}),o._92db(t,e)},validateImpl:function(){var t,e,i,n,o,r=this,a=r.tx(),s=r.ty(),l=r._zoom,c=r._canvas,h=this.getWidth(),u=this.getHeight(),d=r._29I,f={x:-a/l,y:-s/l,width:h/l,height:u/l},g={},v=r._34I,_=r._24I,p=r._32I,y=r._23I;(h!==c.clientWidth||u!==c.clientHeight)&&(Hn(c,h,u),p=1),p||wn(f,d)||(p=1),r._29I=f,r.each(function(t){e=t._id;var n=g[e]=r.isVisible(t);n!==r._56I[e]&&(_[e]=t,i=r.getDataUI(_[e]),i&&i._84o(n),r._84o(t,n))},r);for(e in _)i=r.getDataUI(_[e]),i&&(!p&&r._56I[e]&&(o=i._79o())&&v.add(o),i.invalidate()),r._83I=1;if(r._56I=g,!p)for(e in _)g[e]&&(i=r.getDataUI(_[e]))&&(o=i._79o())&&v.add(o);if(p?n=f:(v.each(function(t){Qa(f,t)&&(n=Ha(n,t))}),n&&(Ya(n,w(1,1/l)),n.x=b(n.x*l)/l,n.y=b(n.y*l)/l,n.width=m(n.width*l)/l,n.height=m(n.height*l)/l,n=Ga(f,n))),r._74O=n,n&&(t=Zn(c),Jn(t,a,s,l),t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.clip(),t.clearRect(n.x,n.y,n.width,n.height),r._42(t,n),t.restore(),delete r._74O),r._24I={},v.clear(),delete r._32I,y&&h>0&&u>0){var i=r.getDataUI(y);if(i){var o=i._79o(),x=r._29I,C=x.x,I=x.y,O=x.width,S=x.height,l=r._zoom;o&&!Qa(o,x)&&(o.x+o.width<C&&r.tx(-o.x*l),o.x>C+O&&r.tx(-(o.x+o.width-O)*l),o.y+o.height<I&&r.ty(-o.y*l),o.y>I+S&&r.ty(-(o.y+o.height-S)*l))}delete r._23I}r._83I&&(delete r._83I,delete r._84I),r._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(t){var e=this;t!==e.isScrollBarVisible()&&(t?(Un(e._view,e._79O=zn()),Un(e._79O,e._27I=zn()),Un(e._79O,e._28I=zn())):(Ja(e._79O),delete e._79O,delete e._27I,delete e._28I),e.fp("scrollBarVisible",!t,t))},showScrollBar:function(){var t=this;t._79O&&(t._85I||(A(function(){t._86I()},la),t.iv()),t._85I=new Date)},_86I:function(){var t=this;if(t._85I){(new Date).getTime()-t._85I.getTime()>=la?(delete t._85I,t.iv()):A(function(){t._86I()},la)}},_98O:function(){var t=this,e=this._27I,i=this._28I;if(t._79O){if(t._autoHideScrollBar&&!t._85I)return e.style.visibility=qt,void(i.style.visibility=qt);var n=t.getScrollBarColor(),o=t._zoom,r=t.getScrollBarSize(),a=t.getViewRect(),s=t.getScrollRect(),l=a.height*o,c=s.height*o,h=a.width*o-r-2,u=l*((a.y-s.y)*o/c),d=l*(l/c),f=e.style;c-.5>l?(ca>d&&(u=u+d/2-ca/2,0>u&&(u=0),u+ca>l&&(u=l-ca),d=ca),io(e,h,u,r,d),f.visibility=Zt,f.background=n,f.borderRadius=r/2+ut):f.visibility=qt;var g=a.width*o,v=s.width*o,u=a.height*o-r-2,h=g*((a.x-s.x)*o/v),_=g*(g/v),f=i.style;v-.5>g?(ca>_&&(h=h+_/2-ca/2,0>h&&(h=0),h+ca>g&&(h=g-ca),_=ca),io(i,h,u,_,r),f.visibility=Zt,f.background=n,f.borderRadius=r/2+ut):f.visibility=qt}},setDataModel:function(t){var e=this,i=e._dataModel,n=e._3o;i!==t&&(i&&(i.umm(e.handleDataModelChange,e),i.umd(e.handleDataPropertyChange,e),i.removeIndexChangeListener(e._75O,e),n||i.sm().ums(e._16o,e)),e._dataModel=t,t.mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),t.addIndexChangeListener(e._75O,e),n?n._21I(t):t.sm().ms(e._16o,e),e.invalidateAll(!0),e.fp(Te,i,t))},handleDataPropertyChange:function(t){this.invalidateData(t.data)},onPropertyChanged:function(t){var e=this,i=t.property;e.redraw(),Xs[i]?e.showScrollBar():i===te&&e.onCurrentSubGraphChanged(t)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(t){var e=this,i=t.kind,n=t.data;if(e._83I=1,"add"===i)e.invalidateData(n),cn(n)&&n.getEdgeGroup()&&n.getEdgeGroup().eachSiblingEdge(e.invalidateData,e);else if(i===wt){e._21Q(n);var o=n._id,r=e._25I[o];if(r){if(e._56I[o]){var a=r._79o();a&&e.redraw(a)}r.dispose(),delete e._25I[o],delete e._24I[o],delete e._56I[o]}n===e._currentSubGraph&&e.setCurrentSubGraph(c)}else i===xt&&(e.invalidateAll(!0),e.setCurrentSubGraph(c))},_75O:function(t){this.invalidateData(t.data)},_76O:function(t){var e=this;if(e.isVisible(t)){for(var i=t;i._parent&&e.isVisible(i._parent);)i=i._parent;i&&i!==t&&e._dataModel._76O(i),e._dataModel._76O(t)}},isMovable:function(t){var e=this;return(!cn(t)||t.getStyle(Qt)===Et)&&(!!t.s("2d.movable")&&(!e._movableFunc||e._movableFunc(t)))},isSelectable:function(t){return t.s("2d.selectable")&&this.sm().isSelectable(t)},isEditable:function(t){var e=this;if(!e._editInteractor||!e.isSelected(t))return!1;if(hn(t)){var i=e.getDataUI(t);if(!i||i._88I)return!1}return(!cn(t)||t.getStyle(Qt)===Et)&&(!!t.s("2d.editable")&&(!e._editableFunc||e._editableFunc(t)))},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(t){return(!ln(t)||0===t.getRotation())&&(!this._pointEditableFunc||this._pointEditableFunc(t))},isRectEditable:function(t){return(!ln(t)||0===t.getRotation())&&(!this._rectEditableFunc||this._rectEditableFunc(t))},isRotationEditable:function(t){return!(!t.setRotation||!1===t.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(t))},getRotationPoint:function(t){var e=rr(t.getRotation(),0,-t.getHeight()/2-(q?32:16)),i=t.p();return e.x+=i.x,e.y+=i.y,e},getLogicalPoint:function(t){var e=this;return qa(t,e._canvas,e.tx(),e.ty(),e._zoom,e._zoom)},getSelectedDataAt:function(t){var e=this;return this.getDataAt(t,function(t){return e.isSelected(t)})},getDataAt:function(t,e,i){t.target&&(t=this.lp(t));var n;return this.reverseEach(function(o){return(e?e(o):this.isSelectable(o))&&this.rectIntersects(o,Zi(t.x,t.y,i))?(n=o,!1):void 0},this),n},getIconInfoAt:function(t,e){var i=this;if(t.target&&(t=i.lp(t)),e||(e=i.getDataAt(t)),e){var n=i.getDataUI(e);if(n&&n._38o){var o,r=n._38o,a=new Fs;for(o in r.icons)a.add(o);for(var s=a.size()-1;s>=0;s--){o=a.get(s);for(var l=r.rects[o],h=l.rotation,u=l.length-1;u>=0;u--){var d=l[u],f=d.width,g=d.height,v={x:t.x-d.x-f/2,y:t.y-d.y-g/2};h!=c&&(v=rr(-h,v.x,v.y));var d={x:-f/2,y:-g/2,width:f,height:g};if(Ua(d,v))return{key:o,index:u,name:r.icons[o].names[u],rect:l[u],point:t,rotation:h,relativeRect:d,relativePoint:v,data:e}}}}}return c},getDatasInRect:function(t,e,n){n===i&&(n=1);var o=this,r=new Fs;return o.reverseEach(function(i){n&&!o.isSelectable(i)||(e?o.rectIntersects(i,t):o.rectContains(i,t))&&r.add(i)}),r},moveSelection:function(t,e){var i,n=this,o=n.dm();o&&(i=o.getHistoryManager()),i&&i.beginInteraction(),ur(n.sm().toSelection(n.isMovable,n),t,e),i&&i.endInteraction()},getDataUIBounds:function(t){var e=this.getDataUI(t);return e?e._79o():c},getBoundsForGroup:function(t){return t.s(Ot)?this.getDataUIBounds(t):c},rectIntersects:function(t,e){this.validate();var i=c;if(this._56I[t._id]){var n=this._25I[t._id];if(n){var o=n._79o();if(Na(e,o))i=!0;else if((e=Ga(e,o))&&(n.rectIntersects&&(i=n.rectIntersects(e)),i==c)){if(!t.s("pixelPerfect"))return!0;var r=e.x,a=e.y,s=e.width,l=e.height,h=1,u=d.hitMaxArea,f=s*l;f>u&&(h=u/f);var g=Mo(s*h,l*h);$n(g,-r*h,-a*h),g.scale(h,h),n._42(g);try{for(var v=0,_=g.getImageData(0,0,s*h,l*h).data;v<_.length;v+=4)if(0!==_[v+3]){i=!0;break}g.restore()}catch(t){ko=c,i=!0}}}}return!!i},rectContains:function(t,e){if(this._56I[t._id]){var i=this._25I[t._id];if(i)return Na(e,i._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(t){var e=this,i=e._focusData,n=i&&e._25I[i._id],o=0,r=e._dataModel._datas;i&&i._enabled&&i._editable&&n&&n.onKeyDown&&!0===n.onKeyDown(t)||(9===t.keyCode&&(i&&(o=r.indexOf(i),ja(t)?-1==--o&&(o=0):++o===r.size()&&(o=0)),e._focusData=i=r.get(o),e.sm().setSelection(i)),fo(t)?e.selectAll():So(t)&&e.isResettable()&&e.reset(),e.sm().isEmpty()||(go(t)&&e.handleDelete(t),xo(t)&&(e.moveSelection(-1,0),e.fi({kind:"moveLeft"})),Co(t)&&(e.moveSelection(0,-1),e.fi({kind:"moveUp"})),Io(t)&&(e.moveSelection(1,0),e.fi({kind:"moveRight"})),Oo(t)&&(e.moveSelection(0,1),e.fi({kind:"moveDown"}))))},handleScroll:function(t,e){pa(t);var i=this.lp(t);e>0?this.scrollZoomIn(i):0>e&&this.scrollZoomOut(i)},handlePinch:function(t,e,i){e>i?this.pinchZoomIn(t):this.pinchZoomOut(t)},checkDoubleClickOnNote:function(t,e){var i=this,n=i.lp(t),o=i.getDataUI(e),r=o.note2Info;return r&&e.s("note2.toggleable")&&Ua(r.clickRect,n)?(e.s(Ht,!e.s(Ht)),i.fi({kind:"toggleNote2",event:t,data:e}),!0):!!((r=o.noteInfo)&&e.s("note.toggleable")&&Ua(r.clickRect,n))&&(e.s(Wt,!e.s(Wt)),i.fi({kind:"toggleNote",event:t,data:e}),!0)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(t,e){var i=this,n=i.getAutoScrollZone(),o=n/i.getZoom(),r=n/4,a=i._29I,s=i.lp(t),l={x:i.tx(),y:i.ty()};return s&&n>0&&a&&(s.x-a.x<o?i.translate(r,0):a.x+a.width-s.x<o&&i.translate(-r,0),s.y-a.y<o?i.translate(0,r):a.y+a.height-s.y<o&&i.translate(0,-r)),l.x=i.tx()-l.x,l.y=i.ty()-l.y,e&&(e.x+=l.x,e.y+=l.y),l},getMoveMode:function(t,e){var i=e.s("2d.move.mode");return i||(xi[88]?"x":xi[89]?"y":"xy")}});var yc=function(t,e){var i=this;i.gv=t,i.s=function(t){return e.getStyle(t)},i._data=e,i._87I=new Fs};is(yc,e,{_6I:c,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){var t=this;return!t.gv.isSelected(t._data)||t.isShadowed()?0:this.s("select.width")},getBodyColor:function(t){var e=this._data,i=this.gv.getBodyColor(e);return i||(t?e.getStyle(t):c)},_2Q:function(t){return this.s(t)},
_1Q:function(t,e,i,n){var o=this.s,r=o(e+".dash.color");t.strokeStyle=r,t.lineWidth=i,t.stroke(),o(e+".dash.3d")&&Uo(t,r,o(e+".dash.3d.color"),i,this.gv._zoom,o(e+".dash.3d.accuracy")),Ds(t,n)},invalidate:function(){this._6I=c},_79o:function(){var t=this;if(!t._6I){t.labelInfo=t.label2Info=t.noteInfo=t.note2Info=t._38o=c,t._87I.clear(),t._3O();var e=t._data,i=t.gv;t._55O=i.isEditable(e)?{_42O:i.isRectEditable(e),_43O:i.isPointEditable(e),_56O:i.isRotationEditable(e)}:c,t._6I=t._81o()}return t._6I},_3O:function(){},getPosition:function(){return Bi},_68o:function(t,e){t&&this._87I.add(zo(t,e))},_81o:function(){var t=this,e=t.s;t._24O(Mt,"getLabel"),t._24O(Bt,"getLabel2"),t._26O(Lt,"getNote"),t._26O(jt,"getNote2"),t._15O(),t._55O&&t._48O();var i;if(t._87I.each(function(t){i=Ha(i,t)}),i&&t.isShadowed()){var n=Sa(i);n.x+=e("shadow.offset.x"),n.y+=e("shadow.offset.y"),Ya(n,e("shadow.blur")),i=Ha(i,n)}return t._87I.clear(),i},_42:function(t){var e=this,i=e._data,n=e.gv,o=e.s,r=o("opacity"),a=this.isShadowed();if(a){var s=t.shadowOffsetX,l=t.shadowOffsetY,h=t.shadowBlur,u=t.shadowColor;t.shadowOffsetX=o("shadow.offset.x"),t.shadowOffsetY=o("shadow.offset.y"),t.shadowBlur=o("shadow.blur"),t.shadowColor=o("shadow.color")}if(r!=c){var d=t.globalAlpha;t.globalAlpha=r}e._80o(t),n.isLabelVisible(i)&&(fl(t,e.labelInfo),fl(t,e.label2Info)),n.isNoteVisible(i)&&(gl(t,e.noteInfo),gl(t,e.note2Info)),e._99O(t),r!=c&&(t.globalAlpha=d),a&&(t.shadowOffsetX=s,t.shadowOffsetY=l,t.shadowBlur=h,t.shadowColor=u),e._55O&&n.isEditVisible(i)&&e._47O(t)},_80o:function(){},_47O:function(){},_24O:function(t,e){var i=this,n=i._data,o=i.gv,r=i.s,a=o[e](n);if(a!=c){var s=r(t+".scale"),l=r(t+".max"),h=r(t+".position"),u=i[t+"Info"]={label:a,scale:s,color:o[e+"Color"](n),font:r(t+".font"),opacity:r(t+".opacity"),align:r(t+".align"),rotation:i.getRotation(r(t+".rotation"),!1,h),background:o[e+"Background"](n)},d=Nn(u,a);l>0&&l<d.width&&(u.labelWidth=d.width,d.width=l),1!==s&&(d.width*=s,d.height*=s);var f=i.getPosition(h,r(t+".offset.x"),r(t+".offset.y"),d,r(t+".position.fixed"));if(d.x=f.x-d.width/2,d.y=f.y-d.height/2,i._68o(u.rect=d,u.rotation),1!==s){var g=d.width/s,v=d.height/s;u.rect={x:f.x-g/2,y:f.y-v/2,width:g,height:v}}}},_26O:function(t,e){var i=this,n=i.gv,o=i._data,r=i.s,a=n[e](o);if(a!=c){var s,l,h=r(t+".scale"),u=i[t+"Info"]={note:a,scale:h,data:o,view:n,expanded:r(t+".expanded"),font:r(t+".font"),color:r(t+".color"),opacity:r(t+".opacity"),align:r(t+".align"),icon:r(t+".icon"),backgroundImage:r(t+".backgroundImage"),borderWidth:r(t+".border.width"),borderColor:r(t+".border.color"),background:n[e+"Background"](o)},d=i.getPosition(r(t+".position"),r(t+".offset.x"),r(t+".offset.y")),f=d.x,g=d.y;if(u.expanded){var v,_=r(t+".max"),p=r(t+".backgroundImage");p?(p=ma(p),v={width:Ls(p,o),height:js(p,o)}):v=Nn(u,a),v.width+=6,v.height+=2,_>0&&_<v.width&&(u.labelWidth=v.width,v.width=_),s=v.width,l=v.height+8,u.clickRect={x:f-s*h/2,y:g-l*h,width:s*h,height:l*h*v.height/l}}else{var b=r(t+".icon");b?(b=ma(b),s=Ls(b,o),l=js(b,o)):(s=12,l=18),u.clickRect={x:f-s*h/2,y:g-l*h,width:s*h,height:l*h}}u.rect={x:f-s/2,y:g-l*h/2-l/2,width:s,height:l};var y=m(u.borderWidth/2)*h;i._68o({x:f-s*h/2-y,y:g-l*h-y,width:s*h+2*y,height:l*h+2*y})}},_48O:function(){},_99O:function(t){var e=this,i=e._38o;if(i){var n=e.gv,o=e._data,r=i.icons;for(var a in r){var s=r[a],l=i.rects[a];if(l){var h=Rs(s.opacity,o,n),u=Rs(s.names,o,n),d=u?u.length:0,f=l.rotation;if(h!=c){var g=t.globalAlpha;t.globalAlpha*=h}for(var v=0;d>v;v++){var _=u[v],p=ma(_),b=l[v];if(f){var m=b.x+b.width/2,y=b.y+b.height/2;t.save(),$n(t,m,y),Kn(t,f),$n(t,-m,-y)}wa(t,p,Rs(s.stretch,o,n),b.x,b.y,b.width,b.height,e._data,e.gv),f&&t.restore()}h!=c&&(t.globalAlpha=g)}}}}});var wc=function(t,e){bn(wc,this,[t,e])};is(wc,yc,{_40O:function(t,e){var i=this,n=i.s,o=t.rect;(t.borderColor=i.gv.getBorderColor(i._data))&&(t.borderType=n("border.type"),t.borderWidth=n("border.width"),t.borderPadding=n("border.padding"),e=w(e,t.borderPadding+t.borderWidth/2)),(t.selectWidth=i._2o())&&(t.selectType=n("select.type"),t._97o=n("select.color"),t.selectPadding=n("select.padding"),e=w(e,t.selectPadding+t.selectWidth/2)),e>0&&(o=Sa(o),Ya(o,e)),i._68o(o)},_39O:function(t,e){var i=e.rect;if(e.borderWidth>0){var n=e.borderPadding;t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,Go(t,e.borderType,{x:i.x-n,y:i.y-n,width:i.width+2*n,height:i.height+2*n}),t.stroke()}e.selectWidth>0&&(n=e.selectPadding,t.strokeStyle=e._97o,t.lineWidth=e.selectWidth,Go(t,e.selectType,{x:i.x-n,y:i.y-n,width:i.width+2*n,height:i.height+2*n}),t.stroke())},_3O:function(){var t=this,e=t.s,i=t._data,n=i.getStyle(bt),o=t.getBodyColor(),r=t._83o=n?{shape:n,_53o:t.getBodyColor("shape.background"),_27Q:ma(e("shape.repeat.image"),o),_54o:e("shape.border.width"),_55o:e("shape.border.color"),_56o:e("shape.border.3d"),_57o:e("shape.border.3d.color"),_58o:e("shape.border.3d.accuracy"),shapeGradient:e("shape.gradient"),_59o:e("shape.gradient.color"),_60o:e("shape.border.pattern"),_61o:e("shape.border.cap"),_62o:e("shape.border.join")}:{img:ma(i.getImage(),o),bodyColor:o,stretch:e("image.stretch")};!L||(r.rect=i.getRect(),r.position=i.p(),r.rotation=i.getRotation(),n===vt&&(r._63o=e("shape.depth")),t._40O(r,n?Ro(c,r._54o/2,r._62o):0))},getPosition:function(t,e,i,n){var o=fr(t,this._83o.rect,n);return o.x+=e,o.y+=i,o},_80o:function(t){var e=this,i=e.s,n=e.gv,o=e._data,r=e._83o,a=r.rect,s=a,l=r.position,c=r.rotation,h=r.shape;if(a.width>0&&a.height>0){if(c&&(t.save(),$n(t,l.x,l.y),Kn(t,c),$n(t,-l.x,-l.y),s=o.getSize(),s.x=l.x-s.width/2,s.y=l.y-s.height/2),e.freeDraw)e.freeDraw(t,s,r);else if(h){var u,d,f,g,v=r._60o,_=Vs(t,v),p=r._53o,b=r._27Q,m=r._54o,y=r._55o,w=t.lineJoin,x=t.lineCap;if("roundRect"===h?u=i("shape.corner.radius"):"polygon"===h?u=i("shape.polygon.side"):"arc"===h&&(u=i("shape.arc.from"),d=i("shape.arc.to"),f=i("shape.arc.close"),g=i("shape.arc.oval")),t.lineJoin=r._62o,t.lineCap=r._61o,p||b?(b?Yo(t,b):Xo(t,p,r.shapeGradient,r._59o,s),Go(t,h,s,u,d,f,g),t.fill(),t!==_&&Go(_,h,s,u,d,f,g)):Go(_,h,s,u,d,f,g),m>0&&(t.lineWidth=m,t.strokeStyle=y,t.stroke(),r._56o&&Uo(t,y,r._57o,m,n._zoom,r._58o)),Ds(t,v),i("shape.dash")){var C=i("shape.dash.width")||m;if(C>0){v=i("shape.dash.pattern");var _=Vs(t,v,e._2Q("shape.dash.offset"));_!==t&&Go(_,h,s,u,d,f,g),e._1Q(t,"shape",C,v)}}$o(t,p,r._63o,s),t.lineJoin=w,t.lineCap=x}else wa(t,r.img,r.stretch,s.x,s.y,s.width,s.height,o,n,r.bodyColor);c&&t.restore()}e._39O(t,r)},_48O:function(){var t,e=this,i=e._data,n=e.gv,o=e._55O,r=n.getEditPointSize()/2+2;if(o._42O&&(t=i.getRect(),Ya(t,r)),o._56O){var a=o._98o=n.getRotationPoint(i);t=Ha(t,{x:a.x-r,y:a.y-r,width:2*r,height:2*r})}e._68o(t)},_47O:function(t){var e=this,i=e.gv,n=e._55O,o=e._data.getRect(),r=i.getEditPointSize(),a=n._98o;n._42O&&(t.fillStyle=i.getEditPointBackground(),t.strokeStyle=i.getEditPointBorderColor(),t.lineWidth=1,[{x:o.x,y:o.y},{x:o.x+o.width/2,y:o.y},{x:o.x+o.width,y:o.y},{x:o.x,y:o.y+o.height/2},{x:o.x+o.width,y:o.y+o.height/2},{x:o.x,y:o.y+o.height},{x:o.x+o.width/2,y:o.y+o.height},{x:o.x+o.width,y:o.y+o.height}].forEach(function(e){Qo(t,e.x-r/2,e.y-r/2,r,r),t.stroke()})),n._56O&&(t.fillStyle=i.getEditPointBorderColor(),t.strokeStyle=i.getEditPointBackground(),t.lineWidth=1,t.beginPath(),t.arc(a.x,a.y,r/2,0,E,!0),t.fill(),t.stroke())}});var xc=function(t,e){bn(xc,this,[t,e])},Cc=function(t,e,i,n){var o=Aa(t,e);return i=n?x(i,o):vl(i,o),o?i/=o:i=0,{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}};is(xc,yc,{_3O:function(){var t,e=this,i=e._data,n=e.gv,o=e.s,r=o(Qt),a=i.isLooped(),s=o("edge.width"),l=o("edge.center"),h=o("edge.offset"),u=n.getBorderColor(i),f=u?o("border.width"):0,g=e._2o(),v=i._40I,_=i._41I,p=e._78o=v&&_?{looped:a,type:r,width:s,center:l,color:e.getBodyColor("edge.color"),borderColor:u,borderWidth:f,_97o:g?o("select.color"):c,selectWidth:g,pattern:o("edge.pattern"),cap:o("edge.cap"),join:o("edge.join"),is3d:o("edge.3d"),_67o:o("edge.3d.color"),_66o:o("edge.3d.accuracy")}:c;if(p){var b=d.getEdgeType(r);if(b){var m=b(i,bl(e,n,i,a,r),n,e._19Q);m.points&&m.points.size()>1&&(p._4O=m,t=Wa(p._4O.points))}else{var y=hl(n,v,o("edge.source.position"),o("edge.source.offset.x"),o("edge.source.offset.y")),w=hl(n,_,o("edge.target.position"),o("edge.target.offset.x"),o("edge.target.offset.y"));if(r===Et){var x=p.points=o(Nt)||As,C=x.size();if(p.segments=o("edge.segments"),!l)if(h){var I=Cc(y,C?x.get(0):w,h,C),O=Cc(w,C?x.get(C-1):y,h,C);y=I,w=O}else{var S=cl(n,v),T=cl(n,_),V=In(y,C?x.get(0):w,S);V&&(y={x:V[0],y:V[1]}),(V=In(C?x.get(C-1):y,w,T))&&(w={x:V[0],y:V[1]})}t=Ha(Wa(p.points),Wa(y,w))}else{var E=bl(e,n,i,a,r);if(e._19Q||(E=-E),a)y=Sa(y),y.x-=v.getWidth()/2,p.radius=E,t={x:y.x-E,y:y.y-E,width:2*E,height:2*E};else{var k=Aa(y,w),P=vl(h,k),I={x:P,y:E},O={x:k-P,y:E},B=M(w.y-y.y,w.x-y.x),L=p.mat=new or(B);if(p.orienAngle=B,p.angle=w.x<y.x?B+D:B,p.rect={x:I.x,y:I.y,width:O.x-I.x,height:0},p.origin=y,I=L.tf(I),I.x+=y.x,I.y+=y.y,O=L.tf(O),O.x+=y.x,O.y+=y.y,l){var j={x:k,y:0};j=L.tf(j),j.x+=y.x,j.y+=y.y,t=Wa([y,I,O,j]),p.c1=y,p.c2=j}else t=Wa(I,O);y=I,w=O}}p._69o=y,p._70o=w}Ro(t,s/2+f+g,p.join),e._68o(t)}},getRotation:function(t,e,i){t=t||0;var n=this._78o;if(n){var o,r=n.angle,a=n.points,s=n._4O;if(r!=c)return e?n.orienAngle+t:r+t;if(s){var l=s.points;return o=l.size(),Gs[i]?o&&0==o%2?_l(l.get(o/2-1),l.get(o/2),e,t):t:Qs[i]?_l(l.get(0),l.get(1),e,t):_l(l.get(o-2),l.get(o-1),e,t)}if(a)return o=a.size(),Gs[i]?o&&0==o%2?_l(a.get(o/2-1),a.get(o/2),e,t):t:Qs[i]?_l(n._69o,o?a.get(0):n._70o,e,t):_l(o?a.get(o-1):n._69o,n._70o,e,t)}return t},getPosition:function(t,e,i,n,o){var r=this._78o;if(r){var a,s=r.type,l=r.points,c=r._4O,h=r._69o,u=r._70o;if(!s)return r.looped?{x:h.x-r.radius+e,y:h.y+i}:(o&&h&&u&&(h.x>u.x||h.x===u.x&&h.y>u.y)&&(t=dr[t],i=-i),a=fr(t,r.rect,n),a.x+=e,a.y+=i,a=r.mat.tf(a),a.x+=r.origin.x,a.y+=r.origin.y,a);if(l){var a,d=l.size();if(Gs[t]){if(d){var f=d%2;if(0===f)return pl(l.get(d/2-1),l.get(d/2),t,e,i,n,o);a=l.get((d-f)/2)}else a={x:(h.x+u.x)/2,y:(h.y+u.y)/2};return a=fr(t,{x:a.x,y:a.y,width:0,height:0},n),a.x+=e,a.y+=i,a}return Qs[t]?pl(h,d?l.get(0):u,t,e,i,n,o):pl(d?l.get(d-1):h,u,t,e,i,n,o)}if(c){var g=c.points,d=g.size();if(Gs[t]){var f=d%2;return 0===f?pl(g.get(d/2-1),g.get(d/2),t,e,i,n,o):(a=g.get((d-f)/2),a=fr(t,{x:a.x,y:a.y,width:0,height:0},n),a.x+=e,a.y+=i,a)}return Qs[t]?pl(g.get(0),g.get(1),t,e,i,n,o):pl(g.get(d-2),g.get(d-1),t,e,i,n,o)}}return Bi},_42:function(t){this._78o&&xc.superClass._42.call(this,t)},drawPath:function(t,e){t.beginPath();var i=e.type,n=e.points,o=e.segments,r=e._4O;if(!i||n){var a=e._69o,s=a.x,l=a.y,c=e._70o,h=c.x,u=c.y;if(i)if(o){var d=new Fs({x:s,y:l});d.addAll(n),d.add({x:h,y:u}),Wo(t,d,o)}else t.moveTo(s,l),n.each(function(e){t.lineTo(e.x,e.y)}),t.lineTo(h,u);else e.looped?t.arc(s,l,e.radius,0,E,!0):e.center?(t.moveTo(e.c1.x,e.c1.y),t.lineTo(s,l),t.lineTo(h,u),t.lineTo(e.c2.x,e.c2.y)):(t.moveTo(s,l),t.lineTo(h,u))}else r&&Wo(t,r.points,r.segments)},_80o:function(t){var e=this,i=e.s,n=e._78o,o=n.width,r=n.selectWidth,a=n.borderWidth,s=n.color,l=t.lineJoin,c=t.lineCap,h=n.pattern;if(t.lineJoin=n.join,t.lineCap=n.cap,e.drawPath(Vs(t,h),n),r&&(t.strokeStyle=n._97o,t.lineWidth=o+2*(a+r),t.stroke()),a&&(t.strokeStyle=n.borderColor,t.lineWidth=o+2*a,t.stroke()),t.strokeStyle=s,t.lineWidth=o,t.stroke(),n.is3d&&Uo(t,s,n._67o,o,e.gv._zoom,n._66o),Ds(t,h),i("edge.dash")){h=i("edge.dash.pattern");var u=Vs(t,h,e._2Q("edge.dash.offset"));u!==t&&e.drawPath(u,n),e._1Q(t,"edge",i("edge.dash.width")||o,h)}t.lineJoin=l,t.lineCap=c},_48O:function(){var t=this,e=t._78o;if(t._55O._43O&&e&&e.points){var i=Wa(e.points);i&&(Ya(i,t.gv.getEditPointSize()/2+2),t._68o(i))}},_47O:function(t){var e=this,i=e.gv,n=e._78o;if(e._55O._43O&&n&&n.points){var o=i.getEditPointSize()/2;t.fillStyle=i.getEditPointBackground(),t.strokeStyle=i.getEditPointBorderColor(),t.lineWidth=1,n.points.each(function(e){t.beginPath(),t.arc(e.x,e.y,o,0,E,!0),t.fill(),t.stroke()})}},_71o:function(t,e){var i=this,n=i._data;if(i._19Q=!0,!n.getEdgeGroup())return t?n.s("edge.gap"):0;var o,r=0,a=0,s=0;if(n.getEdgeGroup().getSiblings().each(function(t){t.each(function(t){if(i.gv.isVisible(t)&&t.s(Qt)==e){var l=t.s("edge.gap");o?(a+=s/2+l/2,s=l):(o=t,s=l),t===n&&(r=a)}})}),t)return a-r+s;var l=r-a/2;return o&&n._40I!==o._40I&&(i._19Q=!1),l}});var Ic=function(t,e){bn(Ic,this,[t,e])};is(Ic,wc,{_3O:function(){var t,e,i=this,n=i.s,o=i._data,r=i.gv;if(i._88I=c,o.isExpanded()&&o.eachChild(function(i){var n=r.getBoundsForGroup(i);n&&(e||(e=[]),e.push(n),t=Ha(t,n))}),t){var a=r.getLabel(o),s=n("group.type");t=ml(s,e,t),nl(t,o,"group.padding",1);var l=i._88I={type:s,rect:t,_64o:t};if(!s&&a!=c){var h,u=i.labelInfo={label:a,color:n("group.title.color"),font:n("group.title.font")},d=Nn(u,a),f=d.width,g=d.height,v=n("group.title.align");f>t.width&&(t.width=f),u.rect={y:t.y-g,width:d.width,height:g},h=v===et?t.x:v===it?t.x+t.width-f:t.x+t.width/2-f/2,u.rect.x=h,l.titleRect={x:t.x,y:t.y-g,width:t.width,height:g+1},l.rect={x:t.x,y:t.y-g,width:t.width,height:t.height+g}}i._40O(l,n("group.border.width")/2)}else Ic.superClass._3O.call(i)},getPosition:function(t,e,i,n){var o=this._88I;if(o){var r=fr(t,o.rect,n);return r.x+=e,r.y+=i,r}return Ic.superClass.getPosition.apply(this,arguments)},_24O:function(t,e){var i=this._88I;(!i||i.type||"label2"===t)&&Ic.superClass._24O.call(this,t,e)},_80o:function(t){var e=this,i=e._88I;if(i){var n=e._data,o=e.s,r=e.gv,a=i.type,s=i.rect,l=i._64o,c=i.titleRect,h=e.getBodyColor(),u=ma(o("group.image"),h),d=o("group.image.stretch"),f=e.getBodyColor("group.background"),g=ma(o("group.repeat.image"),h),v=o("group.gradient"),_=o("group.gradient.color"),p=o("group.depth");if(a){var b=o("group.border.pattern"),m=o("group.border.width"),y=t.lineJoin,w=t.lineCap;if(t.lineJoin=o("group.border.join"),t.lineCap=o("group.border.cap"),u){if(t.save(),Go(t,a,s),t.clip(),wa(t,u,d,s.x,s.y,s.width,s.height,n,r,h),t.restore(),m>0){var x=Vs(t,b);Go(x,a,s),t.lineWidth=m,t.strokeStyle=o("group.border.color"),t.stroke(),Ds(t,b)}}else{var x=Vs(t,b);f||g?(g?Yo(t,g):Xo(t,f,v,_,s),Go(t,a,s),t.fill(),t!==x&&Go(x,a,s)):Go(x,a,s),m>0&&(t.lineWidth=m,t.strokeStyle=o("group.border.color"),t.stroke()),Ds(t,b),a===vt&&$o(t,f,p,s)}t.lineJoin=y,t.lineCap=w}else if(u?wa(t,u,d,l.x,l.y,l.width,l.height,n,r,e.getBodyColor()):(f||g)&&(g?Yo(t,g):Xo(t,f,v,_,l),Go(t,vt,l),t.fill(),$o(t,f,p,l)),c){var C=o("group.title.background");Qo(t,c.x,c.y,c.width,c.height,C),$o(t,C,p,c)}e._39O(t,i)}else Ic.superClass._80o.call(e,t)}});var Oc=function(t,e){bn(Oc,this,[t,e])};is(Oc,wc,{_3O:function(){var t=this,e=t._data,i=t.s,n=t.gv,o=e.getPoints(),r=n.getBorderColor(e),a=r?i("border.width"):0,s=t._2o(),l=i("shape.border.width"),h=e.getRect(),u=n.getBodyColor(e),d=t._99o=o.isEmpty()?c:{rect:h,rotation:e.getRotation(),position:e.p(),points:o,segments:e.getSegments(),bodyColor:u,borderColor:r,borderWidth:a,_94o:i("shape.border.3d"),_95o:i("shape.border.3d.color"),_96o:i("shape.border.3d.accuracy"),_97o:s?i("select.color"):c,selectWidth:s,_53o:i("shape.background"),_27Q:ma(i("shape.repeat.image"),u),_54o:l,_55o:i("shape.border.color"),shapeGradient:i("shape.gradient"),_59o:i("shape.gradient.color"),_60o:i("shape.border.pattern"),_61o:i("shape.border.cap"),_62o:i("shape.border.join")};if(d){var f=l/2+a+s;f&&(h=Sa(h),Ro(h,f,d._62o)),t._68o(h)}},getPosition:function(t,e,i,n){var o=this._99o;if(o){var r=fr(t,o.rect,n);return r.x+=e,r.y+=i,r}return Bi},_42:function(t){this._99o&&Oc.superClass._42.call(this,t)},_80o:function(t){var e,i=this,n=i.s,o=i._99o,r=o.position,a=o.rotation,s=o.bodyColor,l=o.borderWidth,c=o.selectWidth,h=o._53o,u=o._27Q,d=o._54o,f=o.points,g=o.segments,v=i._data.isClosePath();a&&(t.save(),$n(t,r.x,r.y),Kn(t,a),$n(t,-r.x,-r.y));var _=o._60o,p=Vs(t,_),b=t.lineJoin,m=t.lineCap;if(t.lineJoin=o._62o,t.lineCap=o._61o,h||u?(u?Yo(t,u):(e=s||h,Xo(t,e,o.shapeGradient,o._59o,o.rect)),Wo(t,f,g,v),t.fill(),p!==t&&Wo(p,f,g,v)):Wo(p,f,g,v),c&&(t.strokeStyle=o._97o,t.lineWidth=d+2*(l+c),t.stroke()),l&&(t.strokeStyle=o.borderColor,t.lineWidth=d+2*l,t.stroke()),d&&(e=o._55o,!h&&s&&(e=s),t.strokeStyle=e,t.lineWidth=d,t.stroke(),o._94o&&Uo(t,e,o._95o,d,i.gv._zoom,o._96o)),Ds(t,_),n("shape.dash")){var y=n("shape.dash.width")||d;if(y>0){_=n("shape.dash.pattern");var p=Vs(t,_,i._2Q("shape.dash.offset"));p!==t&&Wo(p,f,g,v),i._1Q(t,"shape",y,_)}}t.lineJoin=b,t.lineCap=m,a&&t.restore()},_48O:function(){var t=this;if(Oc.superClass._48O.call(t),t._55O._43O){var e=t._data.getRect();Ya(e,t.gv.getEditPointSize()/2+2),t._68o(e)}},_47O:function(t){var e=this;if(Oc.superClass._47O.call(e,t),e._55O._43O){var i=e.gv,n=i.getEditPointSize()/2;t.fillStyle=i.getEditPointBackground(),t.strokeStyle=i.getEditPointBorderColor(),t.lineWidth=1,e._data.getPoints().each(function(e){t.beginPath(),t.arc(e.x,e.y,n,0,E,!0),t.fill(),t.stroke()})}}});var Sc=function(t,e){bn(Sc,this,[t,e])};is(Sc,Oc,{getRotation:function(t,e,i){t=t||0;var n=this._data.getPoints(),o=n.size();return o>1?Gs[i]?o&&0==o%2?_l(n.get(o/2-1),n.get(o/2),e,t):t:Qs[i]?_l(n.get(0),n.get(1),e,t):_l(n.get(o-2),n.get(o-1),e,t):t},getPosition:function(t,e,i,n,o){var r=this._data.getPoints(),a=r.size();if(a>1){if(Gs[t]){var s=a%2;if(0===s)return pl(r.get(a/2-1),r.get(a/2),t,e,i,n,o);var l=r.get((a-s)/2),c={x:l.x,y:l.y,width:0,height:0};return l=fr(t,c,n),l.x+=e,l.y+=i,l}return Qs[t]?pl(r.get(0),r.get(1),t,e,i,n,o):pl(r.get(a-2),r.get(a-1),t,e,i,n,o)}return Bi}});var Tc=function(t,e){bn(Tc,this,[t,e])};is(Tc,wc,{_3O:function(){var t=this;Tc.superClass._3O.call(t);var e=t.s,i=t._83o;t._82o=i.img||i.shape?c:{background:t.getBodyColor("grid.background"),depth:e("grid.depth"),rect:i.rect,_88o:e("grid.cell.depth"),cellBorderColor:e("grid.cell.border.color"),_89o:e("grid.row.count"),_90o:e("grid.column.count"),block:e("grid.block"),_91o:e("grid.block.color"),_92o:e("grid.block.padding"),_93o:e("grid.block.width")}},_80o:function(t){var e=this,i=e._82o;if(!i)return void Tc.superClass._80o.call(e,t);var n,o,r=e._data,a=i.background,s=i.rect,l=i.block,c=i._91o,h=i._92o,u=i._93o,d=i._88o,f=i.cellBorderColor,g=i._89o,v=i._90o;if(a)if(Qo(t,s.x,s.y,s.width,s.height,a),$o(t,a,i.depth,s),d)for(n=0;g>n;n++)for(o=0;v>o;o++)(s=r.getCellRect(n,o))&&$o(t,a,d,s);else if(f){for(t.beginPath(),n=0;g>n;n++)for(o=0;v>o;o++)(s=r.getCellRect(n,o))&&t.rect(s.x,s.y,s.width,s.height);t.strokeStyle=f,t.lineWidth=1,t.stroke()}if("h"===l)for(n=0;g>n;n++)s=Ha(r.getCellRect(n,0),r.getCellRect(n,v-1)),Ya(s,h),Jo(t,c,s.x,s.y,s.width,s.height,u);else if("v"===l)for(o=0;v>o;o++)s=Ha(r.getCellRect(0,o),r.getCellRect(g-1,o)),Ya(s,h),Jo(t,c,s.x,s.y,s.width,s.height,u);e._39O(t,e._83o)}});var Vc=yl.Interactor=function(t){this.gv=this._graphView=t};wl("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(t){this.gv.fi(t)},setCursor:function(t){q||(this.getView().style.cursor=t)},startDragging:function(t){var e=this;e._lastClientPoint=za(t),e._lastLogicalPoint=e.gv.lp(t),Za(e,t)},clearDragging:function(){var t=this;t._lastClientPoint=t._lastLogicalPoint=t._logicalPoint=c},autoScroll:function(t){return this.gv.autoScroll(t,this._lastClientPoint)}});var Dc=yl.DefaultInteractor=function(t){bn(Dc,this,[t])};wl("DefaultInteractor",Vc,{handle_mousedown:function(t){pa(t);var e=this,i=e.gv,n=i.getDataAt(t);i.setFocus(t)&&!i._editing&&(La(t)?i.handleDoubleClick(t,n):i.handleClick(t,n),i.isPannable()&&!n&&Ma(t)&&!Ra(t)&&(e._tx=i.tx(),e._ty=i.ty(),e.startDragging(t)))},handleWindowMouseUp:function(t){var e=this,i=e.gv;i._panning&&(delete i._panning,i.onPanEnded(),e.fi({kind:"endPan",event:t})),delete e._tx,delete e._ty,e.clearDragging()},handle_mousemove:function(t){var e=this,i=e.gv;e._hoverTimer&&(W(e._hoverTimer),delete e._hoverTimer),e._hoverTimer=A(function(){e.fi({kind:"hover",event:t}),W(e._hoverTimer),delete e._hoverTimer},i.getHoverDelay()||800)},handle_touchmove:function(t){this.handle_mousemove(t)},handleWindowMouseMove:function(t){var e=this,i=e.gv,n=e._lastClientPoint;e.fi({kind:i._panning?"betweenPan":"beginPan",event:t}),i._panning=1,i.setTranslate(e._tx+t.clientX-n.x,e._ty+t.clientY-n.y)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)}});var Ec=yl.SelectInteractor=function(t){bn(Ec,this,[t])};wl("SelectInteractor",Vc,{_42:function(){var t=this,e=t.gv,i=e.getZoom(),n=t.mark,o=t.div;o||(o=t.div=zn(),Un(t.getView(),o));var r={};r.x=n.x*i+e.tx(),r.y=n.y*i+e.ty(),r.width=n.width*i,r.height=n.height*i,io(o,r),this.intersects()?(o.style.border="",o.style.background=e.getRectSelectBackground()):(o.style.background="",o.style.border="1px solid "+e.getRectSelectBorderColor())},handle_mousedown:function(t){var e=this,i=e.gv;if(e._57I=c,!i._editing){var n=i.getDataAt(t),o=i.sm();n?Ra(t)?o.co(n)?o.rs(n):o.as(n):o.co(n)||o.ss(n):Ra(t)||!i.isPannable()?Ma(t)&&(Ra(t)||o.cs(),i.isRectSelectable()&&(e.startDragging(t),i._77O=1)):e._57I=za(t)}},handle_mouseup:function(t){var e=this,i=e._57I;i&&(Aa(i,za(t))<=1&&e.gv.sm().cs(),e._57I=c)},handleWindowMouseUp:function(t){this.clear(t)},handleWindowMouseMove:function(t){var e=this,i=e.gv;e._logicalPoint=i.lp(t),e.mark?(e.fi({kind:"betweenRectSelect",event:t}),e.autoScroll(t),e.redraw()):e.fi({kind:"beginRectSelect",event:t}),e.mark=Wa(e._lastLogicalPoint,e._logicalPoint),e.redraw()},intersects:function(){var t=this,e=t._lastLogicalPoint,i=t._logicalPoint;return e.x>i.x||e.y>i.y},clear:function(t){var e=this,i=e.gv,n=e.mark;if(e._57I=c,e._lastLogicalPoint){if(n){if(0!==n.width&&0!==n.height){var o=i.getDatasInRect(n,e.intersects());if(!o.isEmpty()){var r=i.sm(),a=r.toSelection();o.each(function(t){r.co(t)?a.remove(t):a.add(t)}),r.ss(a)}}Ja(e.div),delete e.div,delete e.mark,e.redraw(),e.fi({kind:"endRectSelect",event:t}),i.onRectSelectEnded()}e.clearDragging(),delete i._77O}},redraw:function(){var t=this;t._draw||(t._draw=1,A(function(){t.mark&&t._42(),delete t._draw},16))}});var kc=yl.MoveInteractor=function(t){bn(kc,this,[t])};wl("MoveInteractor",Vc,{handle_mousedown:function(t){var e=this,i=e.gv;if(Ma(t)&&!i._editing){var n=i.getSelectedDataAt(t);n?(e._data=n,i.handleMouseDown&&i.handleMouseDown(t,n),e.startDragging(t),i.isMovable(n)&&(i._moving=1)):i._focusData=c}},handleWindowMouseUp:function(t){var e=this,i=e.gv;i.handleMouseUp&&i.handleMouseUp(t,e._data),e.clear(t)},handleWindowMouseMove:function(t){var e=this,i=e.gv,n=e._data,o=i.getDataModel(),r=o.getHistoryManager();if((!i._93O||!i._93O(t,n))&&i._moving){var a=e._logicalPoint?"betweenMove":"beginMove",s={kind:a,event:t},l=e._logicalPoint=i.lp(t);r&&"beginMove"===a&&r.beginInteraction();var c=l.x-e._lastLogicalPoint.x,h=l.y-e._lastLogicalPoint.y,u=i.getMoveMode(t,n);u&&("x"===u?h=0:"y"===u?c=0:"xy"!==u&&(c=h=0)),i.moveSelection(c,h),e._lastLogicalPoint=l,e.autoScroll(t),e.fi(s)}},clear:function(t){var e=this,i=e.gv,n=i.getDataModel(),o=n.getHistoryManager();e._lastLogicalPoint&&(e._lastLogicalPoint=e._data=i._moving=c,e._logicalPoint&&(e.fi({kind:"endMove",event:t}),i.onMoveEnded(),o&&o.endInteraction()),e.clearDragging())}});var Pc=yl.EditInteractor=function(t){bn(Pc,this,[t])};wl("EditInteractor",Vc,{ms_edit:1,setUp:function(){var t=this;Pc.superClass.setUp.call(t),q||t.gv.setEditInteractor(t)},tearDown:function(){Pc.superClass.tearDown.call(this),q||this.gv.setEditInteractor(c)},clear:function(){var t=this,e=t.gv;e._editing&&(e._editing=t._77I=t._node=t._edge=t._shape=t._rect=t._89I=t._index=c,t.clearDragging(),t.setCursor(Z))},handle_mousedown:function(t){var e=this,i=e.gv.dm(),n=i.getHistoryManager(),o=e._index,r=e._node,a=e._shape,s=e._edge,l=e._77I,c=e._89I;Ma(t)&&e.gv._editing&&(r&&c?(e._rect=r.getRect(),e.startDragging(t),n&&n.beginInteraction(),e.fi({kind:"beginEditRect",event:t,data:r,direction:c})):a&&o>=0?(e.startDragging(t),n&&n.beginInteraction(),e.fi({kind:"beginEditPoint",event:t,data:a,index:o})):s&&o>=0?(e.startDragging(t),n&&n.beginInteraction(),e.fi({kind:"beginEditPoint",event:t,data:s,index:o})):l&&(e.startDragging(t),n&&n.beginInteraction(),e.fi({kind:"beginEditRotation",event:t,data:l})))},handleWindowMouseUp:function(t){this._46O(t),this.clear()},handleWindowMouseMove:function(t){this._78I(t)},handle_mousemove:function(t){if(!ro){var e=this,i=e.gv;e._79I(t,i.getSelectedDataAt(t))?i._editing=1:e.clear()}}});var Mc=yl.TouchInteractor=function(t,e){e=e||{},e.selectable===i&&(e.selectable=!0),e.movable===i&&(e.movable=!0),e.pannable===i&&(e.pannable=!0),e.pinchable===i&&(e.pinchable=!0),e.editable===i&&(e.editable=!0),this.params=e,bn(Mc,this,[t])};wl("TouchInteractor",Vc,{ms_edit:1,setUp:function(){var t=this;Mc.superClass.setUp.call(t),q&&t.params.editable&&t.gv.setEditInteractor(t)},tearDown:function(){var t=this;Mc.superClass.tearDown.call(t),q&&t.params.editable&&t.gv.setEditInteractor(c)},clear:function(t){var e=this,i=e.gv,n=i.dm().getHistoryManager();i._moving&&(e.fi({kind:"endMove",event:t}),delete i._moving,i.onMoveEnded(),n&&n.endInteraction()),i._panning&&(e.fi({kind:"endPan",event:t}),delete i._panning,i.onPanEnded()),i._pinching&&(e.fi({kind:"endPinch",event:t}),delete i._pinching,i.onPinchEnded()),i._editing&&(e._46O(t),e._77I=e._node=e._edge=e._shape=e._rect=e._89I=e._index=i._editing=c),e._moving=e._panning=e._pinching=e._editing=e._57I=e._data=e._beginHistory=c,e.clearDragging()},handle_touchstart:function(t){var e=this;if(!e.gv._editing){pa(t),e._57I=c;var i=e.params,n=e.gv,o=n.sm(),r=n.getDataAt(t),a=Ba(t);if(1===a)La(t)?n.handleDoubleClick(t,r):(n.handleClick(t,r),r&&(n.handleMouseDown&&n.handleMouseDown(t,r),e._data=r)),i.selectable||(r=c),r?(o.co(r)||o.ss(r),i.editable&&n.isEditable(r)&&e._79I(t,r,!0)?(e._editing=1,e.startDragging(t)):i.movable&&n.isMovable(r)&&(e._moving=1,e.startDragging(t))):(e._57I=za(t),i.pannable&&n.isPannable()&&(e._panning=1,e.startDragging(t),e._translate={x:n.tx(),y:n.ty()}));else if(i.pinchable&&2===a){e._pinching=1,e.startDragging(t);var s=n.getView(),l=n.getZoom(),h=s.getBoundingClientRect(),u=t.touches[0],d=t.touches[1],f={x:(u.clientX+d.clientX)/2-h.left,y:(u.clientY+d.clientY)/2-h.top};f.x-=n.tx(),f.y-=n.ty(),f.x/=l,f.y/=l,e._p=f,e._d=ar(t)}}},handle_touchend:function(t){var e=this,i=e.gv,n=e._57I,o=e._data;n&&(Aa(n,za(t))<=1&&i.sm().cs(),e._57I=c),o&&i.handleMouseUp&&i.handleMouseUp(t,o)},handleWindowTouchEnd:function(t){this.clear(t)},handleWindowTouchMove:function(t){var e=this,i=e.gv,n=i.dm().getHistoryManager(),o=Ba(t);if(1===o){if(e._editing&&(n&&!e._beginHistory&&(e._beginHistory=1,n.beginInteraction()),i._editing=1,e._78I(t)),e._moving)n&&!e._beginHistory&&(e._beginHistory=1,n.beginInteraction()),e.handleMove(t);else if(e._panning){var r=za(t);i.setTranslate(e._translate.x+r.x-e._lastClientPoint.x,e._translate.y+r.y-e._lastClientPoint.y),e.fi({kind:i._panning?"betweenPan":"beginPan",event:t}),i._panning=1}}else if(2===o&&e._pinching){var a=ar(t);i.handlePinch(e._p,a,e._d),e._d=a,e.fi({kind:i._pinching?"betweenPinch":"beginPinch",event:t}),i._pinching=1}},handleMove:function(t){var e=this,i=e.gv,n=i.lp(t);i._93O&&i._93O(t,e._data)||(i.moveSelection(n.x-e._lastLogicalPoint.x,n.y-e._lastLogicalPoint.y),e._lastLogicalPoint=n,e.autoScroll(t),e.fi({kind:i._moving?"betweenMove":"beginMove",event:t}),i._moving=1)}});var Bc="light.color";vn(d,{graph3dViewAttributes:c,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:D/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:_r,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:D/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(t,e){yi[t]=e},getShape3dModel:function(t){return yi[t]},createMatrix:function(t,e){rn(t)||(t=[t]);for(var i=t.length-1;i>=0;i--){var n=t[i];e=Cs(n.mat,n.s3,n.r3,n.rotationMode,n.t3,e)}return e},transformVec:function(t,e){return _s(t,e)},createBoxModel:function(){return{vs:Su,ns:Eu,uv:Vu,is:Tu}},createRoundRectModel:function(t,e){return Wu.roundRect(t,e)},createStarModel:function(t,e){return Wu.star(t,e)},createRectModel:function(t,e){return Wu.rect(t,e)},createTriangleModel:function(t,e){return Wu.triangle(t,e)},createRightTriangleModel:function(t,e){return Wu.rightTriangle(t,e)},createParallelogramModel:function(t,e){return Wu.parallelogram(t,e)},createTrapezoidModel:function(t,e){return Wu.trapezoid(t,e)},createSmoothSphereModel:function(t,e,i,n,o,r,a){return Il(new ic(t,e,i,n,o,r,a))},createSphereModel:function(t,e,i,n,o,r){return t?Mu(t,e,i,n,o,r):d.createSmoothSphereModel()},createSmoothConeModel:function(t,e,i,n,o){return zu(t,e,i,n,o)},createConeModel:function(t,e,i,n,o,r){return t?Fu(t,e,i,n,o,r):zu(r)},createSmoothCylinderModel:function(t,e,i,n,o,r,a,s){return Il(new ec(t,e,i,n,o,r,a,s))},createCylinderModel:function(t,e,i,n,o,r,a){return t?Ru(t,e,i,n,o,r,a):ju(r,a)},createSmoothTorusModel:function(t,e,i,n,o,r){return Il(new nc(t,e,i,n,o,r))},createTorusModel:function(t,e,i,n,o,r,a){return t?Lu(t,e,i,n,o,r,a):Bu(r,a)},createExtrusionModel:function(t,e,i,n,o,r,a,s){return Au(t,e,i,n,o,r,a,s)},createSmoothRingModel:function(t,e,i,n,o,r){for(var a=[],s=0;s<t.length-1;s+=2)a.push({x:t[s],y:t[s+1]});for(t=Ho(a,e,i)[0],a=[],s=0;s<t.length;s++){var l=t[s];a.push(new Vl(l.x,0,l.y))}return Il(new sc(a,r,n,o))},createRingModel:function(t,e,i,n,o,r,a,s,l,h){for(var u=[],f=0;f<t.length-1;f+=2)u.push({x:t[f],y:t[f+1]});r=r||d.shapeSide,a=a||0,s=s||r;var g,v,_,p,b,m,y,w,x,C,f,O,T,V,D,E,k,P,M=[],B=[],L=l?[]:c,j=l?[]:c,R=h?[]:c,z=h?[]:c,F=n?[]:c,A=n?[]:c,W=o?[]:c,H=o?[]:c,t=Ho(u,e,i),U=kn(t),N=0,Q=2*Math.PI/r;return t.forEach(function(t){if((_=t.length)>1){if(p=t[0],n)for(m=p.x,w=p.y,f=a;s>f;f++)O=f+1,T=f*Q,V=O*Q,D=I(T),E=S(T),k=I(V),P=S(V),F.push(D*m,w,-E*m,k*m,w,-P*m,0,w,0),A.push(.5-.5*D,.5-.5*E,.5-.5*k,.5-.5*P,.5,.5);for(C=0;_>C;C++){for(b=t[C],m=p.x,y=b.x,w=p.y,x=b.y,g=N/U,N+=Aa(p,b),v=N/U,f=a;s>f;f++)O=f+1,T=f*Q,V=O*Q,D=I(T),E=S(T),k=I(V),P=S(V),M.push(D*y,x,-E*y,k*y,x,-P*y,D*m,w,-E*m,k*y,x,-P*y,k*m,w,-P*m,D*m,w,-E*m),B.push(f/r,v,O/r,v,f/r,g,O/r,v,O/r,g,f/r,g),l&&f===a&&(L.push(0,w,0,0,x,0,D*y,x,-E*y,D*y,x,-E*y,D*m,w,-E*m,0,w,0),j.push(0,.5-w,0,.5-x,2*y,.5-x,2*y,.5-x,2*m,.5-w,0,.5-w)),h&&O===s&&(R.push(0,w,0,k*y,x,-P*y,0,x,0,k*y,x,-P*y,0,w,0,k*m,w,-P*m),z.push(1,.5-w,1-2*y,.5-x,1,.5-x,1-2*y,.5-x,1,.5-w,1-2*m,.5-w));p=b}if(o)for(m=p.x,w=p.y,f=a;s>f;f++)O=f+1,T=f*Q,V=O*Q,D=I(T),E=S(T),k=I(V),P=S(V),W.push(k*m,w,-P*m,D*m,w,-E*m,0,w,0),H.push(.5-.5*k,.5+.5*P,.5-.5*D,.5+.5*E,.5,.5)}}),{vs:M,uv:B,bottom_vs:W,bottom_uv:H,top_vs:F,top_uv:A,from_vs:L,from_uv:j,to_vs:R,to_uv:z}}},!0),vn(f,{"3d.move.mode":i,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":i,"edge.gradient.color":i,"edge.source.t3":i,"edge.target.t3":i,"light.type":"point","light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":D/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Dr,"wf.short":!1,"wf.mat":i,batch:i,"transparent.mask":!1,brightness:i,"select.brightness":.7,
"repeat.uv.length":i,"label.face":K,"label.t3":i,"label.r3":i,"label.texture.scale":2,"label.rotationMode":uc,"label.light":!1,"label.blend":i,"label.reverse.flip":!1,"label.reverse.color":gr,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":K,"label2.t3":i,"label2.r3":i,"label2.texture.scale":2,"label2.rotationMode":uc,"label2.light":!1,"label2.blend":i,"label2.reverse.flip":!1,"label2.reverse.color":gr,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":K,"note.t3":i,"note.r3":i,"note.texture.scale":2,"note.rotationMode":uc,"note.light":!1,"note.blend":i,"note.reverse.flip":!1,"note.reverse.color":gr,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":K,"note2.t3":i,"note2.r3":i,"note2.texture.scale":2,"note2.rotationMode":uc,"note2.light":!1,"note2.blend":i,"note2.reverse.flip":!1,"note2.reverse.color":gr,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:i,"shape3d.color":Tr,"shape3d.top.color":i,"shape3d.bottom.color":i,"shape3d.from.color":i,"shape3d.to.color":i,"shape3d.image":i,"shape3d.top.image":i,"shape3d.bottom.image":i,"shape3d.from.image":i,"shape3d.to.image":i,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":i,"shape3d.side.to":i,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":i,"shape3d.opacity":i,"shape3d.reverse.flip":!1,"shape3d.reverse.color":gr,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":i,"shape3d.uv.scale":i,"shape3d.top.uv.offset":i,"shape3d.top.uv.scale":i,"shape3d.bottom.uv.offset":i,"shape3d.bottom.uv.scale":i,"shape3d.from.uv.offset":i,"shape3d.from.uv.scale":i,"shape3d.to.uv.offset":i,"shape3d.to.uv.scale":i,"shape3d.top.cap":i,"shape3d.bottom.cap":i,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":Tr,"all.image":i,"all.blend":i,"all.opacity":i,"all.reverse.flip":!1,"all.reverse.color":gr,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":i,"all.uv.offset":i,"all.uv.scale":i,"all.discard.selectable":!0,mat:i,"left.mat":i,"right.mat":i,"top.mat":i,"bottom.mat":i,"front.mat":i,"back.mat":i},!0);var Lc,jc=!1,Rc=[0,0,0,1/255],zc={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:et,2:it,3:nt,4:ot,5:K,6:tt}},Fc=function(t,e,i,n){if(e.getFaceVisible(t,i)){Fh(e,xs(t,e.getFaceMat(t,i)||e.getMat(t)));var o=e._26I;e.getFaceReverseCull(t,i)?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),Bh(o,e._prg.uFixPickReverseColor,zc[i]),Th(o),kh(o,n,6),Vh(o),Rh(e)}},Ac=function(t){return t instanceof od},Wc=function(t){return[t.x,t.e||0,t.y]},Hc=function(t,e,i){for(var e=Lo(e),n=e[0],o=e[1],r=e[2];i--;)t.push(n,o,r)},Uc=function(t,e,i){for(var e=Lo(e),n=e[0],o=e[1],r=e[2],a=e[3];i--;)t.push(n,o,r,a)},Nc=function(t,e,i){if(e)for(var n,o,r,a=e[0],s=e[1],l=e[2],c=e[4],h=e[5],u=e[6],d=e[8],f=e[9],g=e[10],v=e[12],_=e[13],p=e[14],b=i.length,m=0,m=0;b>m;m+=3)n=i[m],o=i[m+1],r=i[m+2],t.push(a*n+c*o+d*r+v,s*n+h*o+f*r+_,l*n+u*o+g*r+p);else fn(t,i)},Qc=function(t,e){var i=e.s("light.intensity"),n=Lo(e.s(Bc)),o=n[0],r=n[1],a=n[2];1!==i&&(o*=i,r*=i,a*=i),t.push(o,r,a,e.s("light.disabled")?1:0)},Gc=function(t,e,i){Bh(e,i.uHeadlightRange,t._headlightRange);var n=t._headlightIntensity,o=Lo(t._headlightColor);1!==n&&(o=[o[0]*n,o[1]*n,o[2]*n]),Bh(e,i.uHeadlightColor,[o[0],o[1],o[2],t._headlightDisabled?1:0]);var r=t._59O,a=t._spots,s=t._dirs;if(r.length){var l=[],c=[],h=[];r.forEach(function(t){Qc(l,t),fn(c,t.p3()),h.push(t.s("light.range"))}),e.uniform4fv(i.uPointColor,l),e.uniform1fv(i.uPointRange,h),e.uniform3fv(i.uPointPosition,c)}if(a.length){var u=[],d=[],f=[],g=[],v=[],_=[];a.forEach(function(t){Qc(u,t),fn(d,t.p3()),fn(f,t.s("light.center")),g.push(t.s("light.range")),v.push(I(t.s("light.angle")/2)),_.push(t.s("light.exponent"))}),e.uniform4fv(i.uSpotColor,u),e.uniform1fv(i.uSpotRange,g),e.uniform1fv(i.uSpotAngle,v),e.uniform1fv(i.uSpotExponent,_),e.uniform3fv(i.uSpotPosition,d),e.uniform3fv(i.uSpotCenter,f)}if(s.length){var p=[],b=[];s.forEach(function(t){Qc(p,t),fn(b,t.p3())}),e.uniform4fv(i.uDirColor,p),e.uniform3fv(i.uDirPosition,b)}},Xc=function(t){return t>0&&0==(t-1&t)},Yc=function(t){return t=w(0,x(D,t)),t=w(rs,x(D-rs,t))},qc=function(){return.05+B()/2},Zc=function(t,e,i,n){var o,r=t.getEye();return t.isOrtho()?(o=ls(t.getCenter(),r),o[0]+=n[0],o[1]+=n[1],o[2]+=n[2]):o=r,Jc(e,i,n,o)},Jc=function(t,e,i,n){var o=hs(t,e),r=ls(n,i,!0),a=hs(r,e);if(C(a)<rs)return c;var s=(o-hs(i,e))/a;return[i[0]+r[0]*s,i[1]+r[1]*s,i[2]+r[2]*s]},$c=function(t,e){return{x:2*t.x-e.x,y:2*t.y-e.y}},Kc=function(t,e,i,n){var o,r;if(!t)return o=M(e.y-i.y,i.x-e.x),{x:e.x+n*S(o),y:e.y+n*I(o)};if(!i)return o=M(t.y-e.y,e.x-t.x),{x:e.x+n*S(o),y:e.y+n*I(o)};var a=ls([t.x,t.y,0],[e.x,e.y,0],!0),s=ls([i.x,i.y,0],[e.x,e.y,0],!0),l=-(a[0]+s[0])/2,c=-(a[1]+s[1])/2,h=y(l*l+c*c);return rs>h?(o=M(t.y-e.y,e.x-t.x),{x:e.x+n*S(o),y:e.y+n*I(o)}):(o=O(hs(a,s))/2,r=a[1]*s[0]-a[0]*s[1]>0?-1:1,l/=h,c/=h,h=n/S(o),{x:e.x+r*h*l,y:e.y+r*h*c})},th=function(t){var e=t[1],i=t[2],n=t[3],o=t[6],r=t[7],a=t[11];t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=i,t[9]=o,t[11]=t[14],t[12]=n,t[13]=r,t[14]=a},eh=function(t){var e=t[0],i=t[1],n=t[2],o=t[3],r=t[4],a=t[5],s=t[6],l=t[7],h=t[8],u=t[9],d=t[10],f=t[11],g=t[12],v=t[13],_=t[14],p=t[15],b=e*a-i*r,m=e*s-n*r,y=e*l-o*r,w=i*s-n*a,x=i*l-o*a,C=n*l-o*s,I=h*v-u*g,O=h*_-d*g,S=h*p-f*g,T=u*_-d*v,V=u*p-f*v,D=d*p-f*_,E=b*D-m*V+y*T+w*S-x*O+C*I;return E?(E=1/E,t[0]=(a*D-s*V+l*T)*E,t[1]=(n*V-i*D-o*T)*E,t[2]=(v*C-_*x+p*w)*E,t[3]=(d*x-u*C-f*w)*E,t[4]=(s*S-r*D-l*O)*E,t[5]=(e*D-n*S+o*O)*E,t[6]=(_*y-g*C-p*m)*E,t[7]=(h*C-d*y+f*m)*E,t[8]=(r*V-a*S+l*I)*E,t[9]=(i*S-e*V-o*I)*E,t[10]=(g*x-v*y+p*b)*E,t[11]=(u*y-h*x-f*b)*E,t[12]=(a*O-r*T-s*I)*E,t[13]=(e*T-i*O+n*I)*E,t[14]=(v*m-g*w-_*b)*E,void(t[15]=(h*w-u*m+d*b)*E)):c},ih=function(t,e){if(e){var i=e[0],n=e[1],o=e[2];t[12]=t[0]*i+t[4]*n+t[8]*o+t[12],t[13]=t[1]*i+t[5]*n+t[9]*o+t[13],t[14]=t[2]*i+t[6]*n+t[10]*o+t[14],t[15]=t[3]*i+t[7]*n+t[11]*o+t[15]}},nh=function(t,e){if(e){var i=e[0],n=e[1],o=e[2];t[0]=t[0]*i,t[1]=t[1]*i,t[2]=t[2]*i,t[3]=t[3]*i,t[4]=t[4]*n,t[5]=t[5]*n,t[6]=t[6]*n,t[7]=t[7]*n,t[8]=t[8]*o,t[9]=t[9]*o,t[10]=t[10]*o,t[11]=t[11]*o}},oh=function(t,e,i){var n=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=e[9],f=e[10],g=e[11],v=e[12],_=e[13],p=e[14],b=e[15],m=i[0],y=i[1],w=i[2],x=i[3];return t[0]=m*n+y*s+w*u+x*v,t[1]=m*o+y*l+w*d+x*_,t[2]=m*r+y*c+w*f+x*p,t[3]=m*a+y*h+w*g+x*b,m=i[4],y=i[5],w=i[6],x=i[7],t[4]=m*n+y*s+w*u+x*v,t[5]=m*o+y*l+w*d+x*_,t[6]=m*r+y*c+w*f+x*p,t[7]=m*a+y*h+w*g+x*b,m=i[8],y=i[9],w=i[10],x=i[11],t[8]=m*n+y*s+w*u+x*v,t[9]=m*o+y*l+w*d+x*_,t[10]=m*r+y*c+w*f+x*p,t[11]=m*a+y*h+w*g+x*b,m=i[12],y=i[13],w=i[14],x=i[15],t[12]=m*n+y*s+w*u+x*v,t[13]=m*o+y*l+w*d+x*_,t[14]=m*r+y*c+w*f+x*p,t[15]=m*a+y*h+w*g+x*b,t},rh=function(t,e,i,n){var o,r,a,s,l,c,h,u,d,f,g=e[0],v=e[1],_=e[2],p=n[0],b=n[1],m=n[2],w=i[0],x=i[1],I=i[2];return C(g-w)<rs&&C(v-x)<rs&&C(_-I)<rs?vs(t):(h=g-w,u=v-x,d=_-I,f=1/y(h*h+u*u+d*d),h*=f,u*=f,d*=f,o=b*d-m*u,r=m*h-p*d,a=p*u-b*h,f=y(o*o+r*r+a*a),f?(f=1/f,o*=f,r*=f,a*=f):(o=0,r=0,a=0),s=u*a-d*r,l=d*o-h*a,c=h*r-u*o,f=y(s*s+l*l+c*c),f?(f=1/f,s*=f,l*=f,c*=f):(s=0,l=0,c=0),t[0]=o,t[1]=s,t[2]=h,t[3]=0,t[4]=r,t[5]=l,t[6]=u,t[7]=0,t[8]=a,t[9]=c,t[10]=d,t[11]=0,t[12]=-(o*g+r*v+a*_),t[13]=-(s*g+l*v+c*_),t[14]=-(h*g+u*v+d*_),t[15]=1,t)},ah=function(t,e,i,n,o){var r=1/P(e/2),a=1/(n-o);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*n*a,t[15]=0,t},sh=function(t,e,i,n,o,r,a){var s=1/(e-i),l=1/(n-o),c=1/(r-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*s,t[13]=(o+n)*l,t[14]=(a+r)*c,t[15]=1,t},lh=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],a=i*i+n*n+o*o+r*r,s=a?1/a:0;return t[0]=-i*s,t[1]=-n*s,t[2]=-o*s,t[3]=r*s,t},ch=function(t,e){var i=e[0]+e[5]+e[10],n=0;return i>0?(n=2*Math.sqrt(i+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},hh=function(t,e,i){var n=e[0],o=e[1],r=e[2],a=e[3],s=n+n,l=o+o,c=r+r,h=n*s,u=n*l,d=n*c,f=o*l,g=o*c,v=r*c,_=a*s,p=a*l,b=a*c;return t[0]=1-(f+v),t[1]=u+b,t[2]=d-p,t[3]=0,t[4]=u-b,t[5]=1-(h+v),t[6]=g+_,t[7]=0,t[8]=d+p,t[9]=g-_,t[10]=1-(h+f),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},uh=function(t,e){return rh(e||us(),t._eye,t._center,t._up)},dh=function(t){var e=t.getAspect(),i=t._near,n=t._far,o=us();if(t._ortho){var r=t._orthoWidth/2,a=r/e;sh(o,-r,r,-a,a,i,n)}else ah(o,t._fovy,e,i,n);return o},fh=function(t,e){if(!t)return c;var i=[],n=0,o=t.length,r=o/3;if(e){for(;o>n;n++)i[n]=0;for(n=0;n<e.length;n+=3){var a=[],s=[],l=[];a[0]=t[3*e[n+1]+0]-t[3*e[n]+0],a[1]=t[3*e[n+1]+1]-t[3*e[n]+1],a[2]=t[3*e[n+1]+2]-t[3*e[n]+2],s[0]=t[3*e[n+2]+0]-t[3*e[n+1]+0],s[1]=t[3*e[n+2]+1]-t[3*e[n+1]+1],s[2]=t[3*e[n+2]+2]-t[3*e[n+1]+2],l[0]=a[1]*s[2]-a[2]*s[1],l[1]=a[2]*s[0]-a[0]*s[2],l[2]=a[0]*s[1]-a[1]*s[0];for(var h=0;3>h;h++)i[3*e[n+h]+0]+=l[0],i[3*e[n+h]+1]+=l[1],i[3*e[n+h]+2]+=l[2]}}else for(n=0;r>n;n+=3){var a=[],s=[],l=[];a[0]=t[3*(n+1)+0]-t[3*n+0],a[1]=t[3*(n+1)+1]-t[3*n+1],a[2]=t[3*(n+1)+2]-t[3*n+2],s[0]=t[3*(n+2)+0]-t[3*(n+1)+0],s[1]=t[3*(n+2)+1]-t[3*(n+1)+1],s[2]=t[3*(n+2)+2]-t[3*(n+1)+2],l[0]=a[1]*s[2]-a[2]*s[1],l[1]=a[2]*s[0]-a[0]*s[2],l[2]=a[0]*s[1]-a[1]*s[0];for(var h=0;3>h;h++)i[3*(n+h)+0]=l[0],i[3*(n+h)+1]=l[1],i[3*(n+h)+2]=l[2]}for(n=0;o>n;n+=3){var u=[];u[0]=i[n+0],u[1]=i[n+1],u[2]=i[n+2];var d=y(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]);0===d&&(d=rs),u[0]=u[0]/d,u[1]=u[1]/d,u[2]=u[2]/d,i[n+0]=u[0],i[n+1]=u[1],i[n+2]=u[2]}return new ss(i)},gh=function(t,e,i){if(i||(i=t.createTexture()),e){var n=t.TEXTURE_2D,o=t.LINEAR,r=t.REPEAT,a=t.CLAMP_TO_EDGE,s=t.TEXTURE_MIN_FILTER;mh(t,i),t.texImage2D(n,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),wh(t,t.TEXTURE_MAG_FILTER,o),Xc(e.width)&&Xc(e.height)?(wh(t,t.TEXTURE_WRAP_S,r),wh(t,t.TEXTURE_WRAP_T,r),wh(t,s,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(n)):(wh(t,t.TEXTURE_WRAP_S,a),wh(t,t.TEXTURE_WRAP_T,a),wh(t,s,o)),mh(t,c)}return i},vh=function(t,e){var i=new Uint8Array(3);return e=e||t.createTexture(),mh(t,e),wh(t,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGB,1,1,0,t.RGB,t.UNSIGNED_BYTE,i),e},_h=function(t){t._26I&&t._prg&&(t._26I.deleteProgram(t._prg),t._prg=c)},ph=function(t,e,i,n){var o=t.createShader(i);return t.shaderSource(o,n),t.compileShader(o),t.attachShader(e,o),o},bh=function(t){return t.createBuffer()},mh=function(t,e){t.bindTexture(t.TEXTURE_2D,e)},yh=function(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e)},wh=function(t,e,i){t.texParameteri(t.TEXTURE_2D,e,i)},xh=function(t,e){if(e){var e=Lo(e);t.clearColor(e[0],e[1],e[2],e[3])}},Ch=function(t,e){Bh(t,e.uFix,!0),jh(t,e.aNormal)},Ih=function(t,e){Bh(t,e.uFix,!1),Lh(t,e.aNormal)},Oh=function(t,e,i,n,o,r,a,s){t._picking||(i?(Bh(t,e.uBlend,!0),Bh(t,e.uBlendColor,i)):Bh(t,e.uBlend,!1),Bh(t,e.uLight,n==c||n),tn(o)&&1!==o&&Bh(t,e.uPartOpacity,o),Bh(t,e.uReverseFlip,r!=c&&r),Bh(t,e.uFixPickReverseColor,a||gr)),s?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE)},Sh=function(t,e){t._picking||Bh(t,e.uPartOpacity,1)},Th=function(t,e,i,n,o,r,a,s){if(!i)return void mh(t,t._emptyTexture);Bh(t,e.uTexture,!0),Bh(t,e.uDiscardSelectable,!en(n)||n),Lh(t,e.aUv),Ph(t,o,r,e.aUv,2),t.activeTexture(t.TEXTURE0),mh(t,i),t.uniform1i(e.uSampler,0);var l=[0,0,1,1];a&&(l[0]=a[0],l[1]=a[1]),s&&(l[2]=s[0],l[3]=s[1]),Bh(t,e.uOffsetScale,l)},Vh=function(t,e,i){mh(t,c),i&&(jh(t,e.aUv),Bh(t,e.uTexture,!1))},Dh=function(t,e,i,n,o,r){i&&!Q&&t.lineWidth(i),n&&!t._picking&&Bh(t,e.uFixPickReverseColor,n),o&&Ph(t,o,r,e.aPosition)},Eh=function(t,e,i,n){Lc&&(n=t[Lc]),t.drawArrays(n==c?t.TRIANGLES:n,e,i)},kh=function(t,e,i,n){Lc&&(n=t[Lc]),t.drawElements(n==c?t.TRIANGLES:n,i,t.UNSIGNED_SHORT,e==c?0:2*e)},Ph=function(t,e,i,n,o){var r=t.ARRAY_BUFFER;t.bindBuffer(r,e),i&&t.bufferData(r,i,t.STATIC_DRAW),n!=c&&t.vertexAttribPointer(n,o||3,t.FLOAT,!1,0,0)},Mh=function(t,e,i){var n=t.ELEMENT_ARRAY_BUFFER;t.bindBuffer(n,e),i&&t.bufferData(n,i,t.STATIC_DRAW)},Bh=function(t,e,i){if(i!=c&&e!=c){i=Lo(i);var n=i.length;3===n?t.uniform3fv(e,i):4===n?t.uniform4fv(e,i):16===n?t.uniformMatrix4fv(e,!1,i):en(i)?t.uniform1i(e,i?1:0):2===n?t.uniform2fv(e,i):t.uniform1f(e,i)}},Lh=function(t,e){e!=c&&e>=0&&t.enableVertexAttribArray(e)},jh=function(t,e){e!=c&&e>=0&&t.disableVertexAttribArray(e)},Rh=function(t,e){var i=t.getGL(),n=t._prg;t._7O=t._8O.pop(),e&&(Bh(i,n.uMVMatrix,t._7O),t._6O=e,Bh(i,n.uNMatrix,e))},zh=function(t,e){return e||(e=us()),gs(e,t),eh(e),th(e),e},Fh=function(t,e){var i=t.getGL(),n=t._prg,o=t._7O;e&&(t._8O.push(fs(o)),oh(o,o,e)),Bh(i,n.uMVMatrix,o),Bh(i,n.uNMatrix,zh(o,t._6O))},Ah=function(t,e,i,n,o,r){if(i){if(n){var a=i.value++,s=[(255&a>>24)/255,(255&a>>16)/255,(255&a>>8)/255,(255&a)/255];i[a]={data:o,part:r}}else s=Rc;return Bh(t,e.uFixPickReverseColor,s),s}},Wh=function(){var t={center:function(t,e,i,n,o){var r=e[1]/2,a={x:-e[0]/2,y:r,width:e[0],height:e[1]},s=fr(t,a,i);return[s.x+n,2*r-s.y-o,qc()]},front:function(t,e,i,n,o){var r=e[1]/2,a={x:-e[0]/2,y:r,width:e[0],height:e[1]},s=fr(t,a,i);return[s.x+n,2*r-s.y-o,e[2]/2+qc()]},back:function(t,e,i,n,o){var r=e[0]/2,a=e[1]/2,s={x:r,y:a,width:e[0],height:e[1]},l=fr(t,s,i);return[2*r-l.x-n,2*a-l.y-o,-e[2]/2-qc()]},left:function(t,e,i,n,o){var r=e[1]/2,a={x:-e[2]/2,y:r,width:e[2],height:e[1]},s=fr(t,a,i);return[-e[0]/2-qc(),2*r-s.y-o,s.x+n]},right:function(t,e,i,n,o){var r=e[2]/2,a=e[1]/2,s={x:r,y:a,width:e[2],height:e[1]},l=fr(t,s,i);return[e[0]/2+qc(),2*a-l.y-o,2*r-l.x-n]},top:function(t,e,i,n,o){var r={x:-e[0]/2,y:-e[2]/2,width:e[0],height:e[2]},a=fr(t,r,i);return[a.x+n,e[1]/2+qc(),a.y+o]},bottom:function(t,e,i,n,o){var r=e[2]/2,a={x:-e[0]/2,y:r,width:e[0],height:e[2]},s=fr(t,a,i);return[s.x+n,-e[1]/2-qc(),2*r-s.y-o]}};return function(e,i,n,o,r,a){return t[o](e,i,n,r||0,a||0)}}(),Hh=function(t,e,i,n,o,r,a,s,l,c){if(o&&(e[0]+=o[0],e[1]+=o[1],e[2]+=o[2]),ih(t,i),s){var h=us();if(dc(h,l,c),_s(e,h),ih(t,e),t.auto=s,t.pos=_s([0,0,0],t),r){var u=t.mat2=us();dc(u,r,a)}}else dc(t,l,c),ih(t,e),n===et?ys(t,-k):n===it?ys(t,k):n===nt?ms(t,-k):n===ot?ms(t,k):n===tt&&ys(t,D),dc(t,r,a);return t},Uh=function(t,e){var i=e.auto,n=e.mat2,o=t.gv;if(i){var r,a=us(),s=[0,0,0,0];r="string"==typeof i?[i.indexOf("x")<0?o._eye[0]:o._center[0],i.indexOf("y")<0?o._eye[1]:o._center[1],i.indexOf("z")<0?o._eye[2]:o._center[2]]:o._eye,ch(s,rh(us(),r,o._center,o._up)),hh(a,lh(s,s),e.pos),n&&oh(a,a,n),Fh(o,a)}else Fh(o,e)},Nh=function(t,e,i,n,o){var r=t.s,a=t.gv,s=a.getGL(),l=a._prg,c=a._buffer,h=a._1O;gh(s,ko,h),Uh(t,i),Oh(s,l,r(e+".blend"),r(e+".light"),r(e+".opacity"),r(e+".reverse.flip"),r(e+".reverse.color"),r(e+".reverse.cull")),Th(s,l,h,o,c.uv,Cu),Ph(s,c.vs,n,l.aPosition),Ph(s,c.ns,Iu,l.aNormal),Mh(s,c.is,Ou),kh(s,0,Ou.length),Vh(s,l,h),Sh(s,l),Rh(a)},Qh=function(t,e,i){var n=t.gv,o=t.data,r=t[e]={blend:n.getBodyColor(o)||n.getFaceBlend(o,e),light:n.getFaceLight(o,e),color:n.getFaceColor(o,e),opacity:n.getFaceOpacity(o,e),transparent:n.getFaceTransparent(o,e),reverseFlip:n.getFaceReverseFlip(o,e),reverseColor:n.getFaceReverseColor(o,e),reverseCull:n.getFaceReverseCull(o,e),texture:n.getFaceImage(o,e),discardSelectable:n.getFaceDiscardSelectable(o,e)};if("csg"!==e){r.uv=n.getFaceUv(o,e)||i&&i[e+"Uv"],r.uvScale=n.getFaceUvScale(o,e)||i&&i[e+"UvScale"],r.uvOffset=n.getFaceUvOffset(o,e)||i&&i[e+"UvOffset"];var a=n.getFaceMat(o,e);a&&(r.mat=xs(o,a))}return r},Gh=function(t,e,i,n,o){if(n){if(!o(n.transparent))return;var r=t.data,a=t.gv,s=a._buffer,l=a.getTexture(n.texture,r);Th(e,i,l,n.discardSelectable,s.uv,n.tuv,n.uvOffset,n.uvScale),Oh(e,i,n.blend,n.light,n.opacity,n.reverseFlip,n.reverseColor,n.reverseCull),Bh(e,i.uDiffuse,n.color),Ph(e,s.vs,n.vs,i.aPosition),Ph(e,s.ns,n.ns,i.aNormal),Eh(e,0,n.vs.length/3),Sh(e,i),Vh(e,i,l)}},Xh=function(t,e,i,n,o,r){var a,s,l,c,h,u,d,f,g,v,_=[n-e,o-i],p=t?t.length:0;for(s=0;p>s;s++){for(l=2,a=t[s],c=a[0],h=a[1];l+1<a.length;){if(u=a[l],d=a[l+1],On(e,i,n,o,c,h,u,d,!0)){f=[u-c,d-h],g=Aa(f),f[0]/=g,f[1]/=g,g=hs(_,f),g=g>0?r:-r,v=[f[0]*g,f[1]*g];break}c=u,h=d,l+=2}if(v)break}if(v)for(n=e+v[0],o=i+v[1],s=0;p>s;s++)for(l=2,a=t[s],c=a[0],h=a[1];l+1<a.length;){if(u=a[l],d=a[l+1],On(e,i,n,o,c,h,u,d,!0))return[0,0];c=u,h=d,l+=2}return v||[n-e,o-i]},Yh=h.graph3d={},qh=function(t,e,i){is("ht.graph3d."+t,e,i)},Zh="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh\v!gjeof$!\v~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj\v!ITBE!gfegj$!\v\v!gjeof$!\v~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~\v!gjeof$!\v~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg\v!1!?!SJE`YBN!gj$!\v<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw\v!gjeof$!\v<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov\v!ITBE!gfegj$!\v\v!gjeof$!\v<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov\v!1!?!SJE`YBN!gj$!\v\v!gjeof$!\v<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov\v!SPMPDIDUBC!gfegj$!\v<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",Jh="~~<eJ!>!spmpDhbsG`mh\v!gjeof$!\v~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj\v!TTFOUIHJSCIDUBC!gfegj$!\v~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~\v!gjeof$!\v<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg\v!HPG!gfegj$!\v\v!gjeof$!\v~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg\v!1!?!SJE`YBN!gj$!\v~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~\v!gjeof$!\v~<spmpDeofmCv!>+!eJ|*eofmCv)gj\v!ftmf$!\v~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj\v!EOFMCIDUBC!gfegj$!\v~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw\v!gjeof$!\v<ftvggjEv!>!spmpd\v!ftmf$!\v~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v<spmpd!5dfw|!ftmf~\v!gjeof$!\v~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj\v!ITBE!gfegj$!\v\v!gjeof$!\v<spmpDftsfwfSldjQyjGv!>!eJ\v!ftmf$!\v~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v|*yjGv)gj<eJ!5dfw|ftmf~\v!gjeof$!\v<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh\v!ftmf$!\v~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw\v!gjeof$!\v<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov\v!ITBE!gfegj$!\v\v!gjeof$!\v<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov\v!HPG!gfegj$!\v\v!gjeof$!\v<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov\v!1!?!SJE`YBN!gj$!\v\v!gjeof$!\v<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov\v!SPMPDIDUBC!gfegj$!\v<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ\v!gjeof$!\v\v!gjeof$!\v\v!<ubpmg!qnvjefn!opjtjdfsq!\v\v!ftmf$!\v\v!<ubpmg!qihji!opjtjdfsq!\v\v!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!\v\v!TF`MH!gfegj$!\v";vn(d,{setBatchInfo:function(t,e){mi[t]=e},getBatchInfo:function(t){return mi[t]}},!0);var $h=[1,1,1],Kh=[1,0,0,0,0,1,0,1,1,1,1,0],tu=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],eu=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],iu=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],nu=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],ou=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],ru=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],au=function(t,e){su(t,e),lu(t,e,"_wireframeModelMap","_wireframeIndexMap"),lu(t,e,"_polylineModelMap","_polylineIndexMap")},su=function(t,e){if(e){var i,n,o=e._id,r=t._33O,a=t._34O,s=a[o];if(s){n=s.batch,i=r[n];var l=s.begin,c=s.size,h=3*l,u=3*c,d=4*l,f=4*c,g=i.vs,v=i.uv,_=i.cs,p=i.bs,b=i.rs,m=i.ds,y=s.index;if(i.invalidate=!0,delete a[o],m.splice(y,1),yn(m))delete r[n];else{for(;y<m.length;y++)s=a[m[y]._id],s.index--,s.begin-=c;g.splice(h,u),i.ns.splice(h,u),i.ps.splice(d,f),v&&v.splice(2*l,2*c),_&&_.splice(d,f),p&&p.splice(h,u),b&&b.splice(l,c)}}}else t._34O={},t._33O={}},lu=function(t,e,i,n){if(e){var o,r,a=e._id,s=t[i],l=t[n],c=l[a];if(c){r=c.batch,o=s[r];var h=c.begin,u=c.size,d=3*h,f=3*u,g=4*h,v=4*u,_=o.ds,p=c.index;if(o.invalidate=!0,delete l[a],_.splice(p,1),yn(_))delete s[r];else{for(;p<_.length;p++)c=l[_[p]._id],c.index--,c.begin-=u;o.vs.splice(d,f),o.cs.splice(g,v),o.ps.splice(g,v),o.ls&&o.ls.splice(h,u)}}}else t[i]={},t[n]={}},cu=function(t,e,i,n){if(!n)return c;var o=e[n];if(!o){var r=mi[n]||Ti,a=r.image?[]:c;o=e[n]={vs:[],ns:[],uv:a,cs:a?c:r.color?c:[],bs:r.blend?[]:c,ps:[],rs:r.brightness?[]:c,ds:[]}}return o.invalidate=!0,t[i._id]={index:o.ds.length,begin:o.vs.length/3,batch:n},o.ds.push(i),o},hu=function(t,e){return e!=c&&1!==e?[t[0]*e,t[1]*e,t[2]*e,t[3]]:t},uu=function(t,e,i){var n=t.getBrightness(e),o=Lo(i.color||"white"),r=o[3]<1,a=Math.ceil(i.width)||1,s=(r?"T":"O")+a,l=t._wireframeIndexMap,c=t._wireframeModelMap,h=c[s];h||(h=c[s]={vs:[],cs:[],ps:[],ds:[],T:r,W:a}),h.invalidate=!0;var u=h.vs,d=h.cs,f=h.ds,g=l[e._id]={index:f.length,begin:u.length/3,batch:s};f.push(e),Nc(u,xs(e,i.mat),i.short?Pu:ku);var v=g.size=u.length/3-g.begin;Uc(d,hu(o,n),v)},du=function(t,e,i,n,o,r,a,s,l){var h=t.getBrightness(e);h==c&&(h=1);var u=hu(Lo(n),h),d=u[3]<1;r=Math.ceil(r)||1;var f=(d?"T":"O")+r;if(a){var g=a[0],v=(a[1]||g)+g;f+="-"+g+"-"+v,l&&(f+="-"+Bo(l)+"-"+h,l=hu(Lo(l),h))}var _=t._polylineIndexMap,p=t._polylineModelMap,b=p[f];b||(b=p[f]={vs:[],cs:[],ps:[],ds:[],ls:a?[]:c,T:d,W:r},a&&(b.D=g,b.G=v,b.A=l)),b.invalidate=!0;var m,y=b.vs,w=b.cs,x=b.ds,C=b.ls,I=_[e._id]={index:x.length,begin:y.length/3,batch:f};x.push(e),fn(y,i);var O,S=I.size=y.length/3-I.begin,T=i.length,V=0,D=[];if(a||o)for(m=0;T>m;m+=6)O=Aa([i[m],i[m+1],i[m+2]],[i[m+3],i[m+4],i[m+5]]),D.push(O),V+=O;if(V&&o){var E,k=hu(Lo(o),h),P=[k[0]-u[0],k[1]-u[1],k[2]-u[2],k[3]-u[3]],M=0;for(m=0;T>m;m+=6)E=M/V,Uc(w,[u[0]+P[0]*E,u[1]+P[1]*E,u[2]+P[2]*E,u[3]+P[3]*E],1),M+=D[m/6],E=M/V,Uc(w,[u[0]+P[0]*E,u[1]+P[1]*E,u[2]+P[2]*E,u[3]+P[3]*E],1)}else Uc(w,u,S);if(a)for(M=s||0,m=0;T>m;m+=6)C.push(M),M+=D[m/6],C.push(M)},fu=function(t,e,i){if(e)for(var n=4*e.begin,o=i[e.batch].ps,r=0;r<e.size;r++)o[n++]=t[0],o[n++]=t[1],o[n++]=t[2],o[n++]=t[3]},gu=function(t,e){var i=e+["32"],n=t[e],o=t[i];n?o&&o.length===n.length?o.set(n):t[i]=new ss(n):delete t[i]},vu=function(t,e,i,n,o,r,a,s,l){if(rn(i))i.forEach(function(i){vu(t,e,i,n,o,r,a,s,l)});else if(Ki(i))vu(t,e,Zu(n,i),n,o,r,a,s,l);else if(nn(i)){var c,h=Rs(i.mat,e,t),u=Rs(i.s3,e,t),d=Rs(i.t3,e,t),f=Rs(i.r3,e,t);if((u||f||d||h)&&(c=Cs(h,u,f,Rs(i.rotationMode,e,t),d),r.push(c)),i.shape3d)vu(t,e,i.shape3d,n,o,r,a,s,i);else{l=l||Ti;var g=r[0],v=r.length,_=n("shape3d.color",i.color,l.color);if(o||(o=n("shape3d.blend",i.blend,l.blend)),v>1){g=fs(g);for(var p=1;v>p;p++)oh(g,g,r[p])}i.vs&&n(Ee,i.visible,l.visible)&&_u(g,a,s,i.vs,i.uv,i.is,o,_),i.top_vs&&n(Me,i.topVisible,l.topVisible)&&_u(g,a,s,i.top_vs,i.top_uv,i.top_is,o,n("shape3d.top.color",i.topColor,l.topColor)||_),i.bottom_vs&&n(Be,i.bottomVisible,l.bottomVisible)&&_u(g,a,s,i.bottom_vs,i.bottom_uv,i.bottom_is,o,n("shape3d.bottom.color",i.bottomColor,l.bottomColor)||_),i.from_vs&&n(ke,i.fromVisible,l.fromVisible)&&_u(g,a,s,i.from_vs,i.from_uv,i.from_is,o,n("shape3d.from.color",i.fromColor,l.fromColor)||_),i.to_vs&&n(Pe,i.toVisible,l.toVisible)&&_u(g,a,s,i.to_vs,i.to_uv,i.to_is,o,n("shape3d.to.color",i.toColor,l.toColor)||_)}c&&r.pop()}},_u=function(t,e,i,n,o,r,a,s){var l,c=e.cs,h=e.uv,u=e.bs;if(r){l=r.length;for(var d=0;l>d;d++){var f=r[d];Nc(i,t,[n[3*f],n[3*f+1],n[3*f+2]]),h&&fn(h,[o[2*f],o[2*f+1]])}}else l=n.length/3,Nc(i,t,n),h&&fn(h,o);c&&Uc(c,s,l),u&&(a?Hc(u,a,l):fn(u,$h,l))},pu=function(t,e,i,n){var o=[];n?vu(t.gv,t.data,n,t.s,t.getBodyColor(),[e],i,o):(bu(t,et,e,i,o),bu(t,it,e,i,o),bu(t,K,e,i,o),bu(t,tt,e,i,o),bu(t,nt,e,i,o),bu(t,ot,e,i,o),bu(t,"csg",e,i,o)),o.length&&(fn(i.vs,o),fn(i.ns,fh(o)))},bu=function(t,e,i,n,o){var r=t[e];if(r){var a=r.tuv;if(a){var s,l,h,u,d=r.uvScale,f=r.uvOffset;if(d)for(s=a.length,l=d[0],h=d[1],u=0;s>u;u+=2)a[u]*=l,a[u+1]*=h;if(f)for(s=a.length,l=f[0],h=f[1],u=0;s>u;u+=2)a[u]+=l,a[u+1]+=h}_u(i,n,o,r.vs,a,c,r.blend,r.color)}},mu=function(t,e,i,n,o,r,a,s){var l,c=i.cs,h=i.uv,u=i.bs;if(t.getFaceVisible(e,r)){var d=t.getFaceMat(e,r);if(d&&(o=xs(e,d)),Nc(a,o,s),c&&Uc(c,t.getFaceColor(e,r),6),h){var f=t.getFaceUv(e,r)||n[r+"Uv"],g=t.getFaceUvScale(e,r)||n[r+"UvScale"],v=t.getFaceUvOffset(e,r)||n[r+"UvOffset"];f=f?[f[6],f[7],f[0],f[1],f[2],f[3],f[2],f[3],f[4],f[5],f[6],f[7]]:Kh;var _=f[0],p=f[1],b=f[2],m=f[3],y=f[4],w=f[5],x=f[6],C=f[7],I=f[8],O=f[9],S=f[10],T=f[11];if(g){var V=g[0],D=g[1];_*=V,p*=D,b*=V,m*=D,y*=V,w*=D,x*=V,C*=D,I*=V,O*=D,S*=V,T*=D}if(v){var E=v[0],k=v[1];_+=E,p+=k,b+=E,m+=k,y+=E,w+=k,x+=E,C+=k,I+=E,O+=k,S+=E,T+=k}h.push(_,p,b,m,y,w,x,C,I,O,S,T)}u&&(l=t.getBodyColor(e)||t.getFaceBlend(e,r),l?Hc(u,l,6):fn(u,$h,6))}},yu=function(t,e,i,n){var o=t.getGL(),r=t._prg,a=t._buffer;if(!mn(e)){Fh(t),Ch(o,r);for(var s in e){var l=e[s];if(!(n&&!l.T||!n&&l.T)){l.invalidate?(l.invalidate=!1,gu(l,"vs"),gu(l,"cs"),gu(l,"ls"),gu(l,"ps")):i&&gu(l,"ps");var h=l.vs32,u=i?l.ps32:l.cs32;Dh(o,r,l.W,c,a.vs,h);var d=l.D,f=!t._dashDisabled&&d;f&&(Bh(o,r.uDash,!0),Bh(o,r.uDashDistance,d),Bh(o,r.uDashGapDistance,l.G),Lh(o,r.aLineDistance),Ph(o,a.lineDistance,l.ls32,r.aLineDistance,1),Bh(o,r.uDiffuse,l.A||Mi));var g=!t._batchColorDisabled;g&&(Bh(o,r.uBatchColor,!0),Lh(o,r.aBatchColor),Ph(o,a.batchColor,u,r.aBatchColor,4)),Th(o),Eh(o,0,h.length/3,o.LINES),Vh(o),g&&(Bh(o,r.uBatchColor,!1),jh(o,r.aBatchColor)),f&&(Bh(o,r.uDash,!1),jh(o,r.aLineDistance))}}Ih(o,r)}},wu=function(t,e,i){var n,o,r,a,s,l,h,u,d,f,g=t.getGL(),v=t._prg,_=t._buffer,p=t._33O;if(!mn(p)){Fh(t);for(n in p)if(o=mi[n]||Ti,!(i&&!o.transparent||!i&&o.transparent)&&(r=p[n],e||!o.transparentMask)){var b=i&&!1!==o.autoSort&&(t._33Q||r.invalidate);if(r.invalidate?(r.invalidate=!1,gu(r,"vs"),gu(r,"ns"),gu(r,"cs"),gu(r,"rs"),gu(r,"ps"),gu(r,"bs"),gu(r,"uv")):e&&gu(r,"ps"),a=r.vs32,s=e?r.ps32:r.cs32,u=r.uv32,l=r.bs32,h=r.rs32,f=a.length/3,b&&(r.is=xu(a,t.getEye())),f){o.light,d=t.getTexture(o.image),Oh(g,v,c,o.light,o.opacity,o.reverseFlip,o.reverseColor,o.reverseCull),s?t._batchColorDisabled||(Bh(g,v.uBatchColor,!0),Lh(g,v.aBatchColor),Ph(g,_.batchColor,s,v.aBatchColor,4)):Bh(g,v.uDiffuse,o.color);var m=l&&!t._batchBlendDisabled;m&&(Bh(g,v.uBatchBlend,!0),Lh(g,v.aBatchBlend),Ph(g,_.batchBlend,l,v.aBatchBlend));var y=h&&!t._batchBrightnessDisabled;y&&(Bh(g,v.uBatchBrightness,!0),Lh(g,v.aBatchBrightness),Ph(g,_.batchBrightness,h,v.aBatchBrightness,1)),u?Th(g,v,d,o.discardSelectable,_.uv,u,o.uvOffset,o.uvScale):Th(g),
Ph(g,_.vs,a,v.aPosition),Ph(g,_.ns,r.ns32,v.aNormal),r.is?(Mh(g,_.is,r.is),kh(g,0,f)):Eh(g,0,f),u?Vh(g,v,d):Vh(g),s&&!t._batchColorDisabled&&(Bh(g,v.uBatchColor,!1),jh(g,v.aBatchColor)),m&&(Bh(g,v.uBatchBlend,!1),jh(g,v.aBatchBlend)),y&&(Bh(g,v.uBatchBrightness,!1),jh(g,v.aBatchBrightness)),Sh(g,v)}}}},xu=function(t,e){for(var i=t.length/3,n=new Array(i),o=i/3,r=new Array(o),a=0;o>a;a++)r[a]=a;r.sort(function(i,n){var o=9*i,r=[(t[o]+t[o+3]+2*t[o+6])/4,(t[o+1]+t[o+4]+2*t[o+7])/4,(t[o+2]+t[o+5]+2*t[o+8])/4];o=9*n;var a=[(t[o]+t[o+3]+2*t[o+6])/4,(t[o+1]+t[o+4]+2*t[o+7])/4,(t[o+2]+t[o+5]+2*t[o+8])/4],s=Aa(e,r)-Aa(e,a);return s>0?-1:0>s?1:0});for(var a=0;o>a;a++){var s=3*a,l=3*r[a];n[s]=l,n[s+1]=l+1,n[s+2]=l+2}return new as(n)},Cu=new ss([0,0,0,1,1,1,1,0]),Iu=new ss([0,0,1,0,0,1,0,0,1,0,0,1]),Ou=new as([0,1,2,2,3,0]),Su=new ss([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Tu=new as([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Vu=new ss([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Du=new ss([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Eu=fh(Su,Tu),ku=(new ss([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new as([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),Pu=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Mu=function(t,e,i,n,o,r){r=r||16,t=t||16,e=e||0,i=i||t;var a,s,l,c,h,u,d,f,g=.5,v=[],_=[],p=E/t,b=D/r;for(a=0;r>a;a++)for(h=a+1,c=a*b,f=h*b,s=e;i>s;s++)u=s+1,l=s*p,d=u*p,v.push(g*S(c)*I(l),g*I(c),-g*S(c)*S(l),g*S(f)*I(d),g*I(f),-g*S(f)*S(d),g*S(c)*I(d),g*I(c),-g*S(c)*S(d),g*S(c)*I(l),g*I(c),-g*S(c)*S(l),g*S(f)*I(l),g*I(f),-g*S(f)*S(l),g*S(f)*I(d),g*I(f),-g*S(f)*S(d)),_.push(s/t,a/r,u/t,h/r,u/t,a/r,s/t,a/r,s/t,h/r,u/t,h/r);if(n)for(l=e*p,a=0;r>a;a++)h=a+1,c=a*b,f=h*b,v.push(0,0,0,g*S(f)*I(l),g*I(f),-g*S(f)*S(l),g*S(c)*I(l),g*I(c),-g*S(c)*S(l)),_.push(0,.5,e/t,h/r,e/t,a/r);if(o)for(l=i*p,a=0;r>a;a++)h=a+1,c=a*b,f=h*b,v.push(0,0,0,g*S(c)*I(l),g*I(c),-g*S(c)*S(l),g*S(f)*I(l),g*I(f),-g*S(f)*S(l)),_.push(1,.5,i/t,a/r,i/t,h/r);return{vs:v,uv:_}},Bu=function(t,e,i){t=t||.17,e=e||12,i=i||18,0>t?t=0:t>.25&&(t=.25);var n,o,r,a,s,l,c,h=[],u=[],d=[],f=E/i,g=E/e,v=.5-t;for(o=0;e>=o;o++)for(a=o*g-D,l=I(a),s=S(a),n=0;i>=n;n++)r=n*f,c=v+t*l,h.push(I(r)*c,s*t,-S(r)*c),u.push(n/i,1-o/e);for(o=0;e>o;o++){var _=o*(i+1),p=(o+1)*(i+1);for(n=0;i>n;n++)d.push(_+n,p+n+1,p+n,_+n,_+n+1,p+n+1)}return{vs:h,uv:u,is:d}},Lu=function(t,e,i,n,o,r,a){a=a||12,t=t||18,e=e||0,i=i||t,r=r||.17,0>r?r=0:r>.25&&(r=.25);var s,l,c,h,u,d,f,g,v,_,p=[],b=[],m=E/t,y=E/a,w=.5-r;for(c=0;a>c;c++)for(h=c+1,f=c*y-D,g=h*y-D,s=e;i>s;s++)l=s+1,u=s*m,d=l*m,v=w+r*I(f),_=w+r*I(g),p.push(I(u)*v,S(f)*r,-S(u)*v,I(d)*v,S(f)*r,-S(d)*v,I(d)*_,S(g)*r,-S(d)*_,I(u)*v,S(f)*r,-S(u)*v,I(d)*_,S(g)*r,-S(d)*_,I(u)*_,S(g)*r,-S(u)*_),b.push(s/t,1-c/a,l/t,1-c/a,l/t,1-h/a,s/t,1-c/a,l/t,1-h/a,s/t,1-h/a);if(n){var x=[],C=[];for(c=0;a>c;c++)h=c+1,f=c*y-D,g=h*y-D,u=e*m,v=w+r*I(f),_=w+r*I(g),x.push(I(u)*v,S(f)*r,-S(u)*v,I(u)*_,S(g)*r,-S(u)*_,I(u)*w,0,-S(u)*w),C.push(.5+.5*I(f),.5-.5*S(f),.5+.5*I(g),.5-.5*S(g),.5,.5)}if(o){var O=[],T=[];for(c=0;a>c;c++)h=c+1,f=c*y-D,g=h*y-D,u=i*m,v=w+r*I(f),_=w+r*I(g),O.push(I(u)*v,S(f)*r,-S(u)*v,I(u)*w,0,-S(u)*w,I(u)*_,S(g)*r,-S(u)*_),T.push(.5-.5*I(f),.5-.5*S(f),.5,.5,.5-.5*I(g),.5-.5*S(g))}return{vs:p,uv:b,from_vs:x,from_uv:C,to_vs:O,to_uv:T}},ju=function(t,e){for(var i,n,o,r=.5,a=16,s=[],l=[],c=[],h=E/a,u=0;a>=u;u++)i=u*h,n=I(i)*r,o=S(i)*r,s.push(n,-r,o,n,r,o),l.push(1-u/a,1,1-u/a,0);for(u=0;a>u;u++)c.push(2*u,2*u+1,2*u+3,2*u,2*u+3,2*u+2);if(e){var d=[],f=[],g=[];for(d.push(0,-r,0),f.push(.5,.5),u=0;a>=u;u++)i=u*h,n=I(i),o=S(i),d.push(n*r,-r,-o*r),f.push(.5+.5*n,.5+.5*o);for(u=0;a>u;u++)g.push(0,u+2,u+1)}if(t){var v=[],_=[],p=[];for(v.push(0,r,0),_.push(.5,.5),u=0;a>=u;u++)i=u*h,n=I(i),o=S(i),v.push(n*r,r,-o*r),_.push(.5+.5*n,.5-.5*o);for(u=0;a>u;u++)p.push(0,u+1,u+2)}return{vs:s,uv:l,is:c,bottom_vs:d,bottom_uv:f,bottom_is:g,top_vs:v,top_uv:_,top_is:p}},Ru=function(t,e,i,n,o,r,a){t=t||12,e=e||0,i=i||t;for(var s,l,c,h,u,d,f,g,v=.5,_=[],p=[],b=E/t,m=e;i>m;m++)s=m+1,l=m*b,c=s*b,h=I(l)*v,u=S(l)*v,d=I(c)*v,f=S(c)*v,_.push(h,-v,-u,d,-v,-f,h,v,-u,d,-v,-f,d,v,-f,h,v,-u),p.push(m/t,1,s/t,1,m/t,0,s/t,1,s/t,0,m/t,0);if(a){var y=[],w=[];for(m=e;i>m;m++)l=b*m,c=b*(m+1),h=I(l),u=S(l),d=I(c),f=S(c),y.push(h*v,-v,-u*v,0,-v,0,d*v,-v,-f*v),w.push(.5+.5*h,.5+.5*u,.5,.5,.5+.5*d,.5+.5*f)}if(r){var x=[],C=[];for(m=e;i>m;m++)l=b*m,c=b*(m+1),h=I(l),u=S(l),d=I(c),f=S(c),x.push(h*v,v,-u*v,d*v,v,-f*v,0,v,0),C.push(.5+.5*h,.5-.5*u,.5+.5*d,.5-.5*f,.5,.5)}return n&&(l=b*e,h=I(l)*v,u=S(l)*v,g=e/t,_.push(0,v,0,0,-v,0,h,-v,-u,h,-v,-u,h,v,-u,0,v,0),p.push(0,0,0,1,g,1,g,1,g,0,0,0)),o&&(l=b*i,h=I(l)*v,u=S(l)*v,g=i/t,_.push(0,-v,0,0,v,0,h,v,-u,h,v,-u,h,-v,-u,0,-v,0),p.push(1,1,1,0,g,0,g,0,g,1,1,1)),{vs:_,uv:p,bottom_vs:y,bottom_uv:w,top_vs:x,top_uv:C}},zu=function(t,e,i,n,o){e=e||18,i=i||0,n=n==c?E:n,o=o==c?.5:o;for(var r,a,s,l,h,u,d=[0,.5,.75,.875,.9375],f=[],g=[],v=[],_=n/e,p=0;p<d.length;p++){var b=0==p%2?0:.5;for(r=0;e>=r;r++)a=(r+b)*_+i,s=1-d[p],f.push(I(a)*o*s,2*d[p]*o-o,-S(a)*o*s),g.push((r+b)/e,s)}for(p=0;p<d.length-1;p++){var m=p*(e+1),y=(p+1)*(e+1);for(r=0;e>r;r++)v.push(m+r,y+r+1,y+r,m+r,m+r+1,y+r+1)}for(u=f.length/3-(e+1),r=0;e>r;r++)f.push(0,o,0),g.push((r+.5)/e,0);for(r=0;e>r;r++)v.push(u+r,u+r+1,u+(e+1)+r);if(t){var w=[],x=[],C=[];for(w.push(0,-o,0),x.push(.5,.5),r=0;e>=r;r++)a=r*_+i,l=I(a),h=S(a),w.push(l*o,-o,-h*o),x.push(.5+.5*l,.5+.5*h);for(r=0;e>r;r++)C.push(0,r+2,r+1)}return{vs:f,uv:g,is:v,bottom_vs:w,bottom_uv:x,bottom_is:C}},Fu=function(t,e,i,n,o,r){t=t||16,e=e||0,i=i||t;for(var a=.5,s=[],l=[],c=E/t,h=e;i>h;h++){var u=h+1,d=c*h,f=c*u;s.push(I(d)*a,-a,-S(d)*a,I(f)*a,-a,-S(f)*a,0,a,0),l.push(h/t,1,u/t,1,(h+u)/2/t,0)}if(r){var g=[],v=[];for(h=e;i>h;h++){d=c*h,f=c*(h+1);var _=I(d),p=S(d),b=I(f),m=S(f);g.push(_*a,-a,-p*a,0,-a,0,b*a,-a,-m*a),v.push(.5+.5*_,.5+.5*p,.5,.5,.5+.5*b,.5+.5*m)}}return n&&(d=c*e,s.push(0,a,0,0,-a,0,I(d)*a,-a,-S(d)*a),l.push(0,0,0,1,e/t,1)),o&&(d=c*i,s.push(0,-a,0,0,a,0,I(d)*a,-a,-S(d)*a),l.push(1,1,1,0,i/t,1)),{vs:s,uv:l,bottom_vs:g,bottom_uv:v}},Au=function(t,e,i,n,o,r,a,s){for(var l=[],c=0;c<t.length-1;c+=2)l.push({x:t[c],y:t[c+1]});return Sl(l,e,i,n,o,r,a,s,!1)},Wu={roundRect:function(t,e){return Au([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],t,e,3)},star:function(t,e){return Au([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],t,e)},rect:function(t,e){return Au([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],t,e)},triangle:function(t,e){return Au([0,-.5,.5,.5,-.5,.5],[1,2,2,5],t,e)},rightTriangle:function(t,e){return Au([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],t,e)},parallelogram:function(t,e){return Au([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],t,e)},trapezoid:function(t,e){return Au([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],t,e)}},Hu={sphere:1,cylinder:1,cone:1,torus:1},Uu={torus:1,sphere:1},Nu=vn(Sa(Wu),{cylinder:1}),Qu=vn(Sa(Wu),{cylinder:1,cone:1}),Gu=function(t,e,i){var n,o=Rs(t.mat,i,e),r=Rs(t.s3,i,e),a=Rs(t.t3,i,e),s=Rs(t.r3,i,e);return(r||s||a||o)&&(n=fs(e._6O),Fh(e,Cs(o,r,s,Rs(t.rotationMode,i,e),a))),n},Xu=function(t,e,i,n,o,r,a){if(rn(i))i.forEach(function(i){Xu(t,e,i,n,o,r,a)});else if(Ki(i))Xu(t,e,Zu(n,i),n,o,r,a);else if(nn(i))if(i.shape3d){var s=Gu(i,t,e);Xu(t,e,i.shape3d,n,o,r,i),s&&Rh(t,s)}else Yu(t,e,i,n,o,r,a)},Yu=function(t,e,i,n,o,r,a){if(a=a||Ti,!r||r(n("shape3d.transparent",i.transparent,a.transparent))){var s=Gu(i,t,e);Ju(i);var l=t._26I,c=t._prg,h=t._buffer,u=n("shape3d.color",i.color,a.color);o||(o=n("shape3d.blend",i.blend,a.blend)),Oh(l,c,o,n("shape3d.light",i.light,a.light),n("shape3d.opacity",i.opacity,a.opacity),n("shape3d.reverse.flip",i.reverseFlip,a.reverseFlip),n("shape3d.reverse.color",i.reverseColor,a.reverseColor),n("shape3d.reverse.cull",i.reverseCull,a.reverseCull)),i.vs&&n(Ee,i.visible,a.visible)&&qu(l,c,h,u,t.getTexture(n("shape3d.image",i.image,a.image),e),n("shape3d.discard.selectable",i.discardSelectable,a.discardSelectable),i.vs,i.uv,i.ns,i.is,n("shape3d.uv.offset",i.uvOffset,a.uvOffset),n("shape3d.uv.scale",i.uvScale,a.uvScale)),i.top_vs&&n(Me,i.topVisible,a.topVisible)&&qu(l,c,h,n("shape3d.top.color",i.topColor,a.topColor)||u,t.getTexture(n("shape3d.top.image",i.topImage,a.topImage),e),n("shape3d.top.discard.selectable",i.topDiscardSelectable,a.topDiscardSelectable),i.top_vs,i.top_uv,i.top_ns,i.top_is,n("shape3d.top.uv.offset",i.topUvOffset,a.topUvOffset),n("shape3d.top.uv.scale",i.topUvScale,a.topUvScale)),i.bottom_vs&&n(Be,i.bottomVisible,a.bottomVisible)&&qu(l,c,h,n("shape3d.bottom.color",i.bottomColor,a.bottomColor)||u,t.getTexture(n("shape3d.bottom.image",i.bottomImage,a.bottomImage),e),n("shape3d.bottom.discard.selectable",i.bottomDiscardSelectable,a.bottomDiscardSelectable),i.bottom_vs,i.bottom_uv,i.bottom_ns,i.bottom_is,n("shape3d.bottom.uv.offset",i.bottomUvOffset,a.bottomUvOffset),n("shape3d.bottom.uv.scale",i.bottomUvScale,a.bottomUvScale)),i.from_vs&&n(ke,i.fromVisible,a.fromVisible)&&qu(l,c,h,n("shape3d.from.color",i.fromColor,a.fromColor)||u,t.getTexture(n("shape3d.from.image",i.fromImage,a.fromImage),e),n("shape3d.from.discard.selectable",i.fromDiscardSelectable,a.fromDiscardSelectable),i.from_vs,i.from_uv,i.from_ns,i.from_is,n("shape3d.from.uv.offset",i.fromUvOffset,a.fromUvOffset),n("shape3d.from.uv.scale",i.fromUvScale,a.fromUvScale)),i.to_vs&&n(Pe,i.toVisible,a.toVisible)&&qu(l,c,h,n("shape3d.to.color",i.toColor,a.toColor)||u,t.getTexture(n("shape3d.to.image",i.toImage,a.toImage),e),n("shape3d.to.discard.selectable",i.toDiscardSelectable,a.toDiscardSelectable),i.to_vs,i.to_uv,i.to_ns,i.to_is,n("shape3d.to.uv.offset",i.toUvOffset,a.toUvOffset),n("shape3d.to.uv.scale",i.toUvScale,a.toUvScale)),Sh(l,c),s&&Rh(t,s)}},qu=function(t,e,i,n,o,r,a,s,l,c,h,u){a&&(Bh(t,e.uDiffuse,n),s?Th(t,e,o,r,i.uv,s,h,u):Th(t),Ph(t,i.vs,a,e.aPosition),Ph(t,i.ns,l,e.aNormal),c?(Mh(t,i.is,c),kh(t,0,c.length)):Eh(t,0,a.length/3),s?Vh(t,e,o):Vh(t))},Zu=function(t,e){if(e||(e=t(Ve)),!e)return c;if(nn(e))return e;var i=yi[e];if(i)return i;var n=e;if(Hu[e]){var o=t("shape3d.side"),r=t("shape3d.side.from"),a=t("shape3d.side.to"),s=t(ke),l=t(Pe);3>o?(o=0,r=0,a=0,s=!1,l=!1):((r==c||0>r)&&(r=0),(a==c||a>o)&&(a=o),0===r&&a===o&&(s=!1,l=!1)),n+="-"+o+"-"+r+"-"+a+"-"+s+"-"+l}if(Nu[e]){var h=t(Me);n+="-"+h}if(Qu[e]){var u=t(Be);n+="-"+u}if("torus"===e){var f=t("shape3d.torus.radius");0>f?f=0:f>.25&&(f=.25),n+="-"+f}if(Uu[e]){var g=t(De);n+="-"+g}return i=wi[n],i||("box"===e?i=d.createBoxModel():Wu[e]?i=Wu[e](h,u):"sphere"===e?i=d.createSphereModel(o,r,a,s,l,g):e===pt?i=d.createCylinderModel(o,r,a,s,l,h,u):"cone"===e?i=d.createConeModel(o,r,a,s,l,u):"torus"===e&&(i=d.createTorusModel(o,r,a,s,l,f,g)),wi[n]=i),i},Ju=function(){var t=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],e=["is","top_is","bottom_is","from_is","to_is"];return o=pn(Zh.substr(Zh.indexOf("^#")+2)),Ts(d[Ji(Ue+t[15]+"n"+t[16])]())&&Po()?function(i){i&&!i._complete_&&(i._complete_=!0,i.vs&&yn(i.ns)&&(i.ns=fh(i.vs,i.is)),i.top_vs&&yn(i.top_ns)&&(i.top_ns=fh(i.top_vs,i.top_is)),i.bottom_vs&&yn(i.bottom_ns)&&(i.bottom_ns=fh(i.bottom_vs,i.bottom_is)),i.from_vs&&yn(i.from_ns)&&(i.from_ns=fh(i.from_vs,i.from_is)),i.to_vs&&yn(i.to_ns)&&(i.to_ns=fh(i.to_vs,i.to_is)),t.forEach(function(t){var e=i[t];rn(e)&&(i[t]=new ss(e))}),e.forEach(function(t){var e=i[t];rn(e)&&(i[t]=new as(e))}))}:void 0}(),$u=function(t,e){var i=t[e];rn(i)&&(t[e]=new ss(i))};vn(Wr,{_25Q:function(t){t._16O=function(t,e,i,n,o,r,a,s,l){var c=this.info;if(c){var h,u,d,f,g,v,_=us();if(Gs[e]?(h=c.p3,u=c.c1,d=c.c2):Qs[e]?(u=c.s1||c.c1,d=c.s2||c.c2):(u=c.t1||c.c1,d=c.t2||c.c2),h)v=Wh(e,Pi,i,n,s,l);else{var p=ls(d,u),b=Aa(u,d);f=[0,-M(p[2],p[0]),V(p[1]/b)],g="zyx",h=[(u[0]+d[0])/2,(u[1]+d[1])/2,(u[2]+d[2])/2],v=Wh(e,[b,0,0],i,n,s,l)}return Hh(_,v,h,n,o,r,a,t,f,g)}return ds},t._80o=function(t,e,i){var n=this,o=n.shapeModel;if(o){var r=n.gv;Fh(r),Xu(r,n.data,o,n.s,n.getBodyColor(),i)}},t.createLineModel=function(t,e,i,n,o){for(var r=this,a=r.s,s=ed(t,e,a(De)),l=[],h=0;h<s.length;h++){var u=s[h],d=u.length;if(d>1){var f=u[0];l.push(f.x,f.y,f.z);for(var g=1;d-1>g;g++)f=u[g],l.push(f.x,f.y,f.z),l.push(f.x,f.y,f.z);f=u[d-1],l.push(f.x,f.y,f.z)}}var v,_,p,b=a(n+".color"),m=a(o),y=0;return m&&(_=a(o+".color"),v=a(o+".pattern"),y=a(o+".offset"),p=b),du(r.gv,r.data,l,_||b,p?c:a(n+".gradient.color"),i,v||a(n+".pattern"),y,p),s},t.createTubeModel=function(t,e,i,n){for(var o=this,r=o.s,a=r("shape3d.side")||es,s=r("shape3d.start.angle"),l=r(Me)?r("shape3d.top.cap"):c,h=r(Be)?r("shape3d.bottom.cap"):c,u="flat"===l,d="flat"===h,f=u&&(n?n.uv:r("shape3d.top.image")),g=d&&(n?n.uv:r("shape3d.bottom.image")),v=n?n.uv:r("shape3d.image"),_={vs:[],uv:v?[]:c,top_vs:u?[]:c,top_uv:f?[]:c,bottom_vs:d?[]:c,bottom_uv:g?[]:c},p=ed(t,e,r(De),i),b=0,m=p.length;m>b;b++)nd(_,p[b],r(Le),i,a,s,l,h);if(n){var y=[];vu(o.gv,o.data,_,r,o.getBodyColor(),[],n,y),y.length&&(fn(n.vs,y),fn(n.ns,fh(y)))}else o.shapeModel=_;return p},t.getCache=function(){var t=this.info;if(t){var e=t.list;if(e){var i=t.cache;return i||(i=t.cache=td(e)),i}}return c}}});var Ku=function(t,e){for(var i,n=0,o=t.length,r=0,a=o-1;a>=r;)if(n=b(r+(a-r)/2),0>(i=t[n].length-e))r=n+1;else{if(!(i>0)){a=n;break}a=n-1}n=a;var s=t[n],l=s.point;return n===o-1||s.length===e||(l=(new Vl).subVectors(t[n+1].point,l).normalize().multiplyScalar(e-s.length).add(l)),{point:l,tangent:s.tangent}},td=function(t){for(var e,i,n=[],o=0,r=0;r<t.length;r++){for(var a=t[r],s=0;s<a.length;s++){e=a[s],i&&(o+=i.distanceTo(e));var l=new Vl,c=a[s+1];c?l.subVectors(c,e):i?l.subVectors(e,i):l.x=1,l.normalize(),n.push({point:e,length:o,tangent:l}),i=e}i=null}return n},ed=function(t,e,i,n){i=i||Ka;for(var o=[],r=0,a=t.size();a>r;r++){var s=t.get(r);o.push(new Vl(s.x,s.e||0,s.y))}an(e)&&(e=e._as);for(var l,h,u,d,f,g=[],v=0,_=0,p=e?e.length:a;p>_;_++)if(1===(f=e?e[_]:0===_?1:2))g.push(u=[]),u.push(o[v++]);else if(2===f||5===f)if(d=2===f?o[v++]:u[0],n){var b=e?e[_+1]:p>_+1?2:c;if(2===b||5===b){var m=u[u.length-1],y=2===b?o[v]:u[0],w=(new Vl).subVectors(m,d),C=(new Vl).subVectors(y,d),I=w.length(),O=C.length();if(n>I/2&&n>O/2)u.push(d);else for(w.multiplyScalar(x(n,I/2)/I).add(d),C.multiplyScalar(x(n,O/2)/O).add(d),l=new Kl(w,d,C).getPoints(i),h=0;i>=h;h++)u.push(l[h])}else u.push(d)}else u.push(d);else if(3===f)for(l=new Kl(u[u.length-1],o[v++],o[v++]).getPoints(i),h=1;i>=h;h++)u.push(l[h]);else if(4===f)for(l=new tc(u[u.length-1],o[v++],o[v++],o[v++]).getPoints(i),h=1;i>=h;h++)u.push(l[h]);return g},id=function(t){for(var e,i,n=new Vl,o=[],r=[],a=[],s=0,l=t.length;l>s;s++)e=t[s],i=t[s+1],i?n.subVectors(i,e):n.subVectors(e,t[s-1]),o.push(n.normalize().clone());var c,h,u,d,f=new Vl,g=new Vl,v=new Dl,_=Number.MAX_VALUE,p=o[0],b=r[0]=new Vl,m=a[0]=new Vl;for(h=C(p.x),u=C(p.y),d=C(p.z),_>=h&&(_=h,f.set(1,0,0)),_>=u&&(_=u,f.set(0,1,0)),_>=d&&f.set(0,0,1),g.crossVectors(p,f).normalize(),b.crossVectors(p,g),m.crossVectors(p,b),s=1;l>s;s++)r[s]=r[s-1].clone(),a[s]=a[s-1].clone(),g.crossVectors(o[s-1],o[s]),g.length()>1e-4&&(g.normalize(),c=O(xn(o[s-1].dot(o[s]),-1,1)),r[s].applyMatrix4(v.makeRotationAxis(g,c))),a[s].crossVectors(o[s],r[s]);return{B:a,T:o,N:r}},nd=function(){var t=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];t.push(i.x,i.y,i.z)}},e=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e].uv;t.push(i[0],i[1])}},n=function(t,e,i,n,o){var r=-n*I(o),a=n*S(o);return new Vl(t.x+r*i.x+a*e.x,t.y+r*i.y+a*e.y,t.z+r*i.z+a*e.z)},o=function(t,e,i,o,r,a,s){for(var l=[],h=E/r,u=0;r>=u;u++){var d=n(t,e,i,o,u*h+a);l.push(d),s!=c&&(d.uv=[s,u/r])}return l},r=function(e,i,o,r,a,s,l,c){var h=i?e.top_vs:e.bottom_vs;if(h)for(var u=i?e.top_uv:e.bottom_uv,d=E/l,f=0;l>f;f++){var g,v;i?(g=f*d+c,v=(f+1)*d+c):(v=f*d+c,g=(f+1)*d+c),t(h,n(o,r,a,s,g),n(o,r,a,s,v),o),u&&u.push(.5-.5*I(g),.5-.5*S(g),.5-.5*I(v),.5-.5*S(v),.5,.5)}};return function(n,a,s,l,h,u,d,f){var g=a.length;if(g>1){var v,_,p,b,w,x,C,I=id(a),O=I.T,S=I.N,T=I.B;"flat"===d&&r(n,!0,a[0],T[0],S[0],l,h,u),"flat"===f&&r(n,!1,a[g-1],T[g-1],S[g-1],l,h,u);var V,D,E=[],k=m(h/2),P="round"===d,M="round"===f,B=a[0],L=O[0],j=T[0],R=S[0],z=a[g-1],F=O[g-1],A=T[g-1],W=S[g-1];if(P){for(p=1;k>=p;p++)S.splice(0,0,R),T.splice(0,0,j),O.splice(0,0,L),D=-p/k*l,a.splice(0,0,L.clone().multiplyScalar(D).add(B)),E[k-p]=y(l*l-D*D);g+=k}if(M){for(p=1;k>=p;p++)S.push(W),T.push(A),O.push(F),D=p/k*l,a.push(F.clone().multiplyScalar(D).add(z)),E[a.length-1]=y(l*l-D*D);g+=k}if(n.uv){var H=0,U=0,N=[];for(s&&(H=s),w=a[0],N[0]=0,p=1;g>p;p++)b=a[p],N[p]=w.distanceTo(b),w=b,s||(H+=N[p]);for(V=[],p=0;g>p;p++)U+=N[p],V[p]=H?U/H:0}for(p=0;g>p;p++){if(b=a[p],x=T[p],C=S[p],v=o(b,x,C,E[p]===i?l:E[p],h,u,V?V[p]:c),_)for(var Q=0;h>Q;Q++){var G=_[Q],X=_[Q+1]||_[0],Y=v[Q],q=v[Q+1]||v[0];t(n.vs,X,G,Y,Y,q,X),n.uv&&e(n.uv,X,G,Y,Y,q,X)}_=v}}}}();vn(d,{getLineLength:function(t){return t[t.length-1].length},getLineOffset:function(t,e){return Ku(t,e)},getLineCacheInfo:function(t,e,i,n){return td(ed(t,e,i,n))}});var od=h.Light=function(){bn(od,this),this.s(Bc,f[Bc]),this.s(Ve,"sphere"),this.s3(20,20,20)};ns("Light",lc,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(t,e,i){od.superClass.onStyleChanged.apply(this,arguments),t===Bc&&this.s("shape3d.color",i)}});var rd=Yh.Graph3dView=function(t,e){var i=this;i._attributes=e||d.graph3dViewAttributes,i._25I={},i._view=Rn(1,i);var n=i._canvas=Fn(i._view);n.addEventListener("webglcontextlost",function(t){t.preventDefault(),_h(i),i._26I=c,i._1o.texture=c,i._35O=!0},!1),n.addEventListener("webglcontextrestored",function(){i._35O=!1,i.iv()},!1),i._34O={},i._33O={},i._wireframeIndexMap={},i._wireframeModelMap={},i._polylineIndexMap={},i._polylineIndexMap={},i._8O=[],i._7O=us(),i._6O=us(),i._1o=new cd(i),i._30O=new dd(i),i._31O=new hd(i),i._32O=new ud(i),i._33Q=!0,i._eye=Sa(d.graph3dViewEye),i._center=Sa(d.graph3dViewCenter),i._up=Sa(d.graph3dViewUp),i._lightChanged=!1,i._59O=[],i._spots=[],i._dirs=[],i.dm(t||new Us),i.setInteractors([new ld(i)])},ad={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};qh("Graph3dView",e,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",te,ie,"firstPersonMode",de,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",at,rt,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:i,_boundaries:i,_moveStep:d.graph3dViewMoveStep,_rotateStep:d.graph3dViewRotateStep,_pannable:d.graph3dViewPannable,_rotatable:d.graph3dViewRotatable,_walkable:d.graph3dViewWalkable,_resettable:d.graph3dViewResettable,_zoomable:d.graph3dViewZoomable,_firstPersonMode:d.graph3dViewFirstPersonMode,_mouseRoamable:d.graph3dViewMouseRoamable,_gridVisible:d.graph3dViewGridVisible,_gridSize:d.graph3dViewGridSize,_gridGap:d.graph3dViewGridGap,_gridColor:d.graph3dViewGridColor,_originAxisVisible:d.graph3dViewOriginAxisVisible,_centerAxisVisible:d.graph3dViewCenterAxisVisible,_axisXColor:d.graph3dViewAxisXColor,_axisYColor:d.graph3dViewAxisYColor,_axisZColor:d.graph3dViewAxisZColor,_ortho:d.graph3dViewOrtho,_orthoWidth:d.graph3dViewOrthoWidth,_fovy:d.graph3dViewFovy,_near:d.graph3dViewNear,_far:d.graph3dViewFar,_headlightColor:d.graph3dViewHeadlightColor,_headlightIntensity:d.graph3dViewHeadlightIntensity,_headlightRange:d.graph3dViewHeadlightRange,_headlightDisabled:d.graph3dViewHeadlightDisabled,_rectSelectable:d.graph3dViewRectSelectable,_rectSelectBackground:d.graph3dViewRectSelectBackground,_editSizeColor:d.graph3dViewEditSizeColor,_autoMakeVisible:Qr,_fogDisabled:d.graph3dViewFogDisabled,_fogColor:d.graph3dViewFogColor,_fogNear:d.graph3dViewFogNear,_fogFar:d.graph3dViewFogFar,_dashDisabled:d.graph3dViewDashDisabled,_batchColorDisabled:d.graph3dViewBatchColorDisabled,_batchBlendDisabled:d.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:d.graph3dViewBatchBrightnessDisabled,setEye:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]);var n=this._eye;n[0]=t,n[1]=e,n[2]=i,this.fp(at,c,n)},setCenter:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]);var n=this._center;n[0]=t,n[1]=e,n[2]=i,this.fp(rt,c,n)},setUp:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]);var n=this._up;n[0]=t,n[1]=e,n[2]=i,this.fp("up",c,n)},isTransparentMask:function(t){return t.s("transparent.mask")},getAspect:function(){var t=this,e=t._aspect;return e||t.getWidth()/t.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(t){var e=this,i=e._dataModel,n=e._3o;i!==t&&(i&&(i.umm(e.handleDataModelChange,e),i.umd(e.handleDataPropertyChange,e),n||i.sm().ums(e._16o,e)),e._dataModel=t,t.mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),n?n._21I(t):t.sm().ms(e._16o,e),e.invalidateAll(!0),e.invalidateLight(),e.fp(Te,i,t))},handleDataPropertyChange:function(t){var e=t.data;this.invalidateData(e),Ac(e)&&"s:light.type"===t.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(t){var e=this,i=t.property;e.iv(),e._18Q=c,"eye"===i?e._33Q=!0:"devicePixelRatio"===i?e._42(c,e._devicePixelRatio||Nr):ad[i]&&_h(e)},_5O:function(t){var e=t._22Q();return e?new e(this,t):c},getData3dUI:function(t){var e=this._25I[t._id];return e===i&&(e=this._5O(t),this._25I[t._id]=e),e},invalidateAll:function(t){var e=this;if(t){for(var i in e._25I){var n=e._25I[i];n&&n.dispose()}e._25I={},e.iv(),au(e)}else e.dm().each(function(t){e.invalidateData(t)})},invalidateSelection:function(){var t=this;t.sm().each(function(e){t.invalidateData(e)})},invalidateData:function(t){var e=this,i=e.getData3dUI(t);i&&(i.iv(),e.iv()),au(e,t)},invalidateBatch:function(t){var e=this,n=e._33O,o=n[t],r=[],a={};if(o){o.ds.forEach(function(t){var i=e.getData3dUI(t);i&&i.iv(),delete e._34O[t._id],r.push(t._id)}),delete n[t];for(var s,l,c,h,u,d,f,g,v,_=0;2>_;_++){var p=e[["_wireframeModelMap","_polylineModelMap"][_]],b=e[["_wireframeIndexMap","_polylineIndexMap"][_]];for(a={},g=0;g<r.length;g++){var m=b[r[g]];if(m){delete b[r[g]],v=m.batch,s=p[v];var y=m.begin,w=m.size,x=3*y,C=3*w,I=4*y,O=4*w;for(l=s.ds,c=s.vs,h=s.cs,u=s.ps,d=s.ls,f=m.index,s.invalidate=!0,l[f]=i,f=x;x+C>f;f++)c[f]=i;for(f=I;I+O>f;f++)h[f]=i;for(f=I;I+O>f;f++)u[f]=i;if(d)for(f=x;x+C>f;f++)d[f]=i;a[v]=!0}}for(v in a){s=p[v],l=s.ds,c=s.vs,h=s.cs,u=s.ps,d=s.ls;var S=[];for(f=0;f<l.length;f++)l[f]!==i&&S.push(l[f]);if(0===S.length)delete p[v];else{for(s.ds=S,S=[],f=0;f<c.length;f++)c[f]!==i&&S.push(c[f]);for(s.vs=S,S=[],f=0;f<h.length;f++)h[f]!==i&&S.push(h[f]);for(s.cs=S,S=[],f=0;f<u.length;f++)u[f]!==i&&S.push(u[f]);if(s.ps=S,d){for(S=[],f=0;f<d.length;f++)d[f]!==i&&S.push(d[f]);s.ls=S}}}}e.iv()}},handleDataModelChange:function(t){var e=this,i=t.kind,n=t.data;if("add"===i)e.invalidateData(n),cn(n)&&n.getEdgeGroup()&&n.getEdgeGroup().eachSiblingEdge(e.invalidateData,e),Ac(n)&&e.invalidateLight();else if(i===wt){var o=n._id,r=e._25I[o];r&&(r.dispose(),delete e._25I[o],e.iv()),n===e._currentSubGraph&&e.setCurrentSubGraph(c),au(e,n),Ac(n)&&e.invalidateLight()}else i===xt&&(e.invalidateAll(!0),e.setCurrentSubGraph(c),au(e),e.invalidateLight())},toCanvas:function(t){var e=this,i=e.getGL();if(e.validate(),t){var n=i.getParameter(i.COLOR_CLEAR_VALUE);xh(i,t)}e._42(c,1);var o=e.getWidth(),r=e.getHeight(),a=new Uint8Array(4*o*r),s=Fn(),l=s.getContext("2d");i.readPixels(0,0,o,r,i.RGBA,i.UNSIGNED_BYTE,a),Hn(s,o,r,1);for(var h=l.getImageData(0,0,o,r),u=h.data,d=0;d<u.length;d+=4){var f=d/4,g=b(f/o);f=4*((r-1-g)*o+(f-g*o)),u[f]=a[d],u[f+1]=a[d+1],u[f+2]=a[d+2],u[f+3]=a[d+3]}return l.putImageData(h,0,0),t&&xh(i,n),e._42(c,e._devicePixelRatio||Nr),s},toDataURL:function(t,e){var i=this,n=i.getGL();if(i.validate(),t){var o=n.getParameter(n.COLOR_CLEAR_VALUE);xh(n,t)}i._42(c,1);var r=i._canvas.toDataURL(e||"image/png",1);return t&&xh(n,o),i._42(c,i._devicePixelRatio||Nr),r},getGL:function(){var t=this,e=t._26I,i=t._prg;if(!e)try{t._2O={},e=t._26I=t._canvas.getContext("webgl",t._attributes)||t._canvas.getContext("experimental-webgl",t._attributes),e._emptyTexture=vh(e),t._buffer={vs:bh(e),ns:bh(e),is:bh(e),uv:bh(e),batchColor:bh(e),batchBlend:bh(e),batchBrightness:bh(e),lineDistance:bh(e)},t._1O=gh(e);var n=t._cube={vs:bh(e),ns:bh(e),is:bh(e),uv:bh(e)};Ph(e,n.vs,Su),Ph(e,n.ns,Eu),Ph(e,n.uv,Vu),Mh(e,n.is,Tu)}catch(t){}if(e&&!i){if(!(i=t._prg=e.createProgram()))return c;var o=t._dirs.length,r=t._spots.length,a=t._59O.length,s=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];o&&s.push("uDirColor","uDirPosition"),r&&s.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),a&&s.push("uPointColor","uPointRange","uPointPosition"),xh(e,[0,0,0,0]),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),jc||(Zh=pn(Zh.substring(0,Zh.indexOf("^#"))),Jh=pn(Jh),jc=!0);var l=["#define MAX_DIR "+o,"#define MAX_SPOT "+r,"#define MAX_POINT "+a,t._fogDisabled?"":"#define FOG",t._dashDisabled?"":"#define DASH",t._batchColorDisabled?"":"#define BATCHCOLOR",t._batchBlendDisabled?"":"#define BATCHBLEND",t._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),h=ph(e,i,e.VERTEX_SHADER,Zh.replace("PREFIX",l)),u=ph(e,i,e.FRAGMENT_SHADER,Jh.replace("PREFIX",l));Q?s.push("aPosition"):(i.aPosition=0,e.bindAttribLocation(i,0,"aPosition")),e.linkProgram(i),s.forEach(function(t){i[t]=/^u/.test(t)?e.getUniformLocation(i,t):e.getAttribLocation(i,t)}),e.useProgram(i),e.deleteShader(h),e.deleteShader(u)}return e},getBrightness:function(t){var e=t.s("brightness"),i=this.isSelected(t)?t.s("select.brightness"):c;return e==c?i:i==c?e:e*i},getWireframe:function(t){var e=t.s("wf.visible"),i=t.s("wf.width");return!0===e||i>0&&"selected"===e&&this.isSelected(t)?{color:t.s("wf.color"),width:i,short:t.s("wf.short"),mat:t.s("wf.mat")}:void 0},getBodyColor:function(t){return t.s("body.color")},getMat:function(t){return t.getMat?t.getMat():t.s("mat")},getFaceMat:function(t,e){return t.getFaceMat?t.getFaceMat(e):t.s(e+".mat")},getFaceBlend:function(t,e){return t.s(e+".blend")||t.s("all.blend")},getFaceColor:function(t,e){return t.s(e+".color")||t.s("all.color")},getFaceImage:function(t,e){return t.s(e+".image")||t.s("all.image")},getFaceDiscardSelectable:function(t,e){var i=t.s(e+".discard.selectable");return i==c?t.s("all.discard.selectable"):i},getFaceUv:function(t,e){return t.s(e+".uv")||t.s("all.uv")},getFaceUvOffset:function(t,e){return t.s(e+".uv.offset")||t.s("all.uv.offset")},getFaceUvScale:function(t,e){return t.s(e+".uv.scale")||t.s("all.uv.scale")},getFaceLight:function(t,e){var i=t.s(e+".light");return i==c?t.s("all.light"):i},getFaceVisible:function(t,e){var i=t.s(e+".visible");return i==c?t.s("all.visible"):i},getFaceOpacity:function(t,e){var i=t.s(e+".opacity");return i==c?t.s("all.opacity"):i},getFaceTransparent:function(t,e){var i=t.s(e+".transparent");return i==c?t.s("all.transparent"):i},getFaceReverseColor:function(t,e){return t.s(e+".reverse.color")||t.s("all.reverse.color")},getFaceReverseFlip:function(t,e){var i=t.s(e+".reverse.flip");return i==c?t.s("all.reverse.flip"):i},getFaceReverseCull:function(t,e){var i=t.s(e+".reverse.cull");return i==c?t.s("all.reverse.cull"):i},getTextureMap:function(){return this._2O},deleteTexture:function(t){var e=this,i=e._2O[t];i&&(delete e._2O[t],e.getGL().deleteTexture(i))},getTexture:function(t,e){if(!t)return c;var i=this,n=i.getGL(),o=i._2O[t];if(!o){var r=ma(t);if(r)if(r.tagName){if(r.dynamic)return gh(n,r,i._1O);o=i._2O[t]=gh(n,r)}else{var a=Ls(r,e),s=js(r,e);if(a>=1&&s>=1){var l=Mo(a,s);return zs(l,r,0,0,a,s,e,i),l.restore(),gh(n,ko,i._1O)}}}return o},redraw:function(){this.iv()},validateImpl:function(){var t=this;if(t._lightChanged){t._lightChanged=!1;var e=[],i=[],n=[];t.dm().each(function(t){if(Ac(t)){var o=t.s("light.type");"point"===o?e.push(t):"spot"===o?i.push(t):"directional"===o&&n.push(t)}}),(e.length!==t._59O.length||i.length!==t._spots.length||n.length!==t._dirs.length)&&_h(t),t._59O=e,t._spots=i,t._dirs=n}t._42(),t._1o.iv()},_42:function(t,e){var i=this;if(!i._35O&&(!_i||fi(_i))){var n,o;t&&(t instanceof lc?o=t:n=t);var r=i._canvas,a=i.getWidth(),s=i.getHeight(),l=i.getGL(),h=i._prg;if(l){if(e?t||Hn(r,a,s,e):(e=i._devicePixelRatio||Nr,t||a===r.clientWidth&&s===r.clientHeight||Hn(r,a,s,e)),l.viewport(0,0,a*e,s*e),i._81O=c,l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),Bh(l,h.uBrightness,1),Bh(l,h.uOpacity,1),Bh(l,h.uPartOpacity,1),l._picking=!!t,Bh(l,h.uPick,!!t),Bh(l,h.uTexture,!1),Bh(l,h.uFix,!1),Bh(l,h.uTransparent,!1),Bh(l,h.uBatchColor,!1),Bh(l,h.uBatchBlend,!1),Bh(l,h.uBatchBrightness,!1),t||(Gc(i,l,h),i._fogDisabled||(Bh(l,h.uFogColor,i._fogColor),Bh(l,h.uFogNear,i._fogNear),Bh(l,h.uFogFar,i._fogFar))),Lh(l,h.aPosition),Lh(l,h.aNormal),jh(l,h.aUv),jh(l,h.aBatchColor),jh(l,h.aBatchBlend),jh(l,h.aBatchBrightness),jh(l,h.aLineDistance),Bh(l,h.uPMatrix,dh(i)),Bh(l,h.uViewMatrix,uh(i,i._7O)),o){var u=l.getParameter(l.COLOR_CLEAR_VALUE);l.clearColor(0,0,0,0),l.disable(l.BLEND),jh(l,h.aNormal),Ph(l,i._cube.vs,c,h.aPosition),Mh(l,i._cube.is),Fc(o,i,et,0),Fc(o,i,K,6),Fc(o,i,it,12),Fc(o,i,tt,18),Fc(o,i,nt,24),Fc(o,i,ot,30),Lh(l,h.aNormal),xh(l,u)}else if(n){n.value=2;var u=l.getParameter(l.COLOR_CLEAR_VALUE);l.clearColor(0,0,0,0),l.disable(l.BLEND),i._95I(l,h,n),wu(i,n),yu(i,i._polylineModelMap,n),yu(i,i._wireframeModelMap,n),Bh(l,h.uTransparent,!0),i._95I(l,h,n,!0),wu(i,n,!0),yu(i,i._polylineModelMap,n,!0),yu(i,i._wireframeModelMap,n,!0),Bh(l,h.uTransparent,!1),l.disable(l.DEPTH_TEST),i._30O._42(l,h,n),l.enable(l.DEPTH_TEST),xh(l,u)}else l.disable(l.BLEND),i._31O._42(l,h),i._95I(l,h),wu(i),yu(i,i._polylineModelMap),yu(i,i._wireframeModelMap),l.enable(l.BLEND),l.depthMask(!1),Bh(l,h.uTransparent,!0),i._95I(l,h,c,!0),
wu(i,c,!0),yu(i,i._polylineModelMap,c,!0),yu(i,i._wireframeModelMap,c,!0),Bh(l,h.uTransparent,!1),l.depthMask(!0),l.disable(l.BLEND),l.disable(l.DEPTH_TEST),i._32O._42(l,h),i._30O._42(l,h),l.enable(l.DEPTH_TEST);Ph(l,c),Mh(l,c),i._33Q=!1}}},_95I:function(t,e,i,n){var o=this,r=function(t){return n?t:!t};o.dm().each(function(n){if(o.isVisible(n)&&L){if(!i&&o.isTransparentMask(n))return;var a=o.getData3dUI(n);a&&a._42(t,e,i,r)}})},getLogicalPoint:function(t){return qa(t,this._canvas)},getHitFaceInfo:function(t){t.target&&(t=this.lp(t));var e=this.getDataInfoAt(t);if(e){var i=this._1o.face(e.data,Zi(t.x,t.y));if(i)return{data:e.data,face:i}}return c},getDataAt:function(t){var e=this.getDataInfoAt(t);return e?e.data:c},getDataInfoAt:function(t,e){return t.target&&(t=this.lp(t)),this._1o.get(Zi(t.x,t.y,e),!0)},getDatasInRect:function(t){return this._1o.get(t)},setEditable:function(t){var e=this,i=e._editable;e._editable=t,this.fp(pe,i,t)},isEditable:function(t){var e=this;return!!e._editable&&(!!ln(t)&&(!!t.s("3d.editable")&&(!e._editableFunc||e._editableFunc(t))))},isSelectable:function(t){return t.s("3d.selectable")&&this.sm().isSelectable(t)},isMovable:function(t){var e=this;return(!cn(t)||t.getStyle(Qt)===Et)&&(!!t.s("3d.movable")&&(!e._movableFunc||e._movableFunc(t)))},isSizeEditable:function(t){return!!ln(t)&&(!this._sizeEditableFunc||this._sizeEditableFunc(t))},isRotationEditable:function(t){return!(!ln(t)||!1===t.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(t))},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(t){this.setZoom(ua,t)},zoomOut:function(t){this.setZoom(1/ua,t)},setZoom:function(t,e){if(1!==t){var i=this;if(i._ortho)return void i.setOrthoZoom(t,e);i._14o&&i._14o.stop(!0);var n=1/t,o=i._eye,r=i._center,a=r[0]+(o[0]-r[0])*n-o[0],s=r[1]+(o[1]-r[1])*n-o[1],l=r[2]+(o[2]-r[2])*n-o[2];if(!(Aa(o,r)<i._moveStep&&1>n)){if(e=gn(e)){var h=Sa(o);return e.action=function(t){i.fi({kind:i._zooming?"betweenZoom":"beginZoom"}),i._zooming=1,o[0]=h[0]+a*t,o[1]=h[1]+s*t,o[2]=h[2]+l*t,i.fp(at,c,o)},e._37o=function(){delete i._14o,delete i._zooming,i.fi({kind:"endZoom"}),i.onZoomEnded()},i._14o=Va(e)}o[0]+=a,o[1]+=s,o[2]+=l,i.fp(at,c,o)}}},setOrthoZoom:function(t,e){if(1!==t){var i=this;i._14o&&i._14o.stop(!0);var n=i._orthoWidth,o=n/t-n;if(!(n<i._moveStep&&t>1))return(e=gn(e))?(e.action=function(t){i.fi({kind:i._zooming?"betweenZoom":"beginZoom"}),i._zooming=1,i.setOrthoWidth(n+o*t)},e._37o=function(){delete i._14o,delete i._zooming,i.fi({kind:"endZoom"}),i.onZoomEnded()},i._14o=Va(e)):void i.setOrthoWidth(n/t)}},getPositionInfo:function(t){var e=this,i=e._eye,n=e._center,o=e.getAspect(),r=t?hs(ls(n,i,!0),ls(t,i)):Aa(i,n);if(e._ortho){var a=e._orthoWidth;return{length:r,height:a/o,width:a}}var s=2*P(e._fovy/2)*r;return{length:r,height:s,width:s*o}},getCenterInfo:function(){var t=this;return t._81O||(t._81O=t.getPositionInfo()),Sa(t._81O)},rotate:function(t,e,i,n){var o=this;if(t||e){n==c&&(n=o._firstPersonMode),o._88O&&o._88O.stop(!0);var r=o._center,a=o._eye,s=o.getCenterInfo().length,l=n?r:a,h=n?a:r,u=ls(l,h),d=M(u[0],u[2]),f=M(y(u[0]*u[0]+u[2]*u[2]),u[1]),g=n?rt:at;return n&&(e=-e),(i=gn(i))?(i.action=function(i){o.fi({kind:o._rotating?"betweenRotate":"beginRotate"}),o._rotating=1;var n=d+t*i,r=f+e*i;r=Yc(r),u[0]=s*S(r)*S(n),u[1]=s*I(r),u[2]=s*S(r)*I(n),l[0]=h[0]+u[0],l[1]=h[1]+u[1],l[2]=h[2]+u[2],o.fp(g,c,l)},i._37o=function(){delete o._88O,delete o._rotating,o.fi({kind:"endRotate"}),o.onRotateEnded()},o._88O=Va(i)):(d+=t,f+=e,f=Yc(f),u[0]=s*S(f)*S(d),u[1]=s*I(f),u[2]=s*S(f)*I(d),l[0]=h[0]+u[0],l[1]=h[1]+u[1],l[2]=h[2]+u[2],void o.fp(g,c,l))}},pan:function(t,e,i,n){if(t||e){var o=this;n==c&&(n=o._firstPersonMode),o._89O&&o._89O.stop(!0);var r=uh(o),a=[r[0]*t,r[4]*t,r[8]*t],s=[r[1]*e,r[5]*e,r[9]*e],l=a[0]+s[0],h=a[1]+s[1],u=a[2]+s[2],d=o._center,f=o._eye;if(n){var g=Xh(o.getBoundaries(),f[0],f[2],f[0]+l,f[2]+u,y(l*l+u*u));l=g[0],u=g[1]}if(i=gn(i)){var v=Sa(f),_=Sa(d);return i.action=function(t){o.fi({kind:o._panning?"betweenPan":"beginPan"}),o._panning=1,d[0]=_[0]+l*t,d[1]=_[1]+h*t,d[2]=_[2]+u*t,f[0]=v[0]+l*t,f[1]=v[1]+h*t,f[2]=v[2]+u*t,o.fp(at,c,f),o.fp(rt,c,d)},i._37o=function(){delete o._89O,delete o._panning,o.fi({kind:"endPan"}),o.onPanEnded()},o._89O=Va(i)}d[0]+=l,d[1]+=h,d[2]+=u,f[0]+=l,f[1]+=h,f[2]+=u,o.fp(at,c,f),o.fp(rt,c,d)}},walk:function(t,e,i){if(t){var n=this;i==c&&(i=n._firstPersonMode),n._90O&&n._90O.stop(!0);var o=n._center,r=n._eye,a=ls(o,r,!0);if(i){var s=Xh(n.getBoundaries(),r[0],r[2],r[0]+a[0]*t,r[2]+a[2]*t,C(t));if(!(t=Aa(s)))return;a=[s[0]/t,0,s[1]/t]}if(e=gn(e)){var l=Sa(r),h=Sa(o);return e.action=function(e){n.fi({kind:n._walking?"betweenWalk":"beginWalk"}),n._walking=1;var i=t*e;r[0]=l[0]+a[0]*i,r[1]=l[1]+a[1]*i,r[2]=l[2]+a[2]*i,o[0]=h[0]+a[0]*i,o[1]=h[1]+a[1]*i,o[2]=h[2]+a[2]*i,n.fp(at,c,r),n.fp(rt,c,o)},e._37o=function(){delete n._90O,delete n._walking,n.fi({kind:"endWalk"}),n.onWalkEnded()},n._90O=Va(e)}r[0]+=a[0]*t,r[1]+=a[1]*t,r[2]+=a[2]*t,o[0]+=a[0]*t,o[1]+=a[1]*t,o[2]+=a[2]*t,n.fp(at,c,r),n.fp(rt,c,o)}},handleScroll:function(t,e){t.preventDefault();var i=this,n=i._moveStep;i.isFirstPersonMode()?i.isPannable()&&i.pan(0,e>0?n:-n):i.isZoomable()&&i.setZoom(0>e?1/da:da)},handlePinch:function(t,e){this.isZoomable()&&this.setZoom(e>t?1/fa:fa)},reset:function(){this.setCenter(d.graph3dViewCenter),this.setEye(d.graph3dViewEye),this.setUp(d.graph3dViewUp)},moveSelection:function(t,e,i){var n,o=this,r=o.dm();r&&(n=r.getHistoryManager()),n&&n.beginInteraction(),ur(this.sm().toSelection(this.isMovable,this),t,e,i),n&&n.endInteraction()},getMoveMode:function(t,e){var i=e.s("3d.move.mode");if(i)return i;var n="88",o="89",r="90";return ja(t)||xi[n]&&xi[o]&&xi[r]?"xyz":xi[n]&&xi[o]?"xy":xi[n]&&xi[r]?"xz":xi[o]&&xi[r]?"yz":xi[n]?"x":xi[o]?"y":xi[r]?"z":"xz"},handleTick:function(){var t=this,e=!1,i=t._moveStep,n=i,o=!1,r=!0,a=-1*t._rotateStep;if(t.isWalkable()||(n=0),t.isPannable()||(i=0),t.isRotatable()||(a=0),t._32Q){var s=(Wi()-t._32Q)/50;n*=s,i*=s,a*=s}t._31Q&&(Hi(t._31Q),delete t._31Q,delete t._32Q),bo()&&(e=!0,t.pan(-i,0,o,r)),yo()&&(e=!0,t.pan(i,0,o,r)),wo()&&(e=!0,ja()?t.pan(0,i,o,r):t.walk(n,o,r)),mo()&&(e=!0,ja()?t.pan(0,-i,o,r):t.walk(-n,o,r)),xo()&&(e=!0,t.rotate(-a,0,o,r)),Io()&&(e=!0,t.rotate(a,0,o,r)),Co()&&(e=!0,t.rotate(0,-a/2,o,r)),Oo()&&(e=!0,t.rotate(0,a/2,o,r)),e&&(t._32Q=Wi(),t._31Q=Ca(t.handleTick,t))},handleKeyDown:function(t){var e=this;!Ra(t)&&Do[t.keyCode]?e.handleTick():fo(t)?e.selectAll():go(t)?e.handleDelete(t):So(t)&&this.isResettable()&&e.reset()},checkDoubleClickOnNote:function(t,e,i){var n=this;if(i===Lt){if(e.s("note.toggleable"))return e.s(Wt,!e.s(Wt)),n.fi({kind:"toggleNote",event:t,data:e,part:i}),!0}else if(i===jt&&e.s("note2.toggleable"))return e.s(Ht,!e.s(Ht)),n.fi({kind:"toggleNote2",event:t,data:e,part:i}),!0;return!1},checkDoubleClickOnRotation:function(t,e,i){return i===_d?(e.setRotationX(0),!0):i===pd?(e.setRotationY(0),!0):i===bd&&(e.setRotationZ(0),!0)},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(t){var e=this,i=e.getWidth()/2,n=e.getHeight()/2,o=e._18Q;return o||(o=dh(e),e._18Q=oh(o,o,uh(e))),t=ps([t[0],t[1],t[2],1],o),{x:i+i*t[0]/t[3],y:n-n*t[1]/t[3]}},getHitPosition:function(t,e,i){var n=this,o=n.getWidth(),r=n.getHeight(),a=t.target?n.lp(t):t,s=a.x-o/2,l=a.y-r/2,c=n.getCenterInfo(),h=uh(n);e=e||[0,0,0],i=i||[0,1,0],s=s/o*c.width,l=-1*l/r*c.height;var u=[h[0]*s,h[4]*s,h[8]*s],d=[h[1]*l,h[5]*l,h[9]*l],f=[u[0]+d[0],u[1]+d[1],u[2]+d[2]],g=n.getCenter(),v=Zc(n,e,i,[f[0]+g[0],f[1]+g[1],f[2]+g[2]]);return v||[0,0,0]},getLineLength:function(t){this.validate();var e=this.getData3dUI(t);if(e&&e.getCache){var i=e.getCache();if(i)return i[i.length-1].length}return 0},getLineOffset:function(t,e){this.validate();var i=this.getData3dUI(t);if(i&&i.getCache){var n=i.getCache();if(n)return Ku(n,e)}return c},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var sd=Yh.Interactor=function(t){this.gv=t};qh("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var ld=Yh.DefaultInteractor=function(t){bn(ld,this,[t])};qh("DefaultInteractor",sd,{handle_contextmenu:function(t){pa(t)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){pa(t);var e=this,i=e.gv,n=Ma(t),o=i.getDataInfoAt(t),r=o?o.data:c,a=o?o.part:c,s=i.sm(),l=ho(t),h=Ba(t);i.setFocus(t)&&(e._62O=c,e._57I=c,r?Ra(t)?s.co(r)?s.rs(r):s.as(r):s.co(r)||s.ss(r):n&&(Ra(t)?i.isRectSelectable()&&(e._62O=Kt):e._57I=za(t)),e._31Q&&(Hi(e._31Q),delete e._31Q,delete e._32Q),e._62O||(i.isFirstPersonMode()&&(ja(t)||h>2?e._62O="pan":i.isMouseRoamable()||q?(e._62O="roaming",e.foward=l&&Ma(t),e._32Q=Wi(),e._31Q=Ca(e.tick,e)):n||(e._62O="roaming")),e._62O||(n&&l&&xd[a]?(e._62O=a,e.p3=r.p3()):n&&l&&ln(r)&&i.isSelected(r)&&i.isMovable(r)?(e._62O="move",e.p3=r.p3(),e.movedata=r):q&&(h>2?e._62O="pan":2===h&&(e.dist=ar(t),e._62O="pinch")))),e.point=i.lp(t),Za(e,t),La(t)?i.handleDoubleClick(t,r,a):i.handleClick(t,r,a))},tick:function(){var t=this,e=t.gv,i=e._moveStep;t.point&&e.isWalkable()&&(t._32Q&&(i*=(Wi()-t._32Q)/50),e.walk(t.foward?i:-i),t._32Q=Wi(),t._31Q=Ca(t.tick,t))},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this._57I;e&&(Aa(e,za(t))<=1&&this.gv.sm().cs(),this._57I=c)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e,i,n=this,o=n.gv,r=n._62O,a=n.point,s=o.dm(),l=s.getHistoryManager(),c=o.lp(t),h=c.x-a.x,u=c.y-a.y,d=-E*h/o.getWidth(),f=-E*u/o.getHeight();if("roaming"===r)n.rotate(t,d/2,f/2);else if(r===_d||r===pd||r===bd)l&&!o._86O&&l.beginInteraction(),o.fi({kind:o._86O?"betweenEditRotation":"beginEditRotation",event:t}),o._86O=1,o.sm().each(function(t){if(ln(t)&&o.isRotationEditable(t)){var e=C(d)>C(f)?d:f;r===_d?t.setRotationX(t.getRotationX()+e):r===pd?t.setRotationY(t.getRotationY()+e):r===bd&&t.setRotationZ(t.getRotationZ()+e)}});else if("move"===r||xd[r]){r===md||r===yd||r===wd?(l&&!o._87O&&l.beginInteraction(),o.fi({kind:o._87O?"betweenEditSize":"beginEditSize",event:t}),o._87O=1):(l&&!o._moving&&l.beginInteraction(),o.fi({kind:o._moving?"betweenMove":"beginMove",event:t}),o._moving=1);var g,v=n.p3,_=o.getPositionInfo(v),p=uh(o);g=r===fd?"x":r===gd?"y":r===vd?"z":r===md?"sx":r===yd?"sy":r===wd?"sz":o.getMoveMode(t,n.movedata),h=h/o.getWidth()*_.width,u=-1*u/o.getHeight()*_.height;var b,m,y=[p[0]*h,p[4]*h,p[8]*h],x=[p[1]*u,p[5]*u,p[9]*u],I=y[0]+x[0],O=y[1]+x[1],S=y[2]+x[2],T=[v[0]+I,v[1]+O,v[2]+S],V=ls(o.getEye(),T,!0);if("xyz"===g?(b=T,o.moveSelection(I,O,S)):"xz"===g?(b=Zc(o,v,[0,1,0],T))&&o.moveSelection(b[0]-v[0],0,b[2]-v[2]):"xy"===g?(b=Zc(o,v,[0,0,1],T))&&o.moveSelection(b[0]-v[0],b[1]-v[1],0):"yz"===g?(b=Zc(o,v,[1,0,0],T))&&o.moveSelection(0,b[1]-v[1],b[2]-v[2]):"x"===g||"sx"===g?(V[0]=0,(b=Zc(o,v,V,T))&&(m=b[0]-v[0],"x"===g?o.moveSelection(m,0,0):o.sm().each(function(n){ln(n)&&o.isSizeEditable(n)&&(e=w(rs,n.getWidth()+m),i=e/n.getWidth(),n.setWidth(e),ja(t)&&(n.setHeight(n.getHeight()*i),n.setTall(n.getTall()*i)))}))):"y"===g||"sy"===g?(V[1]=0,(b=Zc(o,v,V,T))&&(m=b[1]-v[1],"y"===g?o.moveSelection(0,m,0):o.sm().each(function(n){ln(n)&&o.isSizeEditable(n)&&(e=w(rs,n.getTall()+m),i=e/n.getTall(),n.setTall(e),ja(t)&&(n.setHeight(n.getHeight()*i),n.setWidth(n.getWidth()*i)))}))):("z"===g||"sz"===g)&&(V[2]=0,(b=Zc(o,v,V,T))&&(m=b[2]-v[2],"z"===g?o.moveSelection(0,0,m):o.sm().each(function(n){ln(n)&&o.isSizeEditable(n)&&(e=w(rs,n.getHeight()+m),i=e/n.getHeight(),n.setHeight(e),ja(t)&&(n.setTall(n.getTall()*i),n.setWidth(n.getWidth()*i)))}))),!b)return;n.p3=b}else if(r===Kt){var D=n.div;D||(D=n.div=zn(),Un(n.getView(),D),D.op=a,D.style.background=o.getRectSelectBackground()),o.fi({kind:o._rectSelecting?"betweenRectSelect":"beginRectSelect",event:t}),o._rectSelecting=1,D.rect=Wa(D.op,c),io(D,D.rect)}else if("pinch"===r&&2===Ba(t)){o.fi({kind:o._pinching?"betweenPinch":"beginPinch",event:t}),o._pinching=1;var m=ar(t);o.handlePinch(m,n.dist),n.dist=m}else"pan"===r||ja(t)?n.pan(t,h,u):o.isFirstPersonMode()||(Ma(t)?n.rotate(t,d,f):(n.pan(t,h,0),o.isWalkable()&&(o.fi({kind:o._walking?"betweenWalk":"beginWalk",event:t}),o._walking=1,o.walk(u/o.getHeight()*o.getCenterInfo().height))));n.point=c},pan:function(t,e,i){var n=this.gv;if(n.isPannable()){var o=n.getCenterInfo(),r=e/n.getWidth()*o.width,a=-1*i/n.getHeight()*o.height;n.fi({kind:n._panning?"betweenPan":"beginPan",event:t}),n._panning=1,n.pan(-r,-a)}},rotate:function(t,e,i){var n=this.gv;n.isRotatable()&&(n.fi({kind:n._rotating?"betweenRotate":"beginRotate",event:t}),n._rotating=1,n.rotate(e,i))},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,i=e.gv,n=i.dm(),o=n.getHistoryManager(),r=e.div;if(r){var a=i.getDatasInRect(r.rect);if(!a.isEmpty()){var s=i.sm(),l=s.toSelection();a.each(function(t){s.co(t)?l.remove(t):l.add(t)}),s.ss(l)}Ja(r)}i._moving&&(delete i._moving,i.fi({kind:"endMove",event:t}),i.onMoveEnded(),o&&o.endInteraction()),i._panning&&(delete i._panning,i.fi({kind:"endPan",event:t}),i.onPanEnded()),i._rotating&&(delete i._rotating,i.fi({kind:"endRotate",event:t}),i.onRotateEnded()),i._86O&&(delete i._86O,i.fi({kind:"endEditRotation",event:t}),o&&o.endInteraction()),i._87O&&(delete i._87O,i.fi({kind:"endEditSize",event:t}),o&&o.endInteraction()),i._pinching&&(delete i._pinching,i.fi({kind:"endPinch",event:t}),i.onPinchEnded()),i._rectSelecting&&(delete i._rectSelecting,i.fi({kind:"endRectSelect",event:t}),i.onRectSelectEnded()),i._walking&&(delete i._walking,i.fi({kind:"endWalk",event:t}),i.onWalkEnded()),e.dist=e.point=e._62O=e.p3=e.movedata=e.div=e._57I=e._32Q=e._31Q=e.foward=c}});var cd=function(t){this.gv=t};is(cd,e,{_iv:!0,iv:function(){this._iv=!0},face:function(t,e){var i=this,n=i.gv.getGL();if(!n||!ln(t))return c;var o=e.x,r=e.width,a=e.height,s=i.height-e.y-a,l=b(r/2),h=new Uint8Array(4*r*a),u=0;for(i.iv(),i.validate(t),yh(n,i.frame),n.readPixels(o,s,r,a,n.RGBA,n.UNSIGNED_BYTE,h),yh(n,c),i.iv();l>=u;u++)for(var d=l-u,f=l+u,g=d;f>=g;g++)for(var v=d;f>=v;v++)if(g===d||g===f||v===d||v===f){var _=zc.m[h[4*(g*r+v)]];if(_)return _}},get:function(t,e){this.validate();var i=this,n=i.gv.getGL();if(!n)return c;var o,r,a=t.x,s=t.width,l=t.height,h=i.height-t.y-l,u=b(s/2),d=new Uint8Array(4*s*l),f=0,g=d.length,v=e?c:new Fs,_=e?c:{};if(yh(n,i.frame),n.readPixels(a,h,s,l,n.RGBA,n.UNSIGNED_BYTE,d),yh(n,c),e){for(;u>=f;f++)for(var p=u-f,m=u+f,y=p;m>=y;y++)for(var w=p;m>=w;w++)if((y===p||y===m||w===p||w===m)&&(o=i.info(d,4*(y*s+w))))return o}else for(;g>f;f+=4)(o=i.info(d,f))&&(r=o.data,_[r._id]||(v.add(r),_[r._id]=r));return v},info:function(t,e){return this.colorMap[(t[e]<<24)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3]]},validate:function(t){var e=this,i=e.gv,n=i.getGL();if(n){var o=i.getWidth(),r=i.getHeight(),a=n.RGBA,s=n.TEXTURE_2D,l=n.RENDERBUFFER,h=n.FRAMEBUFFER;e.texture||(e.texture=gh(n),e.render=n.createRenderbuffer(),e.frame=n.createFramebuffer()),(e.width!==o||e.height!==r)&&(mh(n,e.texture),n.texImage2D(s,0,a,o,r,0,a,n.UNSIGNED_BYTE,c),wh(n,n.TEXTURE_MIN_FILTER,n.LINEAR),n.bindRenderbuffer(l,e.render),n.renderbufferStorage(l,n.DEPTH_COMPONENT16,o,r),yh(n,e.frame),n.framebufferTexture2D(h,n.COLOR_ATTACHMENT0,s,e.texture,0),n.framebufferRenderbuffer(h,n.DEPTH_ATTACHMENT,l,e.render),mh(n,c),n.bindRenderbuffer(l,c),yh(n,c),e.width=o,e.height=r),e._iv&&(e._iv=!1,yh(n,e.frame),i._42(t||(e.colorMap={}),1),yh(n,c))}}});var hd=function(t){this.gv=t};is(hd,e,{gap:0,size:0,_42:function(t,e){var i=this,n=i.gv,o=n._gridGap,r=n._gridSize;if(n._gridVisible){if(i.gap!==o||i.size!==r){for(var a=[],s=n._gridSize/2,l=o*s,h=0;2*s+1>h;h++){var u=6*h,d=6*(2*s+1)+u;a[u]=-l,a[u+1]=0,a[u+2]=h*o-l,a[u+3]=l,a[u+4]=0,a[u+5]=h*o-l,a[d]=h*o-l,a[d+1]=0,a[d+2]=-l,a[d+3]=h*o-l,a[d+4]=0,a[d+5]=l}i.vs=new ss(a),i.gap=o,i.size=r}Fh(n),Ch(t,e),Th(t),Dh(t,e,1,n._gridColor,n._buffer.vs,i.vs),Eh(t,0,i.vs.length/3,t.LINES),Vh(t),Ih(t,e)}else i.vs=i.gap=i.size=c}});var ud=function(t){this.gv=t};is(ud,e,{_42:function(t,e){var i=this.gv,n=i._buffer.vs,o=i._axisXColor,r=i._axisYColor,a=i._axisZColor,s=i._originAxisVisible,l=i._centerAxisVisible;if(s||l){var h=Q?t.TRIANGLES:t.TRIANGLE_FAN,u=t.LINES;if(Fh(i),Ch(t,e),Th(t),s){var d=i.getCenterInfo(),f=x(d.width,d.height)/5,g=.8*f,v=.05*f;Dh(t,e,1.5,o,n,new ss([0,0,0,f,0,0,g,v,0,g,0,v,g,-v,0,g,0,-v,g,v,0,0,0,0,0,f,0,v,g,0,0,g,v,-v,g,0,0,g,-v,v,g,0,0,0,0,0,0,f,v,0,g,0,v,g,-v,0,g,0,-v,g,v,0,g])),Eh(t,0,2,u),Eh(t,1,6,h),Dh(t,e,c,r),Eh(t,7,2,u),Eh(t,8,6,h),Dh(t,e,c,a),Eh(t,14,2,u),Eh(t,15,6,h)}if(l){var _=i._center,p=_[0],b=_[1],m=_[2],d=i.getPositionInfo(_);f=x(d.width,d.height)/20,Dh(t,e,1.5,o,n,new ss([p,b,m,p+f,b,m,p,b,m,p,b+f,m,p,b,m,p,b,m+f])),Eh(t,0,2,u),Dh(t,e,c,r),Eh(t,2,2,u),Dh(t,e,c,a),Eh(t,4,2,u)}Vh(t),Ih(t,e)}}});var dd=function(t){this.gv=t},fd="edit_tx",gd="edit_ty",vd="edit_tz",_d="edit_rx",pd="edit_ry",bd="edit_rz",md="edit_sx",yd="edit_sy",wd="edit_sz",xd={};xd[fd]=1,xd[gd]=1,xd[vd]=1,xd[_d]=1,xd[pd]=1,xd[bd]=1,xd[md]=1,xd[yd]=1,xd[wd]=1,is(dd,e,{_42:function(t,e,i){var n=this,o=n.gv,r=o.sm().ld();if(o.isEditable(r)&&ln(r)&&(!o.isFirstPersonMode()||!o.isMouseRoamable()&&!q)){Fh(o);var a,s,l=o.isMovable(r),c=o.isRotationEditable(r),h=o.isSizeEditable(r),u=o._axisXColor,d=o._axisYColor,f=o._axisZColor,g=o._editSizeColor,v=o.getCenterInfo(),_=x(v.width,v.height)/10,p=_/(i?5:10),b=.7*_,m=.4*b,y=r.p3(),w=y[0],C=y[1],I=y[2];a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],l&&n._17O(t,e,r,i,fd,u,a,[w,C-p,I,w+b,C-p,I,w+b,C,I,w+b,C,I,w,C,I,w,C-p,I,w,C-p,I+p,w+b,C-p,I+p,w+b,C-p,I,w+b,C-p,I,w,C-p,I,w,C-p,I+p]),s=w+b,h&&n._17O(t,e,r,i,md,g,a,[s,C-p,I,s+m,C-p,I,s+m,C,I,s+m,C,I,s,C,I,s,C-p,I,s,C-p,I+p,s+m,C-p,I+p,s+m,C-p,I,s+m,C-p,I,s,C-p,I,s,C-p,I+p]),s+=m,c&&n._17O(t,e,r,i,_d,u,a,[s,C-p,I,s+m,C-p,I,s+m,C,I,s+m,C,I,s,C,I,s,C-p,I,s,C-p,I+p,s+m,C-p,I+p,s+m,C-p,I,s+m,C-p,I,s,C-p,I,s,C-p,I+p]),a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],l&&n._17O(t,e,r,i,gd,d,a,[w,C,I,w,C+b,I,w-p,C+b,I,w-p,C+b,I,w-p,C,I,w,C,I,w,C,I,w,C,I-p,w,C+b,I-p,w,C+b,I-p,w,C+b,I,w,C,I]),s=C+b,h&&n._17O(t,e,r,i,yd,g,a,[w,s,I,w,s+m,I,w-p,s+m,I,w-p,s+m,I,w-p,s,I,w,s,I,w,s,I,w,s,I-p,w,s+m,I-p,w,s+m,I-p,w,s+m,I,w,s,I]),s+=m,c&&n._17O(t,e,r,i,pd,d,a,[w,s,I,w,s+m,I,w-p,s+m,I,w-p,s+m,I,w-p,s,I,w,s,I,w,s,I,w,s,I-p,w,s+m,I-p,w,s+m,I-p,w,s+m,I,w,s,I]),a=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],l&&n._17O(t,e,r,i,vd,f,a,[w,C,I,w,C,I+b,w,C-p,I+b,w,C-p,I+b,w,C-p,I,w,C,I,w,C-p,I,w-p,C-p,I,w-p,C-p,I+b,w-p,C-p,I+b,w,C-p,I+b,w,C-p,I]),s=I+b,h&&n._17O(t,e,r,i,wd,g,a,[w,C,s,w,C,s+m,w,C-p,s+m,w,C-p,s+m,w,C-p,s,w,C,s,w,C-p,s,w-p,C-p,s,w-p,C-p,s+m,w-p,C-p,s+m,w,C-p,s+m,w,C-p,s]),s+=m,c&&n._17O(t,e,r,i,bd,f,a,[w,C,s,w,C,s+m,w,C-p,s+m,w,C-p,s+m,w,C-p,s,w,C,s,w,C-p,s,w-p,C-p,s,w-p,C-p,s+m,w-p,C-p,s+m,w,C-p,s+m,w,C-p,s])}},_17O:function(t,e,i,n,o,r,a,s){var l=this.gv._buffer;Ah(t,e,n,!0,i,o),Oh(t,e,c,!0,c,!0,c,!1),Bh(t,e.uDiffuse,r),Ph(t,l.vs,new ss(s),e.aPosition),Ph(t,l.ns,new ss(a),e.aNormal),Th(t),Eh(t,0,12),Vh(t),Sh(t,e)}});var Cd=function(t,e){this.gv=t,this.s=function(i,n,o){return n==c&&(n=o),n==c?e.getStyle(i):Rs(n,e,t)},this.data=e};is(Cd,e,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(t,e,i,n){var o,r,a,s,l,h,u,d=this,f=d.gv,g=d.data,v=g._id,_=d.s("batch"),p=f._34O,b=f._33O,m=f.isSelectable(g),y=f.getBrightness(g),w=y!=c&&1!==y;if(d._iv){if(a=cu(p,b,g,_),d.validate(a,_?mi[_]||Ti:c),a&&(s=p[v],l=s.size=a.vs.length/3-s.begin,u=a.rs))for(y=w?y:1,h=0;l>h;h++)u.push(y);if(ln(g)){var x=f.getWireframe(g);x&&uu(f,g,x)}d.labelInfo=d.label2Info=d.noteInfo=d.note2Info=d._38o=c,d._24O(Mt,"getLabel"),d._24O(Bt,"getLabel2"),d._26O(Lt,"getNote"),d._26O(jt,"getNote2"),d._15O(),d._iv=!1}w&&Bh(t,e.uBrightness,y),r=Ah(t,e,i,m,g,"body"),r&&(fu(r,p[v],b),fu(r,f._polylineIndexMap[v],f._polylineModelMap),fu(r,f._wireframeIndexMap[v],f._wireframeModelMap)),p[v]||d._80o(t,e,n),f.isLabelVisible(g)&&((o=d.labelInfo)&&(Ah(t,e,i,m,g,Mt),d._28O(o,Mt,n)),(o=d.label2Info)&&(Ah(t,e,i,m,g,Bt),d._28O(o,Bt,n))),f.isNoteVisible(g)&&((o=d.noteInfo)&&(Ah(t,e,i,m,g,Lt),d._29O(o,Lt,n)),(o=d.note2Info)&&(Ah(t,e,i,m,g,jt),d._29O(o,jt,n))),(o=d._38o)&&d._99O(t,e,o,i,m,n),w&&Bh(t,e.uBrightness,1)},validate:function(){},_16O:function(){return ds},_80o:function(){},dispose:function(){},getBodyColor:function(t){var e=this.data,i=this.gv.getBodyColor(e);return i||(t?e.getStyle(t):c)},_24O:function(t,e){var i=this,n=i.data,o=i.gv,r=i.s,a=o[e](n);if(a!=c){var s=r(t+".scale"),l=r(t+".max"),h=i[t+"Info"]={label:a,textureScale:r(t+".texture.scale"),color:o[e+"Color"](n),font:r(t+".font"),align:r(t+".align"),background:o[e+"Background"](n)},u=h.rect=Nn(h,a);l>0&&l<u.width&&(h.labelWidth=u.width,u.width=l),u.x=u.y=0,u.width*=s,u.height*=s,h.mat=i._16O(r(t+".autorotate"),r(t+".position"),u,r(t+".face"),r(t+".t3"),r(t+".r3"),r(t+".rotationMode"));var d=u.width/2,f=u.height/2;h.vs=new ss([-d,f,0,-d,-f,0,d,-f,0,d,f,0]),u.width/=s,u.height/=s}},_26O:function(t,e){var i=this,n=i.data,o=i.gv,r=i.s,a=o[e](n);if(a!=c){var s=r(t+".scale"),l=this[t+"Info"]={note:a,textureScale:r(t+".texture.scale"),expanded:r(t+".expanded"),font:r(t+".font"),color:r(t+".color"),align:r(t+".align"),borderWidth:r(t+".border.width"),borderColor:r(t+".border.color"),background:o[e+"Background"](n)};if(l.expanded){var h=r(t+".max"),u=Nn(l,a);u.width+=6,u.height+=2,h>0&&h<u.width&&(l.labelWidth=u.width,u.width=h);var d={x:-u.width/2,y:-8-u.height,width:u.width,height:u.height+8}}else d={x:-6,y:-18,width:12,height:18};l.mat=i._16O(r(t+".autorotate"),r(t+".position"),c,r(t+".face"),r(t+".t3"),r(t+".r3"),r(t+".rotationMode")),l.rect=d,1!==s&&(d=Sa(d),d.x*=s,d.height*=s,d.y=-d.height,d.width*=s);var f=d.x,g=d.y,v=d.width,_=d.height;l.vs=new ss([f,-g,0,f,-g-_,0,f+v,-g-_,0,f+v,-g,0])}},_28O:function(t,e,i){if(i(this.s(e+".transparent"))){var n=t.rect,o=t.textureScale,r=n.width*o,a=n.height*o;if(r>=1&&a>=1){var s=Mo(r,a);1!==o&&(s.translate(s,n.x,n.y),s.scale(o,o),s.translate(s,-n.x,-n.y)),fl(s,t),s.restore(),Nh(this,e,t.mat,t.vs,!0)}}},_29O:function(t,e,i){if(i(this.s(e+".transparent"))){var n=t.rect,o=t.textureScale,r=n.x,a=n.y,s=n.width*o,l=n.height*o;if(s>=1&&l>=1){n.x=n.y=0;var c=Mo(s,l);1!==o&&c.scale(o,o),gl(c,t),c.restore(),n.x=r,n.y=a,Nh(this,e,t.mat,t.vs,!1)}}},_99O:function(t,e,i,n,o,r){if(i){var a=this,s=a.gv,l=a.data,h=s._buffer,u=s._1O,d=i.icons;for(var f in d){var g=d[f],v=i.rects[f];if(v&&r(Rs(g.transparent,l,s))){Ah(t,e,n,o,l,f);var _=Rs(g.shape3d,l,s),p=_?[_]:Rs(g.names,l,s),b=p?p.length:0,m=Rs(g.textureScale,l,s)||1,y=Rs(g.light,l,s);y==c&&(y=!!_),Oh(t,e,Rs(g.blend,l,s),y,Rs(g.opacity,l,s),Rs(g.reverseFlip,l,s),Rs(g.reverseColor,l,s),Rs(g.reverseCull,l,s));for(var w=0;b>w;w++){var x=p[w],C=v[w];if(Uh(a,C.mat),_)Xu(s,l,Zu(a.s,_),a.s);else{var I=ma(x);if(I){var O=C.width*m,S=C.height*m;if(O>=1&&S>=1){var T=Mo(O,S);wa(T,I,Rs(g.stretch,l,s),0,0,O,S,l,s),T.restore(),gh(t,ko,u),Th(t,e,u,Rs(g.discardSelectable,l,s),h.uv,Cu),Ph(t,h.vs,C.vs,e.aPosition),Ph(t,h.ns,Iu,e.aNormal),Mh(t,h.is,Ou),kh(t,0,Ou.length),Vh(t,e,u)}}}Rh(s)}Sh(t,e)}}}}});var Id=function(t,e){bn(Id,this,[t,e])};is(Id,Cd,{_16O:function(t,e,i,n,o,r,a,s,l){var c=this.data,h=Wh(e,c.s3(),i,n,s,l);return Hh(us(),h,c.p3(),n,o,r,a,t,c.r3(),c.getRotationMode())},clear:function(){var t=this;t.faceMat=t.mat=t.shapeModel=t.left=t.right=t.front=t.back=t.top=t.bottom=t.csg=c},validate:function(t,e){var i=this,n=i.gv,o=i.data,r=Zu(i.s),a=xs(o,n.getMat(o),!r||i.s("shape3d.scaleable"));if(i.clear(),t){var s=[];r?vu(n,o,r,i.s,i.getBodyColor(),[a],t,s):(mu(n,o,t,e,a,et,s,tu),mu(n,o,t,e,a,it,s,eu),mu(n,o,t,e,a,nt,s,iu),mu(n,o,t,e,a,ot,s,nu),mu(n,o,t,e,a,K,s,ou),mu(n,o,t,e,a,tt,s,ru)),s.length&&(fn(t.vs,s),fn(t.ns,fh(s)))}else i.mat=a,(i.shapeModel=r)||(i.vf(et),i.vf(it),i.vf(K),i.vf(tt),i.vf(nt),i.vf(ot))},vf:function(t){var e=this;if(e.gv.getFaceVisible(e.data,t)){var i=Qh(e,t);return i.mat&&(e.faceMat=!0),i}},_80o:function(t,e,i){var n=this,o=n.gv,r=n.data,a=o._cube,s=n.shapeModel;Fh(o,n.mat),s?Xu(o,r,s,n.s,n.getBodyColor(),i):(Ph(t,a.vs,c,e.aPosition),Ph(t,a.ns,c,e.aNormal),Mh(t,a.is),n._18O(t,e,n.left,0,i),n._18O(t,e,n.front,6,i),n._18O(t,e,n.right,12,i),n._18O(t,e,n.back,18,i),n._18O(t,e,n.top,24,i),n._18O(t,e,n.bottom,30,i)),Rh(o),n.faceMat&&(n._18O(t,e,n.left,0,i,!0),n._18O(t,e,n.front,6,i,!0),n._18O(t,e,n.right,12,i,!0),n._18O(t,e,n.back,18,i,!0),n._18O(t,e,n.top,24,i,!0),n._18O(t,e,n.bottom,30,i,!0))},_18O:function(t,e,i,n,o,r){if(i){if(!o(i.transparent))return;if(r&&!i.mat||!r&&i.mat)return;r&&Fh(this.gv,i.mat);var a=this,s=a.data,l=a.gv,h=l.getTexture(i.texture,s),u=i.uv,d=i.uvScale,f=i.uvOffset,g=i.discardSelectable;if(h)if(u){for(var v=n/6*8,_=0;8>_;_++)Du[v+_]=u[_];Th(t,e,h,g,l._buffer.uv,Du,f,d)}else Th(t,e,h,g,l._cube.uv,c,f,d);else Th(t);Oh(t,e,i.blend,i.light,i.opacity,i.reverseFlip,i.reverseColor,i.reverseCull),Bh(t,e.uDiffuse,i.color),kh(t,n,6),Sh(t,e),Vh(t,e,h),r&&Rh(l)}}});var Od=function(t,e){bn(Od,this,[t,e])};is(Od,Cd,{_25Q:1,validate:function(t){var e=this,i=e.gv,n=e.data,o=e.s,r=o("edge.width"),a=n._40I,s=n._41I;if(e.shapeModel=e.info=c,a&&s){var l,h,u,f,g,v,_,p,b,m,y=n.isLooped(),w=o(Qt),C=d.getEdgeType(w);if(C){var I=C(n,bl(e,i,n,y,w),i,e._19Q);if(!I.points||I.points.isEmpty())return;v=e.info={},_=I.segments,g=I.points,p=g.size();for(var O=a.getElevation(),S=s.getElevation(),T=0;p>T;T++){var V=g.get(T);V.e==c&&(V.e=O+(S-O)*T/(p-1))}b=Wc(g.get(0)),m=Wc(g.get(p-1));var D=p%2;0===D?(v.c1=Wc(g.get(p/2-1)),v.c2=Wc(g.get(p/2))):v.p3=Wc(g.get((p-D)/2)),v.s1=b,v.s2=Wc(g.get(1)),v.t1=Wc(g.get(p-2)),v.t2=m}else{g=new Fs,v=e.info={};var E=o("edge.offset"),k=o("edge.center"),P=o("edge.source.t3"),M=o("edge.target.t3"),B=a.p3(),L=s.p3();if(P&&(B[0]+=P[0],B[1]+=P[1],B[2]+=P[2]),M&&(L[0]+=M[0],L[1]+=M[1],L[2]+=M[2]),w===Et){_=o("edge.segments");var j=v.points=o(Nt)||As;if(p=j.size()){b=Wc(j.get(0)),m=Wc(j.get(p-1)),!k&&E&&(u=ls(b,B,!0),E=x(E,Aa(B,b)),B=[B[0]+u[0]*E,B[1]+u[1]*E,B[2]+u[2]*E],u=ls(L,m,!0),E=x(E,Aa(m,L)),L=[L[0]-u[0]*E,L[1]-u[1]*E,L[2]-u[2]*E]);var D=p%2;0===D?(l=Wc(j.get(p/2-1)),h=Wc(j.get(p/2))):v.p3=Wc(j.get((p-D)/2)),v.s1=B,v.s2=b,v.t1=m,v.t2=L}else!k&&E&&(u=ls(L,B,!0),f=Aa(B,L),E=vl(E,f),B=[B[0]+u[0]*E,B[1]+u[1]*E,B[2]+u[2]*E],L=[L[0]-u[0]*E,L[1]-u[1]*E,L[2]-u[2]*E]),l=B,h=L;g.add({x:B[0],y:B[2],e:B[1]}),g.addAll(j),g.add({x:L[0],y:L[2],e:L[1]})}else{var R=bl(e,i,n,y,w);if(e._19Q||(R=-R),y){var z=B[0],F=B[1],A=B[2],W=a.getTall()/2+R;l=[z-R,F+W,A],h=[z+R,F+W,A],g.add({x:z-R,y:A,e:F}),g.add({x:z-R,y:A,e:F+W}),g.add({x:z+R,y:A,e:F+W}),g.add({x:z+R,y:A,e:F})}else{u=ls(L,B,!0),f=Aa(B,L);var H={x:B[0],y:B[2]},U={x:L[0],y:L[2]},N=Kc(c,H,U,R),Q=N.x-H.x,G=N.y-H.y;E=vl(E,f),u[0]*=E,u[1]*=E,u[2]*=E,l=[B[0]+u[0]+Q,B[1]+u[1],B[2]+u[2]+G],h=[L[0]-u[0]+Q,L[1]-u[1],L[2]-u[2]+G],k?(g.add({x:B[0],y:B[2],e:B[1]}),g.add({x:l[0],y:l[2],e:l[1]}),g.add({x:h[0],y:h[2],e:h[1]}),g.add({x:L[0],y:L[2],e:L[1]})):(g.add({x:l[0],y:l[2],e:l[1]}),g.add({x:h[0],y:h[2],e:h[1]}))}}v.c1=l,v.c2=h}v.list=o(Ve)===pt?e.createTubeModel(g,_,r/2,t):e.createLineModel(g,_,r,"edge","edge.dash")}}});var Sd=function(t,e){bn(Sd,this,[t,e])};is(Sd,Id,{_80o:function(t,e,i){var n=this,o=n.gv,r=n.shapeModel;Fh(o,n.mat),r?Xu(o,n.data,r,n.s,n.getBodyColor(),i):(Gh(n,t,e,n.left,i),Gh(n,t,e,n.front,i),Gh(n,t,e,n.right,i),Gh(n,t,e,n.back,i),Gh(n,t,e,n.top,i),Gh(n,t,e,n.bottom,i)),Rh(o)},validate:function(t,e){var i,n,o=this,r=o.s,a=o.data,s=a.p3(),l=a._thickness/2,h=a.isClosePath(),u=a.getPoints(),d=a.getSegments(),f=r(De),g=t&&t.uv;if(o.clear(),0>l)n=o.shapeModel=Sl(u,d,r(Me),r(Be),f,r(Le),a.getTall(),a.getElevation(),h),r(Ee)?r("shape3d.image")||delete n.uv:(delete n.vs,delete n.ns,delete n.uv),r("shape3d.top.image")||delete n.top_uv,r("shape3d.bottom.image")||delete n.bottom_uv;else if(r(Ve)===pt)i=Ho(u,d,f,h),n=o.shapeModel={vs:[]},r("shape3d.image")&&(n.uv=[],n.sum=r(Le)||kn(i)||1,n.len=0),r(Me)&&!h&&(n.top_vs=[],r("shape3d.top.image")&&(n.top_uv=[])),r(Be)&&!h&&(n.bottom_vs=[],r("shape3d.bottom.image")&&(n.bottom_uv=[])),o._12O(i,l);else{var v,_,p,b,m,y,w,x,C,I;i=Ho(u,d,f,h),m=o.vf(K,g,!1,e),l&&(y=o.vf(tt,g,!1,e),w=h?c:o.vf(et,g,!1,e),x=h?c:o.vf(it,g,!1,e),C=o.vf(nt,g,!1,e),I=o.vf(ot,g,!1,e)),l?o._12O(i,l):m&&i.forEach(function(t){if((b=t.length)>0)for(v=t[0],p=1;b>p;p++)_=t[p],o.addV(m.vs,v,_),v=_}),o._20Q(i),t||(m&&(m.ns=fh(m.vs),$u(m,"vs"),$u(m,Jt)),l&&(y&&(y.ns=fh(y.vs),$u(y,"vs"),$u(y,Jt)),w&&(w.ns=fh(w.vs),$u(w,"vs"),$u(w,Jt)),x&&(x.ns=fh(x.vs),$u(x,"vs"),$u(x,Jt)),C&&(C.ns=fh(C.vs),$u(C,"vs"),$u(C,Jt)),I&&(I.ns=fh(I.vs),$u(I,"vs"),$u(I,Jt))))}var O=o.mat=us();ih(O,s),dc(O,a.r3(),a.getRotationMode()),ih(O,cs(s)),t&&(pu(o,O,t,n),o.clear())},_20Q:function(t){var e,i,n,o,r,a,s,l=this,h=l.front,u=l.back,d=l.top,f=l.bottom,g=h?h.tuv:c,v=u?u.tuv:c,_=d?d.tuv:c,p=f?f.tuv:c,b=0;(g||v||_||p)&&(e=l.s(Le)||kn(t)||1,t.forEach(function(t){if((i=t.length)>0)for(a=t[0],n=1;i>n;n++)s=t[n],o=b/e,b+=Aa(a,s),r=b/e,l._14O(h,o,r),l._14O(u,1-r,1-o),l._14O(d,o,r),l._14O(f,o,r),a=s}))},_14O:function(t,e,i){if(t){var n=t.uv,o=t.tuv;if(o){if(n)var r=n[0]+(n[6]-n[0])*e,a=n[1]+(n[7]-n[1])*e,s=n[2]+(n[4]-n[2])*e,l=n[3]+(n[5]-n[3])*e,c=n[2]+(n[4]-n[2])*i,h=n[3]+(n[5]-n[3])*i,u=n[0]+(n[6]-n[0])*i,d=n[1]+(n[7]-n[1])*i;else r=e,a=0,s=e,l=1,c=i,h=1,u=i,d=0;o.push(s,l,c,h,u,d,u,d,r,a,s,l)}}},_13O:function(t){var e=t.uv,i=t.tuv;i&&(e?i.push(e[2],e[3],e[4],e[5],e[6],e[7],e[6],e[7],e[0],e[1],e[2],e[3]):i.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(t,e){var i,n,o,r,a,s=this;t.forEach(function(t){if((a=t.length)>0)for(i={p:t[0],n:!0},r=1;a>r;r++)n=t[r],o=a-1>r?t[r+1]:c,s.addPoint(i,n,o,e,t)})},addPoint:function(t,e,i,n,o){var r,a,s,l,h,u,d,f,g,v=this,_=t.p,p=t.f,b=t.b,m=v.s("shape3d.side")||es,y=v.s("shape3d.start.angle"),w=v.shapeModel,x=v.data.isClosePath();if(t.n&&(t.n=!1,p=x&&o.length>2?Kc(o[o.length-2],_,e,n):Kc(c,_,e,n),b=$c(_,p),w?w.top_vs&&v._10O(b,p,m,y,w.top_vs,w.top_uv):(r=v.left)&&(v.addV(r.vs,b,p),v._13O(r))),a=i?Kc(_,e,i,n):x&&o.length>2?Kc(_,e,o[1],n):Kc(_,e,c,n),s=$c(e,a),w){var C,I,O=w.vs,S=w.uv,T=w.sum;for(S&&(C=w.len/T,w.len+=Aa(_,e),I=w.len/T),u=v._9O(b,p,m,y),d=v._9O(s,a,m,y),f=0;m>f;f++)g=f+1,fn(O,u[g]),fn(O,d[f]),fn(O,u[f]),fn(O,d[f]),fn(O,u[g]),fn(O,d[g]),S&&(l=f/m,h=g/m,S.push(C,h,I,l,C,l,I,l,C,h,I,h));!i&&w.bottom_vs&&v._10O(s,a,m,y,w.bottom_vs,w.bottom_uv,!0)}else!i&&(r=v.right)&&(v.addV(r.vs,a,s),v._13O(r)),(r=v.front)&&v.addV(r.vs,p,a),(r=v.back)&&v.addV(r.vs,s,b),(r=v.top)&&v.addH(r.vs,p,a,s,b,!0),(r=v.bottom)&&v.addH(r.vs,b,s,a,p);t.p=e,t.f=a,t.b=s},_10O:function(t,e,i,n,o,r,a){var s,l,c=this,h=c.data,u=c._9O(t,e,i,n),d=(t.x+e.x)/2,f=(t.y+e.y)/2,g=h.getElevation(),v=0;for(v=0;i>v;v++)a?(fn(o,u[v]),fn(o,u[v+1])):(fn(o,u[v+1]),fn(o,u[v])),fn(o,[d,g,f]),r&&(a?(s=E*(v+1)/i+n,l=E*v/i+n):(s=E*v/i+n,l=E*(v+1)/i+n),r.push(.5-.5*I(l),.5-.5*S(l),.5-.5*I(s),.5-.5*S(s),.5,.5))},_9O:function(t,e,i,n){for(var o,r,a=this,s=a.data,l=[],c=(t.x+e.x)/2,h=(t.y+e.y)/2,u=s.getTall()/2,d=s.getElevation(),f=0;i>=f;f++)o=E*f/i+n,r=I(o),l.push([c+(t.x-c)*r,d+u*S(o),h+(t.y-h)*r]);return l},addV:function(t,e,i){var n=e.x,o=e.y,r=i.x,a=i.y,s=this.data,l=s.getElevation(),c=s.getTall()/2;t.push(n,l-c,o,r,l-c,a,r,l+c,a,r,l+c,a,n,l+c,o,n,l-c,o)},addH:function(t,e,i,n,o,r){var a=this.data,s=a.getTall()/2,l=a.getElevation()+(r?s:-s);t.push(e.x,l,e.y,i.x,l,i.y,n.x,l,n.y,n.x,l,n.y,o.x,l,o.y,e.x,l,e.y)},vf:function(t,e,i,n){var o,r=this,a=r.gv.getFaceVisible(r.data,t);return(i||a)&&(o=Qh(r,t,n),o.vs=[],o.tuv=a&&(o.texture||e)?[]:c,o.visible=a),o}});var Td=function(t,e){bn(Td,this,[t,e])};is(Td,Cd,{_25Q:1,validate:function(t){var e=this,i=e.data,n=e.s,o=i.getPoints(),r=o.size();if(e.shapeModel=e.info=c,r>1){
var a=e.info={},s=i.getSegments(),l=i.getThickness(),h=Wc(o.get(0)),u=Wc(o.get(r-1)),d=r%2;0===d?(a.c1=Wc(o.get(r/2-1)),a.c2=Wc(o.get(r/2))):a.p3=Wc(o.get((r-d)/2)),a.s1=h,a.s2=Wc(o.get(1)),a.t1=Wc(o.get(r-2)),a.t2=u,a.list=n(Ve)===pt?e.createTubeModel(o,s,l/2,t):e.createLineModel(o,s,l,"shape.border","shape.dash")}}}),vn(d,{accordionViewExpandIcon:Qi(mr),accordionViewCollapseIcon:Qi(mr,!0),accordionViewLabelColor:ta,accordionViewLabelFont:ea,accordionViewTitleBackground:br,accordionViewSelectBackground:Dr,accordionViewSelectWidth:3,accordionViewSeparatorColor:i,splitViewDividerSize:1,splitViewDividerBackground:br,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:gt,rect:[2,2,12,12],background:mr}]},propertyViewLabelColor:Kr,propertyViewLabelSelectColor:ta,propertyViewLabelFont:ea,propertyViewExpandIcon:Qi(wr),propertyViewCollapseIcon:Qi(wr,!0),propertyViewBackground:yr,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Or,propertyViewColumnLineColor:Or,propertyViewSelectBackground:Dr,listViewLabelColor:Kr,listViewLabelSelectColor:ta,listViewLabelFont:ea,listViewRowLineVisible:!1,listViewRowLineColor:Or,listViewSelectBackground:Dr,treeViewLabelColor:Kr,treeViewLabelSelectColor:ta,treeViewLabelFont:ea,treeViewExpandIcon:Qi(Ir),treeViewCollapseIcon:Qi(Ir,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Or,treeViewSelectBackground:Dr,tableViewLabelColor:Kr,tableViewLabelSelectColor:ta,tableViewLabelFont:ea,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Or,tableViewColumnLineColor:Or,tableViewSelectBackground:Dr,treeTableViewLabelColor:Kr,treeTableViewLabelSelectColor:ta,treeTableViewLabelFont:ea,treeTableViewExpandIcon:Qi(Ir),treeTableViewCollapseIcon:Qi(Ir,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Or,treeTableViewColumnLineColor:Or,treeTableViewSelectBackground:Dr,tableHeaderLabelColor:Kr,tableHeaderLabelFont:ea,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:Cr,tableHeaderBackground:yr,tableHeaderMoveBackground:vr,tableHeaderInsertColor:Dr,tableHeaderSortDescIcon:Gi(wr,!0),tableHeaderSortAscIcon:Gi(wr),tabViewTabGap:1,tabViewLabelColor:ta,tabViewLabelFont:ea,tabViewTabBackground:br,tabViewSelectWidth:3,tabViewSelectBackground:Dr,tabViewMoveBackground:vr,tabViewInsertColor:Dr,toolbarLabelColor:Kr,toolbarLabelSelectColor:ta,toolbarLabelFont:ea,toolbarBackground:yr,toolbarSelectBackground:Dr,toolbarItemGap:8,toolbarSeparatorColor:xr},!0);var Vd={translateX:1,sortColumn:1},Dd={sortable:1,sortOrder:1,sortFunc:1},Ed={focusData:1},kd={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Pd={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Md=function(t,e){e.add(t),t.hasChildren()&&t.eachChild(function(t){Md(t,e)})},Bd=function(t,e,i,n,o,r,a,s,l,h,u){var f,g=i.getValueType(),v=i.getAlign();if(i.getEnumValues()){var _=i.toEnumLabel(e),p=ia||0,b=0,m=r,y=d.getTextSize(n,_).width;return f=ma(i.toEnumIcon(e)),f&&(b=r+ia/2,"center"===v?b+=(s-(p+y))/2:"right"===v&&(b=b+s-(p+y)),ya(t,f,b,a+l/2),m=b+ia/2),void(_!=c&&(f?ka(t,_,n,o,m,a,s-(m-r),l):ka(t,_,n,o,r,a,s,l,v)))}return e=i.formatValue(e),e!=c?g===He?void Qo(t,r,a,s,l,e):g===We||!g&&en(e)?(f=ma(e?St:Tt),void ya(t,f,r+s/2,a+l/2,h,u)):void ka(t,e,n,o,r,a,s,l,v):void 0},Ld=function(t,e){var i=e.view,n=i.getDataModel().getHistoryManager(),o=eo(t),r=e.column||e.property;n&&n.beginInteraction(),e.editor=t,t.info=e,i.setCurrentEditor(t),i.getView().insertBefore(o,i._79O),io(t,e.editorRect),t.setFocus?t.setFocus():to(t),t.commitValue=function(){t._17Q&&(t=t._17Q),i.setValue(e.data,r,t.getValue?t.getValue():t.value),t.close&&t.close(),Ja(o)},r.onEditorCreated&&r.onEditorCreated(e)},jd=function(t,e,i,n,o){var r=$a(t,i),a=e.value,s=e.view,h=o.getValueType();return r.onblur=r.onchange=function(){s.endEditing()},"input"===t?(a=o.formatValue(a),a!=c&&(r.value=a),r.onkeydown=function(t){To(t)&&s.endEditing()},(h===Ue||h===Ne)&&r.addEventListener(ii,d.numberListener,!1)):t===Kt&&n.forEach(function(t){var e=l.createElement("option");e.innerHTML=o.toEnumLabel(t),e.value=t,o.isEnumEqual(a,t)&&(e.selected=!0),Un(r,e)}),Ld(r,e),r},Rd=h.widget={},zd=function(t,e,i){is("ht.widget."+t,e,i)};vn(Wr,{ms_value:function(t){t.getValue=function(t){var e=this.getItemById(t),i=e.element;return i?i.getValue?i.getValue():i.value:e.selected},t.setValue=function(t,e){var i=this.getItemById(t),n=i.element;n?n.setValue?n.setValue(e):n.value=e:(i.selected=e,this.iv())},t.v=function(t,e){var i=this;if(2===arguments.length)i.setValue(t,e);else{if(!nn(t))return i.getValue(t);for(var n in t)i.setValue(n,t[n])}return i}},_46o:function(t){t._icon=c,t._accessType=c,t._valueType=c,t._editable=!1,t._batchEditable=!0,t._align=et,t._nullable=!0,t._emptiable=!1,t.setParent=ki,t.formatValue=function(t){var e=this,i=e._valueType;if(e.getEnumValues())return e.toEnumLabel(t);if(i===We)return!!t;if(t!=c){if(i===Ue)return p(t);if(tn(t))return dn(t)}return t},t.setEnum=function(t,e,i,n,o,r){var a=this;t&&!rn(t)&&t.values&&(n=t.editable,i=t.icons,e=t.labels,o=t.strict,r=t.maxHeight,t=t.values),an(t)&&(t=t._as),an(e)&&(e=e._as),an(i)&&(i=i._as),a._enumValues=t,a._enumLabels=e,a._enumIcons=i,a._enumEditable=n,a._enumStrict=o==c||o,a._enumMaxHeight=r,t&&t.length&&tn(t[0])&&(a._valueType=Ne),a.fp("enum",!1,!0)},t.getEnumMaxHeight=function(){return this._enumMaxHeight},t.isEnumEditable=function(){return this._enumEditable},t.getEnumValues=function(){return this._enumValues},t.getEnumLabels=function(){return this._enumLabels},t.getEnumIcons=function(){return this._enumIcons},t.isEnumStrict=function(){return this._enumStrict},t.isEnumEqual=function(t,e){return this._enumStrict?t===e:t==e},t.toEnumLabel=function(t){var e=this,i=e._enumValues,n=e._enumLabels;if(i&&n)for(var o=0;o<i.length;o++)if(e.isEnumEqual(t,i[o]))return n[o];return t},t.toEnumIcon=function(t){var e=this,n=e._enumValues,o=e._enumIcons;if(n&&o)for(var r=0;r<n.length;r++)if(e.isEnumEqual(t,n[r]))return o[r];return i}},_45o:function(t){t._87o=function(t,e,i,n,o,r){if(t){var a=this,s=a._90I,l=zn(1);a._columnLineVisible&&(o-=1),a._rowLineVisible&&(r-=1),0>=o||0>=r||(a._90I||(s=a._90I={}),s[e]||(s[e]=new Fs),io(l,a.tx()+i,a.ty()+n,o,r),Un(l,t),a._view.insertBefore(l,a._79O),t.onParentAdded&&t.onParentAdded(l),s[e].add(l))}},t._76o=function(){var t=this,e=t._90I;if(e){for(var i in e)e[i].each(function(t){Ja(t)});delete t._90I}},t._77o=function(t){var e=this;if(e._90I){var i=e._90I[t];i&&(i.each(function(t){Ja(t)}),delete e._90I[t])}}},_47o:function(t){t.getValue=function(t,e){return e.getValue?e.getValue(t,e,this):Sn(t,e.getAccessType(),e.getName())},t.setValue=function(t,e,n){if(e.isEmptiable()||""!==n||(n=i),e.isNullable()||n!=c){var o=this,r=e.getName(),a=e.getAccessType(),s=e.getValueType();s===Ue&&Ki(n)?n=j(n):s===Ne&&Ki(n)?n=parseFloat(n):s===We&&Ki(n)&&(n="true"===n),o._batchEditable&&e._batchEditable&&o.isSelected(t)?o.sm().each(function(t){e.setValue?e.setValue(t,e,n,o):Tn(t,a,r,n)}):e.setValue?e.setValue(t,e,n,o):Tn(t,a,r,n)}},t.setCurrentEditor=function(t){this.endEditing(),this._currentEditor=t,this.redraw()},t.isEditing=function(t,e){var i=this,n=i._currentEditor;if(!n)return!1;if(e){var o=n.info;return!!o&&((o.column||o.property)===e&&o.data===t)}return!0},t.endEditing=function(){var t=this,e=t._currentEditor,i=t.getDataModel().getHistoryManager();e&&(delete t._currentEditor,e.commitValue&&e.commitValue(e.info),t.redraw(),i&&i.endInteraction())},t.beginEditing=function(t){this.endEditing();var e=this,i=t.column||t.property;if(i.beginEditing)i.beginEditing(t);else{var n=t.data,o=t.value,r=e.getSelectBackground(n),a=i.getEnumValues(),s=i.getSlider(),l=i.getColorPicker();if(s){var h=_a(Rd.Slider,s);return h.setValue(o),h.getView().onblur=function(){e.endEditing()},h.isInstant()&&(h.onValueChanged=function(){e.setValue(n,i,h.getValue())}),void Ld(h,t)}if(l||i.getValueType()===He){var u=_a(Rd.ColorPicker,l);return u.setValue(o),u.onClosed=function(){e.endEditing()},u.isInstant()&&(u.onValueChanged=function(t,o){e.setValue(n,i,o)}),Ld(u,t),void u.open()}if(a){if(Rd.ComboBox){var d=new Rd.ComboBox;d.setValue(o),d.setValues(a),d.setLabels(i.getEnumLabels()),d.setIcons(i.getEnumIcons()),d.setEditable(i.isEnumEditable()),d.setStrict(i.isEnumStrict()),d.setMaxHeight(i.getEnumMaxHeight()),d.onClosed=function(){e.endEditing()},Ld(d,t),d.open()}else jd(Kt,t,r,a,i);return}if(i.getValueType()===We||en(o))return void e.setValue(n,i,!o);if(i.getItemEditor()){var f=Ta(i.getItemEditor()),g=new f(n,i,e,t),v=g.getView();return v._17Q=g,g.setValue(o),Wn(v),Ld(v,t),void(g.editBeginning&&g.editBeginning())}jd("input",t,r,c,i)}}},_44o:function(t){t.init=function(t){var e=this,i=e.th=new Kd(t),n=e._view=Rn(1,e);e.tv=e._tableView=t,Un(n,i.getView()),Un(n,t.getView()),i.mp(function(t){t.property===It&&e.iv()}),e.iv()},t.getTableView=function(){return this.tv},t.getTableHeader=function(){return this.th},t.getDataModel=function(){return this.tv.dm()},t.getColumnModel=function(){return this.tv.getColumnModel()},t.setColumns=function(t){this.tv.setColumns(t)},t.addColumns=function(t){this.tv.addColumns(t)},t.endEditing=function(){this.tv.endEditing()},t.validateImpl=function(){var t=this,e=t.th,i=Yn(e),n={x:0,y:0,width:t.getWidth(),height:i};io(e,n),n.y=i,n.height=w(0,t.getHeight()-i),io(t.tv,n)}},ms_vs:function(t){t._41o=function(){return this._29I.height<this._59I},t._43o=function(){var t=this;t._41o()&&(t._58I||(A(function(){t._94O()},la),t.iv()),t._58I=new Date)},t._94O=function(){var t=this;if(t._58I){(new Date).getTime()-t._58I.getTime()>=la?(delete t._58I,t.iv()):A(function(){t._94O()},la)}},t._93I=function(){var t=this,e=t._27I;if(t._58I||!t._autoHideScrollBar){e||Un(t._79O,e=t._27I=zn());var i=t._29I,n=i.height,o=t._59I,r=t.getScrollBarSize(),a=i.width-r-2,s=n*(-t.ty()/o),l=n*(n/o),c=e.style;o>n?(ca>l&&(s=s+l/2-ca/2,0>s&&(s=0),s+ca>n&&(s=n-ca),l=ca),c.visibility=Zt,c.background=t.getScrollBarColor(),c.borderRadius=r/2+ut,io(e,a,s,r,l)):c.visibility=qt}else e&&(e.style.visibility=qt)}},ms_hs:function(t){t._40o=function(){return this._29I.width<this._91I},t._42o=function(){var t=this;t._40o()&&(t._95O||(A(function(){t._94I()},la),t.iv()),t._95O=new Date)},t._94I=function(){var t=this;if(t._95O){(new Date).getTime()-t._95O.getTime()>=la?(delete t._95O,t.iv()):A(function(){t._94I()},la)}},t._92I=function(){var t=this,e=t._28I;if(t._95O||!t._autoHideScrollBar){e||Un(t._79O,e=t._28I=zn());var i=t._29I,n=i.width,o=t._91I,r=t.getScrollBarSize(),a=i.height-r-2,s=n*(-t.tx()/o),l=n*(n/o),c=e.style;o>n?(ca>l&&(s=s+l/2-ca/2,0>s&&(s=0),s+ca>n&&(s=n-ca),l=ca),c.visibility=Zt,c.background=t.getScrollBarColor(),c.borderRadius=r/2+ut,io(e,s,a,l,r)):c.visibility=qt}else e&&(e.style.visibility=qt)}}}),ba(St,Ui(16,16,[{type:vt,rect:[1,1,14,14],background:Dr},{type:ft,rect:[1,1,14,14],width:1,color:Sr},{type:bt,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),ba(Tt,Ui(16,16,{type:ft,rect:[1,1,14,14],width:1,color:Sr})),ba(Vt,Ui(16,16,[{type:_t,rect:[2,2,12,12],borderWidth:1,borderColor:Sr,background:"#FFF"},{type:_t,rect:[4,4,8,8],background:Dr}])),ba(Dt,Ui(16,16,{type:_t,rect:[2,2,12,12],borderWidth:1,borderColor:Sr})),Wr._15Q=function(t){t._29I=Bi,t._59I=0,t._91I=0,t._5o=function(t){var e=this;e._30I=new Fs,e._rows=new Fs,e._rowMap={},e._31I=0,e._14I=0,e._view=Rn(1,e),e._canvas=Fn(e._view),Un(e._view,e._79O=zn()),e.dm(t||new Us)},t.getCheckIcon=function(t){var e=this.sm(),i=e.co(t);return ma(e.sg()?i?Vt:Dt:i?St:Tt)},t.checkData=function(t){var e=this.sm(),i=e.co(t);e.sg()&&i||(this._32o=1,i?e.rs(t):e.as(t),delete this._32o)},t.getDataAt=function(t){t.target&&(t=this.lp(t));var e=b(t.y/this._rowHeight),i=this._rows;return 0>e||e>=i.size()?c:i.get(e)},t.onDataDoubleClicked=function(){},t.onDataClicked=function(){},t.adjustTranslateX=function(){return 0},t.adjustTranslateY=function(t){var e=this.getHeight()-this._59I;return e>t&&(t=e),t>0?0:p(t)},t.onPropertyChanged=function(t){var e=this,i=t.property;kd[i]?e.ivm():Ed[i]||e.redraw(),i===Oe?e._42o():i===Se&&e._43o()},t.getLabel=function(t){return t.toLabel()},t.getLabelFont=function(){return this._labelFont},t.getLabelColor=function(t){var e=this;if(e.isCheckMode()){if(e._focusData===t)return e._labelSelectColor}else if(e.isSelected(t))return e._labelSelectColor;return e._labelColor},t.getStartRowIndex=function(){return this._31I},t.getEndRowIndex=function(){return this._14I},t.getRowDatas=function(){return this._rows},t.getRowIndex=function(t){return this._rowMap[t._id]},t.getRowSize=function(){return this._rows.size()},t.getViewRect=function(){return Sa(this._29I)},t.isVisible=function(t){return!this._visibleFunc||this._visibleFunc(t)},t.getCurrentSortFunc=function(){return this._sortFunc},t.setDataModel=function(t){var e=this,i=e._dataModel,n=e._3o;i!==t&&(i&&(i.umm(e.handleDataModelChange,e),i.umd(e.handleDataPropertyChange,e),i.umh(e._15o,e),n||i.sm().ums(e._16o,e)),e._dataModel=t,t.mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),t.mh(e._15o,e),n?n._21I(t):t.sm().ms(e._16o,e),e.fp("dataModel",i,t))},t.validateModel=function(){var t=this;t._rows.clear(),t._rowMap={},t.buildChildren(t._dataModel._roots);var e=t._rows=t._rows.toList(t.isVisible,t),i=0,n=t.getCurrentSortFunc(),o=e.size();for(n&&e.sort(n);o>i;i++)t._rowMap[e.get(i)._id]=i},t.buildChildren=function(t){var e=this;t.each(function(t){e._rows.add(t),e.buildChildren(t._children)})},t.handleDataModelChange=function(){this.ivm()},t.handleDataPropertyChange=function(t){"parent"===t.property?this.ivm():this.invalidateData(t.data)},t._15o=function(){this.ivm()},t._16o=function(t){t.datas.each(this.invalidateData,this),this.onSelectionChanged(t)},t.onSelectionChanged=function(t){var e=this,i=e.sm();!e.isAutoMakeVisible()||1!==i.size()||"set"!==t.kind&&"append"!==t.kind||e._32o||e.makeVisible(i.ld())},t.makeVisible=function(t){t&&(this._23I=t,this.iv())},t.scrollToIndex=function(t){var e=this,i=e._29I,n=i.height,o=e._rowHeight,r=o*t;t>=0&&t<e._rows.size()&&n>0&&(r+o>i.y+n?e.ty(-r+n-o):r<i.y&&e.ty(-r))},t.ivm=function(){this.invalidateModel()},t.invalidateModel=function(){var t=this;t._96I||(t._96I=1,t._32I=1,delete t._24I,t.iv())},t.redraw=function(){var t=this;t._32I||(t._32I=1,delete t._24I,t.iv())},t.invalidateData=function(t){var e=this;G?e.redraw():e._32I||(e._24I||(e._24I={}),e._24I[t._id]=t,e.iv())},t.getFocusData=function(){return this._focusData},t.setFocusDataById=function(t){this.setFocusData(this.dm().getDataById(t))},t.setFocusData=function(t){var e=this,i=e._focusData;i!==t&&(e._focusData=t,e.fp("focusData",i,t),i&&e.invalidateData(i),t&&(e.invalidateData(t),e.isAutoMakeVisible()&&e.makeVisible(t)))},t.drawRowBackground=function(t,e,i,n,o,r,a){var s=this,l=s.isCheckMode();(e===s._focusData&&l||i&&!l)&&Qo(t,n,o,r,a,s.getSelectBackground(e))},t.drawData=function(t,e,i){var n=this,o=n._rowHeight,r=o*i,a=n._29I,s=a.x,l=a.width;t.save(),t.beginPath(),t.rect(s,r,l,o),t.clip(),n._87o(n.drawRow(t,e,n.isSelected(e),s,r,l,o),i,s,r,l,o),t.restore(),n._rowLineVisible&&Qo(t,s,r+o-1,l,1,n._rowLineColor)},t._12I=function(t){var e=this,i=e._31I,n=e._29I,o=n.x,r=n.y,a=n.width,s=n.height;for(t.beginPath(),t.rect(o,r,a,s),t.clip(),t.clearRect(o,r,a,s),e._76o(),e._93db(t);i<e._14I;i++)e.drawData(t,e._rows.get(i),i);e._92db(t)},t._13I=function(t){for(var e,i=this,n=i._rowHeight,o=i._29I,r=o.x,a=o.width,s=i._31I,l=i._30I;s<i._14I;s++)e=i._rows.get(s),i._24I[e._id]&&l.add({data:e,index:s});l.isEmpty()||(t.beginPath(),l.each(function(e){t.rect(r,e.index*n,a,n)}),t.clip(),l.each(function(e){t.clearRect(r,e.index*n,a,n)}),l.each(function(t){i._77o(t.index)}),i._93db(t),l.each(function(e){i.drawData(t,e.data,e.index)}),i._92db(t),l.clear())},t.validateImpl=function(){var t=this,e=t._canvas,i=t.getWidth(),n=t.getHeight(),o=t._rowHeight,r=t._32I;(i!==e.clientWidth||n!==e.clientHeight)&&(Hn(e,i,n),r=1);var a=!L;t._96I&&!a&&t.validateModel();var s=t._29I,l={x:-t.tx(),y:-t.ty(),width:i,height:n},h=t._rows.size(),u=Zn(e),d=t._23I;r||wn(l,s)||(r=1),t._29I=l,t._59I=h*o,t._31I=b(l.y/o),t._14I=m((l.y+l.height)/o),t._31I<0&&(t._31I=0),t._14I>h&&(t._14I=h),t._99I&&r&&t._99I(),Jn(u,t.tx(),t.ty(),1),r?t._12I(u):t._24I&&t._13I(u),t._93I(),t._92I(),u.restore(),t._32I=t._24I=t._96I=c,d&&(t.scrollToIndex(t.getRowIndex(d)),delete t._23I),t.tx(t.tx()),t.ty(t.ty())}},Wr._48o=function(t){t._rootVisible=!0,t._rootData=c,t._35o=function(){this._expandMap={},this._levelMap={}},t.validateModel=function(){var t=this,e=t._rootData;t._rows.clear(),t._levelMap={},t._rowMap={},t._currentLevel=0,e?t._rootVisible?t.isVisible(e)&&t.buildData(e):t.buildChildren(e):t.buildChildren(),delete t._currentLevel},t.buildData=function(t){var e=this,i=t._id,n=e._rows;e._rowMap[i]=n.size(),n.add(t),e._levelMap[i]=e._currentLevel,e.isExpanded(t)&&(e._currentLevel++,e.buildChildren(t),e._currentLevel--)},t.buildChildren=function(t){var e=this,i=t?t._children:e._dataModel._roots,n=e.getCurrentSortFunc();n&&e.isChildrenSortable(t)?i.toList(e.isVisible,e).sort(n).each(e.buildData,e):i.each(function(t){e.isVisible(t)&&e.buildData(t)})},t.getLevel=function(t){return this._levelMap[t._id]},t.getToggleIcon=function(t){var e=this,i=e._loader,n=e._collapseIcon;return i&&!i.isLoaded(t)?n:t.hasChildren()?e.isExpanded(t)?e._expandIcon:n:c},t.isCheckMode=function(){return this._checkMode!=c},t.isChildrenSortable=function(){return!0},t.handleDataModelChange=function(t){var e=this;t.kind===wt?delete e._expandMap[t.data._id]:t.kind===xt&&(e._expandMap={}),e.ivm()},t.toggle=function(t){var e=this;e.isExpanded(t)?e.collapse(t):e.expand(t)},t.isExpanded=function(t){return 1===this._expandMap[t._id]},t.expand=function(t){var e=this,i=e._loader;e.isExpanded(t)||(i&&!i.isLoaded(t)&&i.load(t),e._expandMap[t._id]=1,e.ivm(),e.onExpanded(t))},t.onExpanded=function(){},t.collapse=function(t){var e=this;e.isExpanded(t)&&(delete e._expandMap[t._id],e.ivm(),e.onCollapsed(t))},t.onCollapsed=function(){},t.expandAll=function(){var t=this;t._dataModel.each(function(e){e.hasChildren()&&(t._expandMap[e._id]=1)}),t.ivm()},t.collapseAll=function(){this._expandMap={},this.ivm()},t.makeVisible=function(t){if(t){var e=this;if(!e._rootData||t.isDescendantOf(e._rootData)){for(var i=t._parent;i;)e.expand(i),i=i._parent;e._23I=t,e.iv()}}},t.checkData=function(t){var e,i=this,n=i._checkMode,o=i.sm(),r=o.co(t);if(!o.sg()||!r){if(i._32o=1,n===Z)r?o.rs(t):o.as(t);else if(n===Ie)e=new Fs(t),e.addAll(t._children);else if("descendant"===n)e=new Fs,Md(t,e);else if("all"===n&&(e=new Fs,Md(t,e),!r))for(var a=t._parent;a;)e.add(a),a=a._parent;e&&(r?o.rs(e):o.as(e)),delete i._32o}},t._97I=function(t,e,i,n,o,r,a){var s=this,l=s._indent,c=s._levelMap[e._id],h=s.getIconWidth(e),u=ma(s.getToggleIcon(e));u?(n+=l*c,ya(t,u,n+l/2,o+a/2,e,s),n+=l):n+=l*(c+1),s._checkMode&&(ya(t,s.getCheckIcon(e),n+l/2,o+a/2,e,s),n+=l),s.drawIcon(t,e,n,o,h,a),s.drawLabel(t,e,n+h,o,a)}},Wr._14Q=function(t){t.getIcon=function(t){return t.getIcon()},t.getIconWidth=function(t){return this.getIcon(t)?this._indent:0},t.drawIcon=function(t,e,i,n,o,r){if(o){var a=this,s=a.getBodyColor(e),l=ma(a.getIcon(e),s);l&&(r-=a.isRowLineVisible()?1:0,wa(t,l,ze,i,n,o,r,e,a,s),Jo(t,a.getBorderColor(e),i,n,o,r))}},t.drawLabel=function(t,e,i,n,o){var r=this;ka(t,r.getLabel(e),r.getLabelFont(e),r.getLabelColor(e),i,n,0,o)}},Wr._50o=function(t){t._98I=function(){var t=this,e=t._39o=new Us;t._60I=new Fs,e.mm(t._17o,t),e.md(t._18o,t),e.mh(t._19o,t)},t.setColumns=function(t){this._39o.clear(),this.addColumns(t)},t.addColumns=function(t){var e=this._39o;t.forEach(function(t){if(!(t instanceof Ad)){var i=Ta(t.className);t=_a(i||Ad,t)}e.add(t)})},t.onColumnClicked=function(){},t.onCheckColumnClicked=function(){},t._3Q=function(t){for(var e,i=0,n=this._60I,o=n.size();o>i;i++)if(e=n.get(i),e.column===t)return e;return c},t.getColumnAt=function(t){var e=this._4Q(t);return e?e.column:c},t._4Q=function(t){for(var e=this,i=t.target?e.lp(t).x:t.x,n=e._60I,o=0;o<n.size();o++){var r=n.get(o),a=r.startX;if(i>=a&&i<a+r.column.getWidth())return r}return c},t.getToolTip=function(t){var e=this,i=e.getDataAt(t),n=e.getColumnAt(t);return i&&n?n.getToolTip(i,e):c},t.adjustTranslateX=function(t){var e=this.getWidth()-this._91I;return e>t&&(t=e),t>0?0:p(t)},t._99I=function(){var t=this,e=t._29I,i=t._60I;i.clear(),t._91I=0,t._39o._roots.each(function(n){if(n.isVisible()){var o=t._91I+n.getWidth();t._91I<=e.x+e.width&&o>=e.x&&i.add({column:n,startX:t._91I}),t._91I=o}})},t.drawData=function(t,e,i){var n=this,o=n._rowHeight,r=o*i,a=n.isSelected(e),s=n._29I,l=s.x,c=s.width;n.drawRowBackground(t,e,a,l,r,c,o),n._60I.each(function(s){var l=s.column,c=s.startX,h=l.getWidth();h>0&&!n.isEditing(e,l)&&(t.save(),t.beginPath(),t.rect(c,r,h,o),t.clip(),n._87o(n.drawCell(t,e,a,l,c,r,h,o),i,c,r,h,o),n._columnLineVisible&&Qo(t,c+h-1,r,1,o,n._columnLineColor),t.restore())}),n._rowLineVisible&&Qo(t,l,r+o-1,c,1,n._rowLineColor)},t.drawCell=function(t,e,i,n,o,r,a,s){var l=this;if(n.drawCell)return n.drawCell(t,e,i,n,o,r,a,s,l);var c=l.getValue(e,n);Bd(t,c,n,l.getLabelFont(e,n,c),l.getLabelColor(e,n,c),o,r,a,s,e,l)},t.getColumnModel=function(){return this._39o},t._17o=function(){this.redraw()},t._18o=function(t){var e=this;t.data===e._sortColumn&&Dd[t.property]?e.ivm():(e._42o(),e.redraw())},t._19o=function(){this.redraw()},t.getCurrentSortFunc=function(){var t=this,e=t._sortColumn;if(e&&e.isSortable()){var i=e.getSortFunc(),n=ye===e.getSortOrder()?1:-1;return i||(i=Oa),function(o,r){return i.call(t,t.getValue(o,e),t.getValue(r,e),o,r)*n}}return t._sortFunc},t.isCellEditable=function(t,e){return e.isEditable()&&this.isEditable()},t._37O=function(t,e){if(Ma(e))for(var i=this,n=i.lp(e),o=i._60I,r=i._rowHeight,a=i._29I,s=a.x,l=a.y,c=a.width,h=a.height,u=0;u<o.size();u++){var d=o.get(u),f=d.startX,g=d.column,v=g.getWidth();if(g!==i._31o&&g!==i._4o&&i.isCellEditable(t,g)&&n.x>=f&&n.x<f+v){var _={x:f,y:i.getRowIndex(t)*r,width:v,height:r},p={x:_.x+i.tx(),y:_.y+i.ty(),width:_.width,height:_.height},b=0,m=0;return _.x<s?b=_.x-s:_.x+_.width>s+c&&(b=_.x+_.width-s-c),b&&(i.tx(i.tx()-b),p.x-=b),_.y<l?m=_.y-l:_.y+r>l+h&&(m=_.y+r-l-h),m&&(i.ty(i.ty()-m),p.y-=m),void i.beginEditing({data:t,column:g,value:i.getValue(t,g),event:e,rect:_,editorRect:p,view:i})}}}},Rd.BaseItemEditor=function(t,e,i,n){this._data=t,this._column=e,this._master=i,this._editInfo=n},zd("BaseItemEditor",e,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Fd=h.Tab=function(){bn(Fd,this)};ns("Tab",Hs,{ms_ac:["view","closable","disabled"],_icon:c,_closable:!1,_disabled:!1,setParent:ki});var Ad=h.Column=function(){bn(Ad,this)};ns("Column",Hs,{_46o:1,ms_ac:["accessType","valueType",Zt,pe,be,Ct,"align",He,"sortOrder",_e,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:ye,_sortFunc:c,_sortable:!0,setWidth:function(t){16>t&&(t=16);var e=this._width;this._width=t,this.fp(Ct,e,t)},getToolTip:function(t,e){return this.formatValue(e.getValue(t,this))}});var Wd=h.Property=function(){bn(Wd,this)};ns("Property",Hs,{_46o:1,ms_ac:["accessType","valueType",pe,be,"categoryName",He,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:c,getToolTip:function(t,e,i){var n=this;return e?n.formatValue(i.getValue(t,n)):i.getPropertyName(n)}}),Rd.AccordionView=function(){var t=this;t._20o={},t._21o=new Fs,t._10o=c,t._9o=c,t._11o=c,t._view=Rn(0,t),t.iv()},zd("AccordionView",e,{ms_v:1,ms_fire:1,ms_ac:[fe,ge,"titleHeight",Ft,zt,"titleBackground","selectWidth",ee,"orientation","separatorColor"],_expandIcon:d.accordionViewExpandIcon,_collapseIcon:d.accordionViewCollapseIcon,_titleHeight:ra,_labelColor:d.accordionViewLabelColor,_labelFont:d.accordionViewLabelFont,_titleBackground:d.accordionViewTitleBackground,_selectBackground:d.accordionViewSelectBackground,_selectWidth:d.accordionViewSelectWidth,_orientation:"v",_separatorColor:d.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(t,e,i,n){var o=this,r=zn();if(o._20o[t])throw t+" already exists";r.onmousedown=pa,r.style.cursor=Xe,r.addEventListener(q?Ke:qe,function(t){pa(t)},!1),r.addEventListener(q?ei:Je,function(e){pa(e),Ma(e)&&(o._10o===t?o.collapse():o.expand(t))},!1),Un(o._view,r),o._20o[t]={content:e,div:r,canvas:Fn(r),icon:n},o._21o.add(t),i&&o.expand(t),o.iv()},remove:function(t){var e=this,i=e._20o[t];i&&(Ja(i.div),delete e._20o[t],e._21o.remove(t),e.iv())},clear:function(){var t=this;t._20o={},t._21o.clear(),t.iv()},isExpanded:function(t){return this._10o===t},expand:function(t){var e=this;e._20o[t]&&e._10o!==t&&(e._10o=t,e.onExpanded(t),e.iv())},onExpanded:function(){},collapse:function(){var t=this;t._10o&&(t.onCollapsed(t._10o),delete t._10o,t.iv())},onCollapsed:function(){},initCanvas:function(t,e,i){Hn(t,e,i);var n=Zn(t);return Jn(n,0,0,1),n.clearRect(0,0,e,i),n},drawTitle:function(t,e,i,n,o){var r=this,a=ma(o.icon),s=r.isExpanded(e),l=r._titleHeight,c=r._titleBackground,h=r._selectWidth,u=r._separatorColor,d=ma(s?r._expandIcon:r._collapseIcon),f=h+4;Qo(t,0,0,i,n,c),s&&h&&Qo(t,0,0,h,n,r._selectBackground),(s||r._21o.get(r._21o.size()-1)!==e)&&Qo(t,0,n-1,i,1,u||Da(c)),a&&(ya(t,a,f+Ls(a)/2,l/2),f+=Ls(a)+2),ka(t,e,r.getLabelFont(e),r.getLabelColor(e),f,0,0,l),d&&ya(t,d,i-Ls(d)/2-4,l/2)},validateImpl:function(){var t=this,e=t._view,i=0,n=0,o=t.getWidth(),r=t.getHeight(),a=t._titleHeight,s=t._21o.size()*a,l=t._11o,c=t._9o;delete t._11o,delete t._9o,t._21o.each(function(e){var l,c,h=t._20o[e],u=h.content,d=t._10o===e;Xi(t)?(io(h.div,i,0,a,r),l=t.initCanvas(h.canvas,a,r),$n(l,0,r),Kn(l,-k),t.drawTitle(l,e,r,a,h),l.restore(),d?(c=w(0,o-s),u&&(t._11o=u,t._9o=eo(u),io(u,i+a,0,c,r)),i+=a+c):i+=a):(io(h.div,0,n,o,a),l=t.initCanvas(h.canvas,o,a),t.drawTitle(l,e,o,a,h),l.restore(),d?(c=w(0,r-s),u&&(t._11o=u,t._9o=eo(u),io(u,0,n+a,o,c)),n+=a+c):n+=a)});var h=t._9o;l&&l!==t._11o&&l.endEditing&&l.endEditing(),h&&h!==c&&Un(e,h),c&&c!==h&&Ja(c)}}),Rd.SplitView=function(t,e,i,n){var o=this,r=o._dividerDiv=zn(),a=o._60O=Fn(),s=o._61O=Fn(),l=a.style,h=s.style;o._view=Rn(1,o),Un(o._view,r),l.msTouchAction=Ye,l.pointerEvents=Ye,l.cursor=Xe,h.msTouchAction=Ye,h.pointerEvents=Ye,h.cursor=Xe,t&&o.setLeftView(t),e&&o.setRightView(e),i&&o.setOrientation(i),n!=c&&o.setPosition(n),o.setStatus(yt),new Hd(o)},zd("SplitView",e,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:d.splitViewDividerSize,_dividerBackground:d.splitViewDividerBackground,_dragOpacity:d.splitViewDragOpacity,_toggleIcon:d.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(t,e){var i=this,n=i._position;isNaN(t)||(e||(i._82O=0>t?-1:t>1?1:0),i._position=t,i.fp(xe,n,t))},getLeftView:function(){return this._leftView},setLeftView:function(t){var e=this,i=e._leftView,n=e._view;if(e._leftView!==t){if(i&&i!==e._rightView){var o=eo(i);o.parentNode===n&&Ja(o)}if(e._leftView=t,t){var r=eo(t);r.parentNode!==n&&n.insertBefore(r,e._dividerDiv)}e.fp("leftView",i,t)}},getRightView:function(){return this._rightView},setRightView:function(t){var e=this,i=e._rightView,n=e._view;if(e._rightView!==t){if(i&&i!==e._leftView){var o=eo(i);o.parentNode===n&&Ja(o)}if(e._rightView=t,t){var r=eo(t);r.parentNode!==n&&n.insertBefore(r,e._dividerDiv)}e.fp("rightView",i,t)}},validateImpl:function(){var t=this,e=t._draggable,i=t._position,n=t.getWidth(),o=t.getHeight(),r=t._dividerSize,a=t._dividerBackground,s=q?18:8,l=t._dividerDiv,c=t._82O,h=t._60O,u=t._61O,d=t._toggleIcon,f=t._status,g=l.style,v=null,_=q?20:4,b=d.comps[0];r>=s||0===r?t._coverDiv&&(Ja(t._coverDiv),delete t._coverDiv):t._coverDiv||(t._coverDiv=zn(),Q&&(t._coverDiv.style.background=Fe),Un(l,t._coverDiv)),t._togglable?h.parentNode||(Un(l,h),Un(l,u)):(Ja(h),Ja(u));var m=t._coverDiv,y=t._leftView,x=t._rightView;if(Xi(t)){if(r>n&&(r=n),f===yt)if(1===c)var C=i,I=w(0,n-r-C);else-1===c?(I=-i,C=w(0,n-r-I)):(C=p((n-r)*i),I=w(0,n-r-C));else"cl"===f?(C=0,I=w(0,n-r)):"cr"===f&&(I=0,C=w(0,n-r));y&&io(y,0,0,C,o),x&&io(x,C+r,0,I,o),io(l,C,0,r,o),t._22o=C,m&&(io(m,r/2-s/2,0,s,o),m.style.cursor=e?Qe:""),l.style.cursor=e?Qe:"";var O=l.clientHeight/2,S=l.clientWidth;Hn(h,S,S),io(h,0,O-S-_,S,S),v=Zn(h),Jn(v,0,0,1),b.rotation=-k,zs(v,d,0,0,S,S),v.restore(),Hn(u,S,S),io(u,0,O+_,S,S),v=Zn(u),Jn(v,0,0,1),b.rotation=k,zs(v,d,0,0,S,S),v.restore()}else{if(r>o&&(r=o),f===yt)if(1===c)var T=i,V=w(0,o-r-T);else-1===c?(V=-i,T=w(0,o-r-V)):(T=p((o-r)*i),V=w(0,o-r-T));else"cl"===f?(T=0,V=w(0,o-r)):"cr"===f&&(V=0,T=w(0,o-r));y&&io(y,0,0,n,T),x&&io(x,0,T+r,n,V),io(l,0,T,n,r),t._22o=T,m&&(io(m,0,r/2-s/2,n,s),m.style.cursor=e?Ge:""),g.cursor=e?Ge:"";var E=l.clientWidth/2,S=l.clientHeight;Hn(h,S,S),io(h,E-S-_,0,S,S),v=Zn(h),Jn(v,0,0,1),b.rotation=0,zs(v,d,0,0,S,S),v.restore(),Hn(u,S,S),io(u,E+_,0,S,S),v=Zn(u),Jn(v,0,0,1),b.rotation=D,zs(v,d,0,0,S,S),v.restore()}g.background=a}});var Hd=function(t){this.sv=t,this.addListeners()};is(Hd,e,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(t){var e=this,i=e.sv,n=i._dividerDiv,o=i._60O,r=i._61O,a=i._status,s=t.target;if(s===o)a===yt?i.setStatus("cl"):"cr"===a&&i.setStatus(yt);else if(s===r)a===yt?i.setStatus("cr"):"cl"===a&&i.setStatus(yt);else if(ho(t)&&(s===n||s===i._coverDiv)&&(pa(t),i.isDraggable())){e.resizeDiv=zn();var l=e.resizeDiv.style,c=n.style,h=i.getLeftView(),u=i.getRightView();e._maskViews=[],[h,u].forEach(function(t){t=t.getView?t.getView():t;var n=zn(),o=n.style;o.left=t.style.left,o.top=t.style.top,o.width=t.offsetWidth+"px",o.height=t.offsetHeight+"px",i.getView().appendChild(n),e._maskViews.push(n)}),l.left=c.left,l.top=c.top,l.width=c.width,l.height=c.height,l.opacity=i.getDragOpacity(),l.background=i.getDividerBackground(),e._85o=e._86o=Xi(i)?za(t).x:za(t).y,Un(e.getView(),e.resizeDiv),e._clientPoint=za(t),Za(e,t)}},handleWindowTouchMove:function(t){if(ho(t)){var e=this,i=e.sv,n=i._dividerSize,o=e.resizeDiv.style,r=i.getWidth(),a=i.getHeight(),s=i._22o-e._86o;Xi(i)?(e._85o=za(t).x,s+=e._85o,s>r-n&&(s=r-n),0>s&&(s=0),o.left=s+ut):(e._85o=za(t).y,s+=e._85o,s>a-n&&(s=a-n),0>s&&(s=0),o.top=s+ut)}},handleWindowTouchEnd:function(t){var e=this,i=e.sv,n=i._22o-e._86o+e._85o,o=i._dividerSize,r=Xi(i)?i.getWidth():i.getHeight(),a=i._82O;Aa(e._clientPoint,za(t))>1&&(i.setStatus(yt),0>n&&(n=0),n>r-o&&(n=r-o),r!==o&&(1===a?i.setPosition(n,1):-1===a?i.setPosition(n-r+o,1):i.setPosition(n/(r-o),1))),e._maskViews&&e._maskViews.forEach(function(t){Ja(t)}),Ja(e.resizeDiv),e.resizeDiv=e._85o=e._clientPoint=c},handle_mousedown:function(t){Ma(t)&&this.handle_touchstart(t)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)}}),Rd.TabView=function(){var t=this,e=t._view=Rn(1,t),i=t._91O=zn(1),n=t._tabModel=new Us,o=n.sm(),r=t.invalidate;t._7o=new Fs,t._canvas=Fn(i),Un(e,i),Un(e,t._92O=zn(1)),o.setSelectionMode(J),o.ms(r,t),n.mm(r,t),n.md(r,t),n.mh(r,t),new Ud(t),t.iv()},zd("TabView",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Ft,zt,"tabBackground","selectWidth",ee,"moveBackground","insertColor"],_tabPosition:nt,_tabHeight:ra,_tabGap:d.tabViewTabGap,_labelColor:d.tabViewLabelColor,_labelFont:d.tabViewLabelFont,_tabBackground:d.tabViewTabBackground,_selectWidth:d.tabViewSelectWidth,_selectBackground:d.tabViewSelectBackground,_moveBackground:d.tabViewMoveBackground,_insertColor:d.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},
add:function(t,e,i){var n=new Fd,o=this._tabModel;return n.setName(t),n.setView(e),o.add(n),i&&o.sm().ss(n),n},getLabel:function(t){return t.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(t){this._23o=t,this.iv()},get:function(t){var e=this,i=e._tabModel;if(tn(t))return i._roots.get(t);if(Ki(t)){var n;return i.each(function(i){t===e.getLabel(i)&&(n=i)}),n}return t instanceof Fd?t:c},select:function(t){this._tabModel.sm().ss(this.get(t))},remove:function(t){var e=this;if(t=e.get(t)){var i=e._tabModel,n=i._roots.indexOf(t);e._tabModel.remove(t),e._12Q(--n)}},getCurrentTab:function(){return this._8o},hideTabView:function(t,e){e.parentNode===this._92O&&(un(e)?(e.style.display=ht,e._tab_=t):Ja(e),qr())},showTabView:function(t,e){un(e)&&(e.style.display="block",e._tab_=t),e.parentNode!==this._92O&&(Un(this._92O,e),qr())},_24o:function(){var t,e=this,i=e._8o,n=e._9o,o=e._tabModel.sm().ld();o&&(t=eo(o.getView())),t!==n&&(n&&(i.getView().endEditing&&i.getView().endEditing(),e.hideTabView(i,n)),t&&e.showTabView(o,t)),e._8o=o,e._9o=t,i!==o&&e.onTabChanged(i,o)},onTabChanged:function(){},onTabClosed:function(t,e){this._12Q(--e)},_12Q:function(t){var e=this,i=e._tabModel,n=i.size();if(n&&!i.sm().ld()){t==c&&(t=0),t>=n&&(t=n-1),0>t&&(t=0);for(var o=t;o>=0;o--){var r=e.get(o);if(!r.isDisabled())return e.select(r),r}for(o=t+1;n>o;o++)if(r=e.get(o),!r.isDisabled())return e.select(r),r}},_9Q:function(t){var e=4,i=ma(t.getIcon());i&&(e+=Ls(i,t)+4);var n=this.getLabel(t);return n&&(e+=Pa(this.getLabelFont(t),n).width+4),t.isClosable()&&(e+=10),e},_10Q:function(t,e,i,n,o,r,a){var s,l=this,c=l._tabPosition,h=i+4,u=l._selectWidth,d=ma(e.getIcon()),f=e.isDisabled(),g=l.getLabelColor(e),v=l.getLabelFont(e),_=l.getLabel(e),p=l._selectBackground,b=c===et+"-vertical",m=c===it+"-vertical";(b||m)&&(h=n+4),f&&(t.globalAlpha=Hr),Qo(t,i,n,o,r,a),e===l._8o&&u&&(c===nt?Qo(t,i,n+r-u,o,u,p):c===et?Qo(t,i+o-u,n,u,r,p):c===it?Qo(t,i,n,u,r,p):b?Qo(t,i+o-u,n,u,r,p):m?Qo(t,i,n,u,r,p):Qo(t,i,n,o,u,p));var y=o/2;if(b&&($n(t,y,n+r/2),Kn(t,D),$n(t,-y,-n-r/2)),d){var w=js(d,e),x=Ls(d,e);if(b||m){var C=i+o/2,I=h+w/2;$n(t,C,I),Kn(t,k),$n(t,-C,-I),ya(t,d,i+o/2,h+w/2,e,l),$n(t,C,I),Kn(t,-k),$n(t,-C,-I),h+=w+4}else ya(t,d,h+x/2,n+r/2,e,l),h+=x+4}return b||m?($n(t,o/2,h+o/2),Kn(t,k),$n(t,-o/2,-h-o/2),ka(t,_,v,g,i,h,r,o),$n(t,o/2,h+o/2),Kn(t,-k),$n(t,-o/2,-h-o/2)):ka(t,_,v,g,h,n,o,r),b&&($n(t,y,n+r/2),Kn(t,-D),$n(t,-y,-n-r/2)),e.isClosable()&&(t.strokeStyle=g,t.lineWidth=1,t.beginPath(),m?(t.moveTo(i+o-10,n+r-4),t.lineTo(i+o-4,n+r-10),t.moveTo(i+o-4,n+r-4),t.lineTo(i+o-10,n+r-10),t.stroke(),s={x:i+o-12,y:n+r-12,width:12,height:12}):(t.moveTo(i+o-10,n+4),t.lineTo(i+o-4,n+10),t.moveTo(i+o-4,n+4),t.lineTo(i+o-10,n+10),t.stroke(),s={x:i+o-12,y:n,width:12,height:12})),f&&(t.globalAlpha=1),s},validateImpl:function(){var t=this;t._24o();var e,i=t._canvas,n=t._tabPosition,o=t._91O,r=t._92O,a=t._tabModel,s=t.getWidth(),l=t.getHeight(),c=t._tabHeight,h=t._7o,u=t._tabGap,d=n===nt,f=n===et,g=n===ot,v=n===it,_=n===et+"-vertical",p=n===it+"-vertical",b=t._23o,m=0;if((f||v)&&a._roots.each(function(e){m=w(t._9Q(e),m)}),d?(io(o,0,0,s,c),e={x:0,y:c,width:s,height:w(0,l-c)}):f?(io(o,0,0,m,l),e={x:m,y:0,width:w(0,s-m),height:l}):v?(io(o,s-m,0,m,l),e={x:0,y:0,width:w(0,s-m),height:l}):_?(io(o,0,0,c,l),e={x:c,y:0,width:w(0,s-c),height:l}):p?(io(o,s-c,0,c,l),e={x:0,y:0,width:w(0,s-c),height:l}):(io(o,0,l-c,s,c),e={x:0,y:0,width:s,height:w(0,l-c)}),io(r,e),_||p){t._9o&&(e.x=0,io(t._8o.getView(),e)),Hn(i,c,l);var y=Zn(i),x=0;if(Jn(y,0,t.ty(),1),y.clearRect(0,0,c,l),h.clear(),a._roots.each(function(e){var i,n=t._9Q(e);b&&b.tab===e||(i=t._10Q(y,e,0,x,c,n,t._tabBackground))&&p&&(i.x=s-12),h.add({_75o:i,tab:e,startY:x,endY:x+n,height:n}),x+=n+u}),t._23Q=w(0,x-u),b){var C=b.position;t._10Q(y,b.tab,0,b.startY,c,b.height,t._moveBackground),Qo(y,0,C,c,1,t._insertColor)}y.restore(),t.ty(t.ty())}else if(f||v){t._9o&&(e.x=0,io(t._8o.getView(),e)),Hn(i,m,l);var y=Zn(i),x=0;if(Jn(y,0,t.ty(),1),y.clearRect(0,0,m,l),h.clear(),a._roots.each(function(e){var i;b&&b.tab===e||(i=t._10Q(y,e,0,x,m,c,t._tabBackground))&&v&&(i.x=s-12),h.add({_75o:i,tab:e,startY:x,endY:x+c,height:c}),x+=c+u}),t._23Q=w(0,x-u),b){var C=b.position;t._10Q(y,b.tab,0,b.startY,m,b.height,t._moveBackground),Qo(y,0,C,m,1,t._insertColor)}y.restore(),t.ty(t.ty())}else{t._9o&&(e.y=0,io(t._8o.getView(),e)),Hn(i,s,c);var y=Zn(i),I=0;if(Jn(y,t.tx(),0,1),y.clearRect(0,0,s,c),h.clear(),a._roots.each(function(e){var i,n=t._9Q(e);b&&b.tab===e||(i=t._10Q(y,e,I,0,n,c,t._tabBackground))&&g&&(i.y=l-c),h.add({_75o:i,tab:e,startX:I,endX:I+n,width:n}),I+=n+u}),t._64I=w(0,I-u),b){var C=b.position;t._10Q(y,b.tab,b.startX,0,b.width,c,t._moveBackground),Vn(y,t._insertColor,C,0,c)}y.restore(),t.tx(t.tx())}for(var O=[],S=r.children,T=0;T<S.length;T++){var V=S[T],D=V._tab_;D&&!a.contains(D)&&O.push(V)}O.forEach(function(t){r.removeChild(t)})}});var Ud=function(t){this.tv=t,this.addListeners()};is(Ud,e,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40*10)},handle_DOMMouseScroll:function(t){this.handleScroll(t,10*-t.detail)},handleScroll:function(t,e){pa(t);var i=this.tv,n=i._tabPosition;!i._40o()||n!==nt&&n!==ot||i.tx(this.tv.tx()+e),!i._41o()||n!==et&&n!==it&&n!==et+"-vertical"&&n!==it+"-vertical"||i.ty(this.tv.ty()+e)},_8Q:function(t){var e,i,n=this.tv,o=n._tabPosition,r=n._7o;if(o===nt||o===ot){var a=n.lp(t).x;for(e=0;e<r.size();e++)if(i=r.get(e),i.startX<=a&&a<=i.endX)return i}else if(o===et||o===it||o===et+"-vertical"||o===it+"-vertical"){var s=n.lp(t).y;for(e=0;e<r.size();e++)if(i=r.get(e),i.startY<=s&&s<=i.endY)return i}return c},isClickable:function(t){var e=this.tv,i=e._tabPosition,n=this._73o=this._8Q(t);return!(!e._40o()||i!==nt&&i!==ot)||(!(!e._41o()||i!==et&&i!==it&&i!==et+"-vertical"&&i!==it+"-vertical")||n&&(!n.tab.isDisabled()||e.isMovable()))},handle_mousemove:function(t){var e=this;ro?e._74o=e._8Q(t):e.getView().style.cursor=e.isClickable(t)?Xe:""},handle_mousedown:function(t){this.handle_mousemove(t),this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,i=e.tv,n=i._tabPosition;pa(t),e.isClickable(t)&&(n===nt||n===ot?(e.x=za(t).x,e.lp=i.lp(t),e.tx=i.tx()):(e.y=za(t).y,e.lp=i.lp(t),e.ty=i.ty()),Za(e,t))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e,i=this,n=i.tv,o=n._tabPosition,r=i._73o;if(o===nt||o===ot){if(e=za(t).x-i.x,!i._25o&&!i.moving&&C(e)>2&&(n._40o()&&!Ra(t)?i._25o=1:r&&n.isMovable()&&(i.moving=1)),i._25o)n.tx(i.tx+e);else if(i.moving){var a=i.lp.x+e,s=n._tabGap/2;n._7o.each(function(t){var i=t.endX,o=a-t.startX<i-a;a>=t.startX&&i>=a&&n._7Q({tab:r.tab,startX:r.startX+e,width:r.width,front:o,insertTab:t.tab,position:o?w(0,t.startX-s):x(n._64I,i+s)})})}}else if(e=za(t).y-i.y,!i._25o&&!i.moving&&C(e)>2&&(n._41o()&&!Ra(t)?i._25o=1:r&&n.isMovable()&&(i.moving=1)),i._25o)n.ty(i.ty+e);else if(i.moving){var l=i.lp.y+e,s=n._tabGap/2;n._7o.each(function(t){var i=t.endY,o=l-t.startY<i-l;l>=t.startY&&i>=l&&n._7Q({tab:r.tab,startY:r.startY+e,height:r.height,front:o,insertTab:t.tab,position:o?w(0,t.startY-s):x(n._23Q,i+s)})})}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(){var t=this,e=t.tv,i=e._tabPosition,n=e.getTabModel(),o=n._roots,r=t._73o;if(t.moving){var a=e._23o;if(a&&a.insertTab!==a.tab){var s=a.tab,l=o.remove(s),h=o.indexOf(a.insertTab);h>=0&&(a.front||h++,h<=o.size()&&(o.add(s,h),n._38I(s,l,h)))}e._7Q(c),delete t.moving}else if(!t._25o&&r){s=r.tab;var u=t._74o;if(!u||u.tab===s)if(!s.isDisabled()&&Ua(r._75o,t.lp)){var d=o.indexOf(s);n.remove(s),e.onTabClosed(s,d)}else s.isDisabled()||e._8o===s||n.sm().ss(s)}t._25o=t._73o=t._74o=i===nt||i===ot?t.x=t.lp=t.tx=c:t.y=t.lp=t.ty=c}}),Rd.PropertyView=function(t){var e=this;e._view=Rn(1,e),e._canvas=Fn(e._view),Un(e._view,e._79O=zn()),e._rows=new Fs,e._28o=new Fs,e._26o={},e._26Q={};var i=e._propertyModel=new Us,n=e.ivm;i.mm(n,e),i.md(n,e),i.mh(n,e),e.dm(t||new Us),new Nd(e)},zd("PropertyView",e,{ms_ac:[Ft,At,zt,pe,be,"categorizable",ae,_e,de,fe,ge,oe,re,ne,"selectRowIndex",ee,"background",se,ue,ce,he,le],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Bi,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:ia,_background:d.propertyViewBackground,_expandIcon:d.propertyViewExpandIcon,_collapseIcon:d.propertyViewCollapseIcon,_scrollBarColor:aa,_scrollBarSize:sa,_autoHideScrollBar:Gr,_selectBackground:d.propertyViewSelectBackground,_rowHeight:na,_rowLineVisible:d.propertyViewRowLineVisible,_rowLineColor:d.propertyViewRowLineColor,_10I:.5,_columnLineVisible:d.propertyViewColumnLineVisible,_columnLineColor:d.propertyViewColumnLineColor,_labelColor:d.propertyViewLabelColor,_labelSelectColor:d.propertyViewLabelSelectColor,_labelFont:d.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(t){0>t&&(t=0),t>1&&(t=1);var e=this,i=e._10I;e._10I=t,e.fp("columnPosition",i,t)},getPropertyName:function(t){return t.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(t,e,i){return i===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(t,e){return e===this._selectRowIndex?this._labelSelectColor:t.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(t){var e=this.getHeight()-this._59I;return e>t&&(t=e),t>0?0:p(t)},isExpanded:function(t){if(!t)return!0;var e=this._26o[t];return e?e.isExpanded:!(!1===this._26Q[t])},toggle:function(t){var e=this;e.isExpanded(t)?e.collapse(t):e.expand(t)},expandAll:function(){this.validate();for(var t in this._26o)this.expand(t)},expand:function(t){if(t&&t!==ht){var e=this,i=e._26o[t];i&&!i.isExpanded&&(i.isExpanded=!0,e.onExpanded(t),e.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var t in this._26o)this.collapse(t)},collapse:function(t){if(t&&t!==ht){var e=this,i=e._26o[t];i&&i.isExpanded&&(i.isExpanded=!1,e.onCollapsed(t),e.ivm())}},onCollapsed:function(){},getCategoryName:function(t){if(!this.isCategorizable())return ht;var e=t.getCategoryName();return e||ht},getPropertyModel:function(){return this._propertyModel},setDataModel:function(t){var e=this,i=e._dataModel;i!==t&&(i&&(i.umd(e.handlePropertyChange,e),e._3o||i.sm().ums(e.ivm,e)),e._dataModel=t,t.md(e.handlePropertyChange,e),e._3o?e._3o._21I(t):t.sm().ms(e.ivm,e),e.fp(Te,i,t))},isVisible:function(t){return!this._visibleFunc||this._visibleFunc(t)},onPropertyChanged:function(t){var e=this,i=t.property;Pd[i]?e.ivm():e.iv(),i===Se&&e._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:As},handlePropertyChange:function(t){this._27o===t.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var t=this;t._96I||(t.setSelectRowIndex(-1),t._96I=1,t.iv())},redraw:function(){this.iv()},validateModel:function(){var t=this,e=t._rows,n=t._28o,o={},r=new Fs,a=t._27o;t.updateCurrentData(),a!==t._27o&&t.endEditing(),e.clear(),n.clear(),t.getRawProperties().each(function(e){if(t.isVisible(e)){r.add(e);var a=t.getCategoryName(e);o[a]||(n.add(a,a===ht?0:i),o[a]={isExpanded:t.isExpanded(a),properties:new Fs})}}),t._sortFunc&&r.sort(t._sortFunc);for(var s in t._26o)t._26Q[s]=t.isExpanded(s);t._26o=o,n.each(function(i){i!==ht&&e.add(i);var n=o[i];n.isExpanded&&r.each(function(o){t.getCategoryName(o)===i&&(n.properties.add(o),e.add({property:o,data:t._27o}))},t)})},validateImpl:function(){var t=this;t._76o(),t._96I&&(t.validateModel(),delete t._96I);var e=t._canvas,i=t.getWidth(),n=t.getHeight(),o=-t.ty(),r=t._rowHeight,a=t._indent,s=i-a,l=t._rows,h=l.size(),u=t._9I=a+s*t._10I,d=t._59I=h*r;Hn(e,i,n),t._29I={x:0,y:o,width:i,height:n},t._31I=b(o/r),t._14I=m((o+n)/r),t._31I<0&&(t._31I=0),t._14I>h&&(t._14I=h);var f,g=Zn(e),v=t._background;Jn(g,0,-o,1),g.beginPath(),g.rect(0,o,i,n),g.clip(),g.clearRect(0,o,i,n),t._93db(g),v&&Qo(g,0,0,a,d,v);for(var _=t._31I;_<t._14I;_++){var p=l.get(_),o=r*_;if(Ki(p))v&&Qo(g,a,o,s,r,v),f=ma(t.isExpanded(p)?t._expandIcon:t._collapseIcon),f&&wa(g,f,ze,0,o,a,r),g.save(),g.beginPath(),g.rect(a,o,s,r),g.clip(),t.drawCategoryName(g,p,_,a,o,s,r),g.restore();else{var y=p.property,w=p.data,f=ma(y.getIcon()),x=t._selectRowIndex===_?t.getSelectBackground():c;if(f&&wa(g,f,ze,0,o,a,r),x&&Qo(g,a,o,s,r,x),g.save(),g.beginPath(),g.rect(a,o,u-a,r),g.clip(),t.drawPropertyName(g,y,_,a,o,u-a,r),g.restore(),!t.isEditing(w,y)){var C=u+1,I=i-u-1;g.save(),g.beginPath(),g.rect(C,o,I,r),g.clip(),t._87o(t.drawPropertyValue(g,y,t.getValue(w,y),_,C,o,I,r,w),_,C,o,I,r),g.restore()}}t._rowLineVisible&&Qo(g,a,o+r-1,s,1,t._rowLineColor)}t._columnLineVisible&&(Qo(g,u,0,1,d,t._columnLineColor),Qo(g,i-1,0,1,d)),t._92db(g),t._93I(),g.restore(),t.ty(t.ty())},drawCategoryName:function(t,e,i,n,o,r,a){ka(t,e,this.getCategoryFont(e),this.getCategoryColor(e),n,o,r,a)},drawPropertyName:function(t,e,i,n,o,r,a){return e.drawPropertyName?void e.drawPropertyName(t,e,i,n,o,r,a,this):void ka(t,this.getPropertyName(e),this.getPropertyFont(e,i),this.getPropertyColor(e,i),n,o,r,a)},drawPropertyValue:function(t,e,i,n,o,r,a,s,l){return e.drawPropertyValue?e.drawPropertyValue(t,e,i,n,o,r,a,s,l,this):void Bd(t,i,e,this.getLabelFont(e,i,n),this.getLabelColor(e,i,n),o,r,a,s,l,this)},isPropertyEditable:function(t){return t.isEditable()&&this.isEditable()},setProperties:function(t){this._propertyModel.clear(),this.addProperties(t)},addProperties:function(t){if(t){var e=this._propertyModel;t.forEach(function(t){if(!(t instanceof Wd)){var i=Ta(t.className);t=_a(i||Wd,t)}e.add(t)})}},getRowIndexAt:function(t){var e=this,i=b(e.lp(t).y/e._rowHeight);return i>=0&&i<e._rows.size()?i:-1},getPropertyAt:function(t){var e=this,i=e.getRowIndexAt(t);return i>=0?e._rows.get(i).property:c},getToolTip:function(t){var e=this,i=e.getPropertyAt(t),n=e._27o;return i&&n?i.getToolTip(n,e._9I<e.lp(t).x,e):c}});var Nd=function(t){this.pv=t,this.addListeners()};is(Nd,e,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(t){this.getView().style.cursor=t},clear:function(){var t=this;t._62O=t.cp=t.ty=t.p=c,t.setCursor(Z)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,i=e.pv;pa(t),i.setFocus(t)&&(Ma(t)?(e.cp=za(t),e.ty=i.ty(),e.p=i.getColumnPosition(),e.handle_touchmove(t)):i.setSelectRowIndex(i.getRowIndexAt(t)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this;if(e.cp&&!e._62O){var i=e.pv,n=i.lp(t),o=n.x,r=n.y,a=i._indent,s=i.getRowIndexAt(t),l=i._9I;if(s>=0){var c=i._rowHeight,h=c*s,u=i._rows.get(s),d=u.property;if(Ki(u))ma(i.isExpanded(u)?i._expandIcon:i._collapseIcon)&&o>=0&&a>=o&&r>=h&&h+c>=r?i.toggle(u):La(t)&&i.toggle(u);else if(o>l&&i.isPropertyEditable(d)){var f={x:l+1,y:h,width:i.getWidth()-l-1,height:c},g={x:f.x+i.tx(),y:f.y+i.ty(),width:f.width,height:f.height},v=0,_=i._29I;f.y<_.y?v=f.y-_.y:f.y+c>_.y+_.height&&(v=f.y+c-_.y-_.height),v&&(i.ty(i.ty()-v),g.y-=v),i.beginEditing({data:u.data,property:d,value:i.getValue(u.data,d),event:t,rect:f,editorRect:g,view:i})}}i.setSelectRowIndex(s)}e.clear()},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,i=e.pv,n=e.ty,o=e.cp,r=za(t),a=e._62O;if("p"===a)i.setTranslateY(n+r.y-o.y);else if("c"===a){var s=i.getWidth()-i._indent;if(s>16){var l=e.p-(o.x-r.x)/s,c=16/s;c>l&&(l=c),l>1-c&&(l=1-c),i.setColumnPosition(l)}}else"s"===a&&i.setTranslateY(n+(o.y-r.y)*i._59I/i._29I.height)},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!ro&&Ma(t)){var e=this,i=e.pv,n=C(i.lp(t).x-i._9I)<=(q?8:3);e.cp?e._62O||(n?(e._62O="c",Za(e)):C(za(t).y-e.cp.y)>=2&&(e._62O=e.isV(t)?"s":"p",Za(e))):(n?e.setCursor(Qe):e.setCursor(Z),e.isV(t)&&i._43o())}},isV:function(t){var e=this.pv,i=e._29I;return e._41o()&&i.x+i.width-e.lp(t).x<ha},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.handleScroll(t,-t.detail)},handleScroll:function(t,e){var i=this.pv;pa(t),i.endEditing(),i.translate(0,e*i.getRowHeight())},handle_keydown:function(t){var e=this.pv,i=e._rows.size(),n=e._selectRowIndex+(Co(t)?-1:1);(Co(t)||Oo(t))&&(0>n&&(n=0),n>=i&&(n=i-1),e.setSelectRowIndex(n))}}),Rd.ListView=function(t){this._5o(t),new Qd(this)},zd("ListView",e,{ms_ac:[Ft,At,zt,se,ae,ue,ce,_e,de,oe,re,ne,ie,ee],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:ia,_rowHeight:na,_rowLineVisible:d.listViewRowLineVisible,_rowLineColor:d.listViewRowLineColor,_scrollBarColor:aa,_scrollBarSize:sa,_autoMakeVisible:Qr,_autoHideScrollBar:Gr,_selectBackground:d.listViewSelectBackground,_labelColor:d.listViewLabelColor,_labelSelectColor:d.listViewLabelSelectColor,_labelFont:d.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(t){var e=this,i=e._checkMode;e._checkMode=t,e.fp(ve,i,t)},drawRow:function(t,e,i,n,o,r,a){var s=this,l=0,c=s._indent,h=s.getIconWidth(e);s.drawRowBackground(t,e,i,n,o,r,a),s._checkMode&&(ya(t,s.getCheckIcon(e),l+c/2,o+a/2,e,s),l+=c),s.drawIcon(t,e,l,o,h,a),s.drawLabel(t,e,l+h,o,a)}});var Qd=function(t){this.list=t,this.addListeners()};is(Qd,e,{ms_listener:1,getView:function(){return this.list._view},clear:function(t){var e=this;t&&"d"===e._62O&&e.list.handleDragAndDrop(t,"end"),e._62O=e.cp=e.tx=e.ty=c},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,i=e.list;if(pa(t),i.setFocus(t))if(e.cp=za(t),e.tx=i.tx(),e.ty=i.ty(),Ma(t))e.isV(t)||e.isH(t)||!i.handleDragAndDrop||i.handleDragAndDrop(t,"prepare");else{var n=i.getDataAt(t);n&&e._33o(t,n),e.clear(t)}},handleWindowMouseUp:function(t){this.clear(t)},handleWindowTouchEnd:function(t){this.clear(t)},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this,i=e.list;if(e.cp&&!e._62O){var n=i.getDataAt(t);n&&(i.isCheckMode()?e._34o(t,n):e._33o(t,n),La(t)?i.onDataDoubleClicked(n,t):i.onDataClicked(n,t))}e.clear(t)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,i=e.list,n=e._62O,o=e.tx,r=e.ty,a=e.cp,s=za(t),l=i._29I;"p"===n?i.setTranslate(o+s.x-a.x,r+s.y-a.y):"v"===n?i.ty(r+(a.y-s.y)*i._59I/l.height):"h"===n?i.tx(o+(a.x-s.x)*i._91I/l.width):"d"===n&&i.handleDragAndDrop(t,"between")},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!ro&&Ma(t)){var e=this,i=e.list,n=e.isV(t),o=e.isH(t);if(e.cp){if(!e._62O){if(Aa(za(t),e.cp)<2)return;n?e._62O="v":o?e._62O="h":i.handleDragAndDrop?(e._62O="d",i.handleDragAndDrop(t,"begin")):e._62O="p",Za(e)}}else n&&i._43o(),o&&i._42o()}},isV:function(t){var e=this.list,i=e._29I;return e._41o()&&i.x+i.width-e.lp(t).x<ha},isH:function(t){var e=this.list,i=e._29I;return e._40o()&&i.y+i.height-e.lp(t).y<ha},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40,t.wheelDelta!==t.wheelDeltaX)},handle_DOMMouseScroll:function(t){this.handleScroll(t,-t.detail,1)},handleScroll:function(t,e,i){var n=this.list;pa(t),n.endEditing&&n.endEditing(),i&&n._41o()?n.translate(0,e*n.getRowHeight()):n._40o()&&n.translate(10*e,0)},handle_keydown:function(t){var e,i=this.list,n=i.sm(),o=i._rows,r=o.size();if(fo(t))i.selectAll();else if(go(t))i.handleDelete&&i.handleDelete(t);else if(So(t))i.isCheckMode()&&(e=i.getFocusData())&&i.checkData(e);else if(Co(t)||Oo(t)){var a=i.isCheckMode();if(e=a?i.getFocusData():n.ld()){var s=i.getRowIndex(e);s>=0&&(Co(t)?0!==s&&(e=o.get(s-1),a?i.setFocusData(e):n.ss(e)):s!==r-1&&(e=o.get(s+1),a?i.setFocusData(e):n.ss(e)))}else r>0&&(e=o.get(0),a?i.setFocusData(e):n.ss(e))}},_34o:function(t,e){var i=this.list,n=i.lp(t).x;return n>=0&&n<=i._indent?void i.checkData(e):void i.setFocusData(e)},_33o:function(t,e){var i=this.list,n=i.sm(),o=n.ld();if(Ra(t))i.isSelected(e)?n.rs(e):n.as(e);else if(ja(t))if(o)for(var r=i.getRowIndex(o),a=i.getRowIndex(e);r!==a;)r+=a>r?1:-1,n.as(i._rows.get(r));else n.ss(e);else(Ma(t)||!n.contains(e))&&n.ss(e)}}),Rd.TreeView=function(t){var e=this;e._35o(),e._5o(t),new Gd(e)},zd("TreeView",e,{ms_ac:[Ft,At,zt,"rootVisible",ve,"rootData",_e,de,oe,re,ne,ae,se,ue,ce,fe,ge,ie,ee,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:c,_indent:ia,_rowHeight:na,_rowLineVisible:d.treeViewRowLineVisible,_rowLineColor:d.treeViewRowLineColor,_scrollBarColor:aa,_scrollBarSize:sa,_autoHideScrollBar:Gr,_expandIcon:d.treeViewExpandIcon,_collapseIcon:d.treeViewCollapseIcon,_autoMakeVisible:Qr,_selectBackground:d.treeViewSelectBackground,_labelColor:d.treeViewLabelColor,_labelSelectColor:d.treeViewLabelSelectColor,_labelFont:d.treeViewLabelFont,drawRow:function(t,e,i,n,o,r,a){var s=this;s.drawRowBackground(t,e,i,n,o,r,a),s._97I(t,e,i,0,o,r,a)}});var Gd=function(t){bn(Gd,this,[t])};is(Gd,Qd,{toggle:function(t,e,i,n){var o=this.list,r=o.lp(t).x;if(ma(o.getToggleIcon(e))){var a=i*n;if(r>=a&&a+i>=r)return o.toggle(e),!0}return!!La(t)&&(o.toggle(e),!0)},_34o:function(t,e){var i=this.list,n=i.lp(t).x,o=i._levelMap[e._id],r=i._indent,a=r*(o+1);return n>=a&&a+r>=n?void i.checkData(e):void(this.toggle(t,e,r,o)||i.setFocusData(e))},_33o:function(t,e){var i=this,n=i.list;i.toggle(t,e,n._indent,n.getLevel(e))||Gd.superClass._33o.call(i,t,e)},handle_keydown:function(t){if(xo(t)||Io(t)){var e=this.list,i=e._rows,n=e.isCheckMode(),o=e.sm(),r=n?e.getFocusData():o.ld();r?r.hasChildren()&&(xo(t)?e.collapse(r):e.expand(r)):i.size()>0&&(r=i.get(0),n?e.setFocusData(r):o.ss(r))}else Gd.superClass.handle_keydown.call(this,t)}});var Xd=Rd.TableView=function(t){this._98I(),this._5o(t),new Yd(this)};zd("TableView",e,{ms_ac:[Ft,At,zt,"sortMode",pe,be,se,ue,ce,he,le,"sortColumn",_e,de,oe,re,ne,ie,ee],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:me,_editable:!0,_batchEditable:!1,_rowHeight:na,_rowLineVisible:d.tableViewRowLineVisible,_rowLineColor:d.tableViewRowLineColor,_columnLineVisible:d.tableViewColumnLineVisible,_columnLineColor:d.tableViewColumnLineColor,_scrollBarColor:aa,_scrollBarSize:sa,_autoHideScrollBar:Gr,_autoMakeVisible:Qr,_selectBackground:d.tableViewSelectBackground,_labelColor:d.tableViewLabelColor,_labelSelectColor:d.tableViewLabelSelectColor,_labelFont:d.tableViewLabelFont,getCheckColumn:function(){var t=this;if(!t._31o){var e=t._31o=new Ad;e.setEditable(!0),e.setWidth(40),e.getValue=t.getCheckColumValue,e.drawCell=t.drawCheckColumnCell}return t._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(t){var e=this,i=e._39o,n=e.getCheckColumn();t!==e.isCheckMode()&&(t?i.add(n,0):i.remove(n),e.fp(ve,!t,t))},getCheckColumValue:function(t,e,i){return i.isSelected(t)},drawCheckColumnCell:function(t,e,i,n,o,r,a,s,l){ya(t,l.getCheckIcon(e),o+a/2,r+s/2,e,l)}});var Yd=function(t){bn(Yd,this,[t])};is(Yd,Qd,{_34o:function(t,e){var i=this.list,n=i._31o;if(i.isCellEditable(e,n)){var o=i._3Q(n),r=i.lp(t).x;if(o&&r>=o.startX&&r<o.startX+n.getWidth())return void i.checkData(e)}i.setFocusData(e),i._37O(e,t)},_33o:function(t,e){Yd.superClass._33o.apply(this,arguments),this.list._37O(e,t)}});var qd=Rd.TreeTableView=function(t){var e=this,i=e._4o=new Ad;e._35o(),e._98I(),e._5o(t),i.setDisplayName("Name"),i.setEditable(!0),i.setWidth(180),i.drawCell=Zd,i.getValue=Jd,e._39o.add(i),new $d(e)},Zd=function(t,e,i,n,o,r,a,s,l){l._97I(t,e,i,o,r,a,s)},Jd=function(t,e,i){return i.getLabel(t)};zd("TreeTableView",e,{ms_ac:[Ft,At,zt,"sortMode",pe,be,ae,ve,"rootData","rootVisible",_e,de,"sortColumn",fe,ge,oe,re,ne,ie,ce,se,ue,he,le,ee,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:me,_checkMode:c,_editable:!0,_batchEditable:!1,_indent:ia,_rowHeight:na,_rowLineVisible:d.treeTableViewRowLineVisible,_rowLineColor:d.treeTableViewRowLineColor,_columnLineVisible:d.treeTableViewColumnLineVisible,_columnLineColor:d.treeTableViewColumnLineColor,_expandIcon:d.treeTableViewExpandIcon,_collapseIcon:d.treeTableViewCollapseIcon,_scrollBarColor:aa,_scrollBarSize:sa,_autoHideScrollBar:Gr,_autoMakeVisible:Qr,_selectBackground:d.treeTableViewSelectBackground,_labelColor:d.treeTableViewLabelColor,_labelSelectColor:d.treeTableViewLabelSelectColor,_labelFont:d.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var $d=function(t){bn($d,this,[t])};is($d,Qd,{_34o:function(t,e){var i=this.list,n=i._4o,o=i._3Q(n),r=i.lp(t).x;if(o){var a=i._indent,s=o.startX+a*i.getLevel(e);if(ma(i.getToggleIcon(e))&&r>=s&&s+a>=r)return void i.toggle(e);if(i.isCellEditable(e,n)&&(s+=a,r>=s&&s+a>=r))return void i.checkData(e)}i.setFocusData(e),i._37O(e,t)},_33o:function(t,e){var i=this.list,n=i.lp(t).x;if(ma(i.getToggleIcon(e))){var o=i._3Q(i._4o);if(o){var r=i._indent,a=o.startX+r*i.getLevel(e);if(n>=a&&a+r>=n)return void i.toggle(e)}}$d.superClass._33o.apply(this,arguments),i._37O(e,t)}});var Kd=Rd.TableHeader=function(t){var e=this,i=e._view=Rn(1,e),n=e._39o=t.getColumnModel(),o=e.iv;e.tv=e._tableView=t,e._60I=new Fs,e._canvas=Fn(i),i.style.background=d.tableHeaderBackground||"",i.style.height=oa+ut,n.mm(o,e),n.md(o,e),n.mh(o,e),t.mp(function(t){Vd[t.property]&&e.iv()},e),new tf(e),e.iv()};zd("TableHeader",e,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Ft,zt,ae,"moveBackground","insertColor",he,le,"resizable","movable"],_checkIcon:Tt,_movable:!0,_resizable:!0,_labelColor:d.tableHeaderLabelColor,_labelFont:d.tableHeaderLabelFont,_columnLineColor:d.tableHeaderColumnLineColor,_columnLineVisible:d.tableHeaderColumnLineVisible,_sortDescIcon:d.tableHeaderSortDescIcon,_sortAscIcon:d.tableHeaderSortAscIcon,_moveBackground:d.tableHeaderMoveBackground,_insertColor:d.tableHeaderInsertColor,_indent:ia,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(t){return t.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(t){return t.getColor()||this._labelColor},getLabelAlign:function(t){return t._align},onPropertyChanged:function(){this.iv()},_5Q:function(t){this._61I=t,this.iv()},getLogicalPoint:function(t){return qa(t,this._canvas,this.tv.tx())},validateImpl:function(){var t=this,e=t._canvas,i=t.getWidth(),n=t.getHeight(),o=t.tv,r=t._60I,a=t._61I,s=-o.tx(),l=0;(i!==e.clientWidth||n!==e.clientHeight)&&Hn(e,i,n),r.clear(),t._39o._roots.each(function(t){if(t.isVisible()){var e=l+t.getWidth();s+i>=l&&e>=s&&r.add({column:t,startX:l}),l=e}});var c=Zn(e);if(Jn(c,-s,0,1),c.beginPath(),c.rect(s,0,i,n),c.clip(),c.clearRect(s,0,i,n),r.each(function(e){var i=e.column,o=e.startX,r=i.getWidth();r>0&&(c.save(),c.beginPath(),c.rect(o,0,r,n),c.clip(),a&&a.column===i||t.drawColumn(c,i,o,0,r,n),t._columnLineVisible&&Qo(c,o+r-1,0,1,n,t._columnLineColor),c.restore())}),a){var h=a.column,l=a.startX,u=a.position,d=h.getWidth();c.save(),c.beginPath(),c.rect(l,0,d,n),c.clip(),c.fillStyle=t._moveBackground,c.fill(),t.drawColumn(c,h,l,0,d,n),c.restore(),Vn(c,t._insertColor,u,0,n)}c.restore()},_6Q:function(t){var e=this.tv;return e._31o===t&&e.sm().getSelectionMode()===$},drawColumn:function(t,e,i,n,o,r){var a=this,s=a.tv,l=ma(e.getIcon()),c=a.getLabelAlign(e);if(a._6Q(e)){var h=ma(a._checkIcon);ya(t,h,i+o/2,n+r/2,e,a)}else{var u=a.getLabel(e),d=a.getLabelFont(e),f=a.getLabelColor(e),g=Pa(d,u).width,v=l?a._indent:0;c===et?(l&&wa(t,l,ze,i,n,v,r),ka(t,u,d,f,i+v,n,o,r,et)):c===it?(l&&wa(t,l,ze,i+o-g-v,n,v,r),ka(t,u,d,f,i,n,o,r,it)):(l&&wa(t,l,ze,i+(o-g-v)/2,n,v,r),ka(t,u,d,f,i+(o-g+v)/2,n,0,r,et))}if(e.isSortable()&&s.getSortColumn()===e&&(l=ma(e.getSortOrder()===ye?a._sortAscIcon:a._sortDescIcon))){var _=Ls(l,e)/2+2;ya(t,l,c===it?i+_:i+o-_,n+r/2,e,s)}}});var tf=function(t){var e=this;e.th=t,e.tv=t._tableView,e.addListeners()};is(tf,e,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(t){this.getView().style.cursor=t},handle_mousemove:function(t){if(!ro){var e=this;delete e._29o,e.setCursor(Z);for(var i=e.th,n=i._60I,o=i.lp(t).x,r=n.size()-1;r>=0;r--){var a=n.get(r),s=a.column,l=a.startX+s.getWidth();if(i.isResizable()&&C(l-o)<=(q?10:3))return e._29o=a,void e.setCursor(Qe);(s.isSortable()||i.isMovable()||s===e.tv.getCheckColumn())&&o>=a.startX&&l>=o&&s.getWidth()>0&&(e._29o=a,e.setCursor(Xe))}}},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this;pa(t),e.tv.endEditing(),e.handle_mousemove(t),e._29o&&(e.x=za(t).x,e.lx=e.th.lp(t).x,e.w=e._29o.column.getWidth(),Za(e,t))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,i=e.th,n=e.getView().style.cursor,o=e._29o,r=za(t).x-e.x;if(e.resizing||e.moving||(n===Qe?e.resizing=1:i.isMovable()&&n===Xe&&C(r)>2&&(e.moving=1)),e.resizing)o.column.setWidth(e.w+r);else if(e.moving){var a=e.lx+r;i._60I.each(function(t){var e=t.startX,n=e+t.column.getWidth();if(a>=e&&n>=a){var s={column:o.column,startX:o.startX+r,front:n-a>a-e,insertColumn:t.column};s.position=s.front?e:n,i._5Q(s)}})}},_16Q:function(t,e){var i=this,n=i.tv,o=i.th,r=o._checkIcon;if(o._6Q(t)){var a=ma(r),s=i.lx,l=t.getWidth(),c=Ls(a,t);if(s>=e+l/2-c&&e+l/2+c>=s){o.setCheckIcon(r===St?Tt:St);var h=n.sm(),u=n._rows;return r===St?h.rs(u):h.ss(u),n.onCheckColumnClicked(t),!0}}return!1},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,i=e.tv,n=e.th,o=e._29o;if(e.moving){var r=n._61I;if(r&&r.insertColumn!==r.column){var a=r.column,s=i.getColumnModel()._roots,l=s.remove(a),h=s.indexOf(r.insertColumn);h>=0&&(r.front||h++,h<=s.size()&&(s.add(a,h),i.getColumnModel()._38I(a,l,h)))}n._5Q(c),delete e.moving}else if(!e.resizing&&o){a=o.column;var u=n.lp(t).x,d=o.startX,f=!0;if(n.onColumnClicked){var g=n.onColumnClicked(a,t);!1===g&&(f=!1)}if(f&&u>=d&&u<=d+a.getWidth()&&!e._16Q(a,d)){if(a.isSortable()){var v=i.getSortMode(),_=a.getSortOrder();v===me?i.getSortColumn()===a?(_===we&&i.setSortColumn(c),a.setSortOrder(_===ye?we:ye)):i.setSortColumn(a):"bistate"===v&&(i.getSortColumn()===a?a.setSortOrder(_===ye?we:ye):i.setSortColumn(a))}i.onColumnClicked(a,t)}}e._29o=e.resizing=e.x=e.lx=e.w=c}}),Rd.TablePane=function(t){this.init(new Xd(t))},zd("TablePane",e,{ms_v:1,_44o:1}),Rd.TreeTablePane=function(t){this.init(new qd(t))},zd("TreeTablePane",e,{ms_v:1,_44o:1}),Rd.Toolbar=function(t){var e=this,i=e._view=Rn(1,e),n=i.style;n.background=d.toolbarBackground||"",n.height=ra+ut,e._canvas=Fn(i),e._30o=new Fs,e._90I=new Fs,e.setItems(t||[]),i.handleGroupSelectedChanged=function(t){if(t.isSelected()){var i=t.getGroupId();null!=i&&e._items.forEach(function(e){var n=e.element;n&&n!==t&&n.setSelected&&n.getGroupId&&n.getGroupId()===i&&n.setSelected(!1)})}},new ef(e)},zd("Toolbar",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[mt,Ft,zt,At,ee,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:d.toolbarLabelColor,_labelSelectColor:d.toolbarLabelSelectColor,_labelFont:d.toolbarLabelFont,_selectBackground:d.toolbarSelectBackground,_itemGap:d.toolbarItemGap,_separatorColor:d.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(t){var e=this.getItemInfoAt(t);return e?e.item.toolTip:c},getLabelColor:function(t){return t.selected&&t.type!==St&&"radio"!==t.type?this._labelSelectColor:this._labelColor},
onPropertyChanged:function(t){this.iv(),t.property===mt&&this._items.forEach(function(t){jn(t)})},redraw:function(){this.iv()},addItem:function(t,e){var i=this._items;e==c?i.push(t):i.splice(e,0,t),this.fp(mt,c,i)},removeItem:function(t){if(t)for(var e=this._items,i=0;i<e.length;i++)t===e[i]&&(e.splice(i,1),this.fp(mt,c,e))},removeItemById:function(t){if(t!=c)for(var e=this._items,i=0;i<e.length;i++)t===e[i].id&&(e.splice(i,1),this.fp(mt,c,e))},getItemById:function(t){if(t!=c)for(var e=this._items,i=0;i<e.length;i++){var n=e[i];if(t===n.id)return n}},getItemInfos:function(){return this._30o},getItemInfoAt:function(t){var e=this,i=0,n=e._30o,o=e.lp(t),r=o.x,a=o.y;if(a>=0&&a<=e.getHeight())for(;i<n.size();i++){var s=n.get(i);if(s.startX<=r&&r<=s.endX)return s}return c},drawItem:function(t,e,i,n,o){if(!1===e.visible)return 0;var r=this,a=e.disabled;a&&(t.globalAlpha=Hr);var s=r.drawItemImpl(t,e,i,n,o),l=r._itemGap;return a&&(t.globalAlpha=1),this._currentItem!==e||"separator"===e||e.unfocusable||Jo(t,r._separatorColor,i-l/2,0,s+l,n),s},drawItemImpl:function(t,e,i,n,o){var r,a=this,s=a._view,l=a._itemGap,c=n/2,h=e.type,u=e.label,d=a.getLabelFont(e),f=a.getLabelColor(e),g=e.selected,v=ma(e.icon),_=Ls(v,e),p=0,b=e.element,m=_+(u?Pa(d,u).width:0);if("separator"===e)return Vn(t,a._separatorColor,i,n/4,c),1;if(b){v&&ya(t,v,i+_/2,c),ka(t,u,d,f,i+_,0,0,n);var y=eo(b);o||a._90I.add(y),y.parentNode!==s&&Un(s,y),b.iv&&b.iv(),b.validate&&b.validate();var w=y.getBoundingClientRect(),x=w.width,C=y.style;return Wn(y),C.left=a.tx()+i+m+ut,C.top=(n-w.height)/2+ut,m+x}return"radio"===h?r=ma(g?Vt:Dt):h===St&&(r=ma(g?St:Tt)),r?(p=Ls(r,e),ya(t,r,i+p/2,c),i+=p,m+=p):g&&Qo(t,i-l/2,0,m+l,n,a.getSelectBackground(e)),v&&ya(t,v,i+_/2,c),ka(t,u,d,f,i+_,0,0,n),m},validateImpl:function(){var t=this,e=t._canvas,i=t.getWidth(),n=t.getHeight(),o=t._30o,r=t._items;Hn(e,i,n);var a=Zn(e),s=t._itemGap,l=s/2;Jn(a,t.tx(),0,1),a.clearRect(0,0,i,n);var c=t._90I;t._90I=new Fs,o.clear(),r.forEach(function(e){var i=t.drawItem(a,e,l,n);o.add({item:e,startX:l,endX:l+i,width:i}),i&&(l+=i+s)}),c.each(function(e){t._90I.contains(e)||Ja(e)}),t._64I=w(0,l),a.restore(),t._stickToRight?(t._65O=0,a=Zn(e),l=i-t._64I+s,Jn(a,0,0,1),a.clearRect(0,0,i,n),o.clear(),r.forEach(function(e){var i=t.drawItem(a,e,l,n,!0);o.add({item:e,startX:l,endX:l+i,width:i}),i&&(l+=i+s)}),a.restore()):t.tx(t.tx())},handleClick:function(t){var e=this,i=t.type,n=t.action,o=t.groupId,r=t.selected;t.disabled||(o!=c?r||(t.selected=!0,this._items.forEach(function(e){e.groupId===o&&t!==e&&(e.selected=!1)}),n&&t.action(t,e)):i===St||"toggle"===i?(t.selected=!r,n&&t.action(t,e)):n&&t.action(t,e)),qr(),e.iv()}});var ef=function(t){this.tb=t,this.addListeners()};is(ef,e,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40*10)},handle_DOMMouseScroll:function(t){this.handleScroll(t,10*-t.detail)},handleScroll:function(t,e){pa(t);var i=this.tb;i.isScrollable()&&!i._stickToRight&&(i.tx(i.tx()+e),oo())},handle_mousemove:function(t){var e=this;ro?e.info2=e.tb.getItemInfoAt(t):e.setItem(t)},handle_mouseout:function(t){var e=this;t.target===e.getView()?e.tb.setCurrentItem(c):e.handle_mousemove(t)},handle_mousedown:function(t){this.handle_mousemove(t),this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,i=e.tb,n=t.target;(n===e.getView()||n===i._canvas)&&(pa(t),i.setFocus(t)&&(this.setItem(t),(i.isScrollable()||e.info&&!e.info.item.disabled)&&(e.x=za(t).x,e.tx=i.tx(),Za(e,t))))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,i=e.tb;if(!i._stickToRight){var n=za(t).x-e.x;!e._25o&&C(n)>2&&i.isScrollable()&&(e._25o=1),e._25o&&i.tx(e.tx+n)}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(){var t=this,e=t.tb,i=t.info,n=t.info2;if(!t._25o&&i){var o=i.item;n&&n.item!==o||e.handleClick(o)}t._25o=t.x=t.tx=t.info2=c,t.setItem()},setItem:function(t){var e=this,i=e.tb,n=e.info=t?i.getItemInfoAt(t):c;i.setCurrentItem(n?n.item:c)}}),Rd.BorderPane=function(){this._view=Rn(1,this),this.iv()},zd("BorderPane",e,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(t,e){this._12o("leftView",t),e!=c&&this.setLeftWidth(e)},getRightView:function(){return this._rightView},setRightView:function(t,e){this._12o("rightView",t),e!=c&&this.setRightWidth(e)},getTopView:function(){return this._topView},setTopView:function(t,e){this._12o("topView",t),e!=c&&this.setTopHeight(e)},getBottomView:function(){return this._bottomView},setBottomView:function(t,e){this._12o("bottomView",t),e!=c&&this.setBottomHeight(e)},getCenterView:function(){return this._centerView},setCenterView:function(t){this._12o("centerView",t)},_12o:function(t,e){var i=this,n="_"+t,o=i._view,r=i[n];r!==e&&(r&&Ja(r.getView?r.getView():r),i[n]=e,e&&(e.getView?Un(o,e.getView(),1):Un(o,e,1)),i.fp(t,r,e))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var t=this,e=t._topView,i=t._bottomView,n=t._leftView,o=t._rightView,r=t._centerView,a=t.getWidth(),s=t.getHeight(),l=0,h=0,u=a,d=s,f=0,g=0,v=0,_=0;e&&(f=t._topHeight==c?Yn(e):t._topHeight,h=f),i&&(g=t._bottomHeight==c?Yn(i):t._bottomHeight,d=s-g),n&&(v=t._leftWidth==c?Xn(n):t._leftWidth,l=v),o&&(_=t._rightWidth==c?Xn(o):t._rightWidth,u=a-_);var p=w(0,u-l),b=w(0,d-h);e&&io(e,0,0,a,f),i&&io(i,0,d,a,g),n&&io(n,0,h,v,b),o&&io(o,u,h,_,b),r&&io(r,l,h,p,b)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);